{"ast":null,"code":"/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.c3 = factory());\n})(this, function () {\n  'use strict';\n\n  function ChartInternal(api) {\n    var $$ = this; // Note: This part will be replaced by rollup-plugin-modify\n    // When bundling esm output. Beware of changing this line.\n    // TODO: Maybe we should check that the modification by rollup-plugin-modify\n    // is valid during unit tests.\n\n    $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require('d3') : undefined;\n    $$.api = api;\n    $$.config = $$.getDefaultConfig();\n    $$.data = {};\n    $$.cache = {};\n    $$.axes = {};\n  }\n  /**\r\n   * The Chart class\r\n   *\r\n   * The methods of this class is the public APIs of the chart object.\r\n   */\n\n\n  function Chart(config) {\n    this.internal = new ChartInternal(this);\n    this.internal.loadConfig(config);\n    this.internal.beforeInit(config);\n    this.internal.init();\n    this.internal.afterInit(config);\n\n    (function bindThis(fn, target, argThis) {\n      Object.keys(fn).forEach(function (key) {\n        target[key] = fn[key].bind(argThis);\n\n        if (Object.keys(fn[key]).length > 0) {\n          bindThis(fn[key], target[key], argThis);\n        }\n      });\n    })(Chart.prototype, this, this);\n  }\n\n  var asHalfPixel = function asHalfPixel(n) {\n    return Math.ceil(n) + 0.5;\n  };\n\n  var ceil10 = function ceil10(v) {\n    return Math.ceil(v / 10) * 10;\n  };\n\n  var diffDomain = function diffDomain(d) {\n    return d[1] - d[0];\n  };\n\n  var getOption = function getOption(options, key, defaultValue) {\n    return isDefined(options[key]) ? options[key] : defaultValue;\n  };\n\n  var getPathBox = function getPathBox(path) {\n    var box = getBBox(path),\n        items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n        minX = items[0].x,\n        minY = Math.min(items[0].y, items[1].y);\n    return {\n      x: minX,\n      y: minY,\n      width: box.width,\n      height: box.height\n    };\n  };\n\n  var getBBox = function getBBox(element) {\n    try {\n      return element.getBBox();\n    } catch (ignore) {\n      // Firefox will throw an exception if getBBox() is called whereas the\n      // element is rendered with display:none\n      // See https://github.com/c3js/c3/issues/2692\n      // The previous code was using `getBoundingClientRect` which was returning\n      // everything at 0 in this case so let's reproduce this behavior here.\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n  };\n\n  var hasValue = function hasValue(dict, value) {\n    var found = false;\n    Object.keys(dict).forEach(function (key) {\n      if (dict[key] === value) {\n        found = true;\n      }\n    });\n    return found;\n  };\n\n  var isArray = function isArray(o) {\n    return Array.isArray(o);\n  };\n\n  var isDefined = function isDefined(v) {\n    return typeof v !== 'undefined';\n  };\n\n  var isEmpty = function isEmpty(o) {\n    return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || typeof o === 'object' && Object.keys(o).length === 0;\n  };\n\n  var isFunction = function isFunction(o) {\n    return typeof o === 'function';\n  };\n\n  var isNumber = function isNumber(o) {\n    return typeof o === 'number';\n  };\n\n  var isString = function isString(o) {\n    return typeof o === 'string';\n  };\n\n  var isUndefined = function isUndefined(v) {\n    return typeof v === 'undefined';\n  };\n\n  var isValue = function isValue(v) {\n    return v || v === 0;\n  };\n\n  var notEmpty = function notEmpty(o) {\n    return !isEmpty(o);\n  };\n\n  var sanitise = function sanitise(str) {\n    return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n  };\n\n  var flattenArray = function flattenArray(arr) {\n    return Array.isArray(arr) ? [].concat.apply([], arr) : [];\n  };\n  /**\r\n   * Returns whether the point is within the given box.\r\n   *\r\n   * @param {Array} point An [x,y] coordinate\r\n   * @param {Object} box An object with {x, y, width, height} keys\r\n   * @param {Number} sensitivity An offset to ease check on very small boxes\r\n   */\n\n\n  var isWithinBox = function isWithinBox(point, box, sensitivity) {\n    if (sensitivity === void 0) {\n      sensitivity = 0;\n    }\n\n    var xStart = box.x - sensitivity;\n    var xEnd = box.x + box.width + sensitivity;\n    var yStart = box.y + box.height + sensitivity;\n    var yEnd = box.y - sensitivity;\n    return xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart;\n  };\n  /**\r\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\r\n   *\r\n   * @param string agent Optional parameter to specify user agent\r\n   */\n\n\n  var getIEVersion = function getIEVersion(agent) {\n    // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\n    if (typeof agent === 'undefined') {\n      agent = window.navigator.userAgent;\n    }\n\n    var pos = agent.indexOf('MSIE '); // up to IE10\n\n    if (pos > 0) {\n      return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\n    }\n\n    pos = agent.indexOf('Trident/'); // IE11\n\n    if (pos > 0) {\n      pos = agent.indexOf('rv:');\n      return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\n    }\n\n    return false;\n  };\n  /**\r\n   * Returns whether the used browser is Internet Explorer.\r\n   *\r\n   * @param version Optional parameter to specify IE version\r\n   */\n\n\n  var isIE = function isIE(version) {\n    var ver = getIEVersion();\n\n    if (typeof version === 'undefined') {\n      return !!ver;\n    }\n\n    return version === ver;\n  };\n\n  function AxisInternal(component, params) {\n    var internal = this;\n    internal.component = component;\n    internal.params = params || {};\n    internal.d3 = component.d3;\n    internal.scale = internal.d3.scaleLinear();\n    internal.range;\n    internal.orient = 'bottom';\n    internal.innerTickSize = 6;\n    internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n    internal.tickPadding = 3;\n    internal.tickValues = null;\n    internal.tickFormat;\n    internal.tickArguments;\n    internal.tickOffset = 0;\n    internal.tickCulling = true;\n    internal.tickCentered;\n    internal.tickTextCharSize;\n    internal.tickTextRotate = internal.params.tickTextRotate;\n    internal.tickLength;\n    internal.axis = internal.generateAxis();\n  }\n\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\n    selection.attr('transform', function (d) {\n      return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\n    });\n  };\n\n  AxisInternal.prototype.axisY = function (selection, y) {\n    selection.attr('transform', function (d) {\n      return 'translate(0,' + Math.ceil(y(d)) + ')';\n    });\n  };\n\n  AxisInternal.prototype.scaleExtent = function (domain) {\n    var start = domain[0],\n        stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  };\n\n  AxisInternal.prototype.generateTicks = function (scale) {\n    var internal = this;\n    var i,\n        domain,\n        ticks = [];\n\n    if (scale.ticks) {\n      return scale.ticks.apply(scale, internal.tickArguments);\n    }\n\n    domain = scale.domain();\n\n    for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n      ticks.push(i);\n    }\n\n    if (ticks.length > 0 && ticks[0] > 0) {\n      ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n    }\n\n    return ticks;\n  };\n\n  AxisInternal.prototype.copyScale = function () {\n    var internal = this;\n    var newScale = internal.scale.copy(),\n        domain;\n\n    if (internal.params.isCategory) {\n      domain = internal.scale.domain();\n      newScale.domain([domain[0], domain[1] - 1]);\n    }\n\n    return newScale;\n  };\n\n  AxisInternal.prototype.textFormatted = function (v) {\n    var internal = this,\n        formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n    return typeof formatted !== 'undefined' ? formatted : '';\n  };\n\n  AxisInternal.prototype.updateRange = function () {\n    var internal = this;\n    internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n    return internal.range;\n  };\n\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\n    var internal = this;\n\n    if (internal.tickTextCharSize) {\n      return internal.tickTextCharSize;\n    }\n\n    var size = {\n      h: 11.5,\n      w: 5.5\n    };\n    tick.select('text').text(function (d) {\n      return internal.textFormatted(d);\n    }).each(function (d) {\n      var box = getBBox(this),\n          text = internal.textFormatted(d),\n          h = box.height,\n          w = text ? box.width / text.length : undefined;\n\n      if (h && w) {\n        size.h = h;\n        size.w = w;\n      }\n    }).text('');\n    internal.tickTextCharSize = size;\n    return size;\n  };\n\n  AxisInternal.prototype.isVertical = function () {\n    return this.orient === 'left' || this.orient === 'right';\n  };\n\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\n    var internal = this;\n    var splitted = internal.params.tickMultiline ? internal.splitTickText(d, scale) : [].concat(internal.textFormatted(d));\n\n    if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n      splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n    }\n\n    return splitted.map(function (s) {\n      return {\n        index: i,\n        splitted: s,\n        length: splitted.length\n      };\n    });\n  };\n\n  AxisInternal.prototype.splitTickText = function (d, scale) {\n    var internal = this,\n        tickText = internal.textFormatted(d),\n        maxWidth = internal.params.tickWidth,\n        subtext,\n        spaceIndex,\n        textWidth,\n        splitted = [];\n\n    if (Object.prototype.toString.call(tickText) === '[object Array]') {\n      return tickText;\n    }\n\n    if (!maxWidth || maxWidth <= 0) {\n      maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(1) - scale(0)) - 12 : 110;\n    }\n\n    function split(splitted, text) {\n      spaceIndex = undefined;\n\n      for (var i = 1; i < text.length; i++) {\n        if (text.charAt(i) === ' ') {\n          spaceIndex = i;\n        }\n\n        subtext = text.substr(0, i + 1);\n        textWidth = internal.tickTextCharSize.w * subtext.length; // if text width gets over tick width, split by space index or crrent index\n\n        if (maxWidth < textWidth) {\n          return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n        }\n      }\n\n      return splitted.concat(text);\n    }\n\n    return split(splitted, tickText + '');\n  };\n\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\n    if (splitted.length <= max) {\n      return splitted;\n    }\n\n    var ellipsified = splitted.slice(0, max);\n    var remaining = 3;\n\n    for (var i = max - 1; i >= 0; i--) {\n      var available = ellipsified[i].length;\n      ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n      remaining -= available;\n\n      if (remaining <= 0) {\n        break;\n      }\n    }\n\n    return ellipsified;\n  };\n\n  AxisInternal.prototype.updateTickLength = function () {\n    var internal = this;\n    internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n  };\n\n  AxisInternal.prototype.lineY2 = function (d) {\n    var internal = this,\n        tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n    return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n  };\n\n  AxisInternal.prototype.textY = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n  };\n\n  AxisInternal.prototype.textTransform = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 'rotate(' + rotate + ')' : '';\n  };\n\n  AxisInternal.prototype.textTextAnchor = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? rotate > 0 ? 'start' : 'end' : 'middle';\n  };\n\n  AxisInternal.prototype.tspanDx = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n  };\n\n  AxisInternal.prototype.tspanDy = function (d, i) {\n    var internal = this,\n        dy = internal.tickTextCharSize.h;\n\n    if (i === 0) {\n      if (internal.isVertical()) {\n        dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n      } else {\n        dy = '.71em';\n      }\n    }\n\n    return dy;\n  };\n\n  AxisInternal.prototype.generateAxis = function () {\n    var internal = this,\n        d3 = internal.d3,\n        params = internal.params;\n\n    function axis(g, transition) {\n      var self;\n      g.each(function () {\n        var g = axis.g = d3.select(this);\n        var scale0 = this.__chart__ || internal.scale,\n            scale1 = this.__chart__ = internal.copyScale();\n        var ticksValues = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n            ticks = g.selectAll('.tick').data(ticksValues, scale1),\n            tickEnter = ticks.enter().insert('g', '.domain').attr('class', 'tick').style('opacity', 1e-6),\n            // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n        tickExit = ticks.exit().remove(),\n            tickUpdate = ticks.merge(tickEnter),\n            tickTransform,\n            tickX,\n            tickY;\n\n        if (params.isCategory) {\n          internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n          tickX = internal.tickCentered ? 0 : internal.tickOffset;\n          tickY = internal.tickCentered ? internal.tickOffset : 0;\n        } else {\n          internal.tickOffset = tickX = 0;\n        }\n\n        internal.updateRange();\n        internal.updateTickLength();\n        internal.updateTickTextCharSize(g.select('.tick'));\n        var lineUpdate = tickUpdate.select('line').merge(tickEnter.append('line')),\n            textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\n        var tspans = tickUpdate.selectAll('text').selectAll('tspan').data(function (d, i) {\n          return internal.tspanData(d, i, scale1);\n        }),\n            tspanEnter = tspans.enter().append('tspan'),\n            tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\n          return d.splitted;\n        });\n        tspans.exit().remove();\n        var path = g.selectAll('.domain').data([0]),\n            pathUpdate = path.enter().append('path').merge(path).attr('class', 'domain'); // TODO: each attr should be one function and change its behavior by internal.orient, probably\n\n        switch (internal.orient) {\n          case 'bottom':\n            {\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return internal.textY(d, i);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + internal.outerTickSize);\n              break;\n            }\n\n          case 'top':\n            {\n              // TODO: rotated tick text\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return -1 * internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + -internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'left':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', -internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', -internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'end');\n              tspanUpdate.attr('x', -internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + -internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'right':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'start');\n              tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + internal.outerTickSize);\n              break;\n            }\n        }\n\n        if (scale1.rangeBand) {\n          var x = scale1,\n              dx = x.rangeBand() / 2;\n\n          scale0 = scale1 = function scale1(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, internal.tickOffset);\n        }\n\n        tickEnter.call(tickTransform, scale0, internal.tickOffset);\n        self = (transition ? tickUpdate.transition(transition) : tickUpdate).style('opacity', 1).call(tickTransform, scale1, internal.tickOffset);\n      });\n      return self;\n    }\n\n    axis.scale = function (x) {\n      if (!arguments.length) {\n        return internal.scale;\n      }\n\n      internal.scale = x;\n      return axis;\n    };\n\n    axis.orient = function (x) {\n      if (!arguments.length) {\n        return internal.orient;\n      }\n\n      internal.orient = x in {\n        top: 1,\n        right: 1,\n        bottom: 1,\n        left: 1\n      } ? x + '' : 'bottom';\n      return axis;\n    };\n\n    axis.tickFormat = function (format) {\n      if (!arguments.length) {\n        return internal.tickFormat;\n      }\n\n      internal.tickFormat = format;\n      return axis;\n    };\n\n    axis.tickCentered = function (isCentered) {\n      if (!arguments.length) {\n        return internal.tickCentered;\n      }\n\n      internal.tickCentered = isCentered;\n      return axis;\n    };\n\n    axis.tickOffset = function () {\n      return internal.tickOffset;\n    };\n\n    axis.tickInterval = function () {\n      var interval, length;\n\n      if (params.isCategory) {\n        interval = internal.tickOffset * 2;\n      } else {\n        length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n        interval = length / axis.g.selectAll('line').size();\n      }\n\n      return interval === Infinity ? 0 : interval;\n    };\n\n    axis.ticks = function () {\n      if (!arguments.length) {\n        return internal.tickArguments;\n      }\n\n      internal.tickArguments = arguments;\n      return axis;\n    };\n\n    axis.tickCulling = function (culling) {\n      if (!arguments.length) {\n        return internal.tickCulling;\n      }\n\n      internal.tickCulling = culling;\n      return axis;\n    };\n\n    axis.tickValues = function (x) {\n      if (typeof x === 'function') {\n        internal.tickValues = function () {\n          return x(internal.scale.domain());\n        };\n      } else {\n        if (!arguments.length) {\n          return internal.tickValues;\n        }\n\n        internal.tickValues = x;\n      }\n\n      return axis;\n    };\n\n    return axis;\n  };\n\n  var CLASS = {\n    target: 'c3-target',\n    chart: 'c3-chart',\n    chartLine: 'c3-chart-line',\n    chartLines: 'c3-chart-lines',\n    chartBar: 'c3-chart-bar',\n    chartBars: 'c3-chart-bars',\n    chartText: 'c3-chart-text',\n    chartTexts: 'c3-chart-texts',\n    chartArc: 'c3-chart-arc',\n    chartArcs: 'c3-chart-arcs',\n    chartArcsTitle: 'c3-chart-arcs-title',\n    chartArcsBackground: 'c3-chart-arcs-background',\n    chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n    chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n    chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n    selectedCircle: 'c3-selected-circle',\n    selectedCircles: 'c3-selected-circles',\n    eventRect: 'c3-event-rect',\n    eventRects: 'c3-event-rects',\n    eventRectsSingle: 'c3-event-rects-single',\n    eventRectsMultiple: 'c3-event-rects-multiple',\n    zoomRect: 'c3-zoom-rect',\n    brush: 'c3-brush',\n    dragZoom: 'c3-drag-zoom',\n    focused: 'c3-focused',\n    defocused: 'c3-defocused',\n    region: 'c3-region',\n    regions: 'c3-regions',\n    title: 'c3-title',\n    tooltipContainer: 'c3-tooltip-container',\n    tooltip: 'c3-tooltip',\n    tooltipName: 'c3-tooltip-name',\n    shape: 'c3-shape',\n    shapes: 'c3-shapes',\n    line: 'c3-line',\n    lines: 'c3-lines',\n    bar: 'c3-bar',\n    bars: 'c3-bars',\n    circle: 'c3-circle',\n    circles: 'c3-circles',\n    arc: 'c3-arc',\n    arcLabelLine: 'c3-arc-label-line',\n    arcs: 'c3-arcs',\n    area: 'c3-area',\n    areas: 'c3-areas',\n    empty: 'c3-empty',\n    text: 'c3-text',\n    texts: 'c3-texts',\n    gaugeValue: 'c3-gauge-value',\n    grid: 'c3-grid',\n    gridLines: 'c3-grid-lines',\n    xgrid: 'c3-xgrid',\n    xgrids: 'c3-xgrids',\n    xgridLine: 'c3-xgrid-line',\n    xgridLines: 'c3-xgrid-lines',\n    xgridFocus: 'c3-xgrid-focus',\n    ygrid: 'c3-ygrid',\n    ygrids: 'c3-ygrids',\n    ygridLine: 'c3-ygrid-line',\n    ygridLines: 'c3-ygrid-lines',\n    colorScale: 'c3-colorscale',\n    stanfordElements: 'c3-stanford-elements',\n    stanfordLine: 'c3-stanford-line',\n    stanfordLines: 'c3-stanford-lines',\n    stanfordRegion: 'c3-stanford-region',\n    stanfordRegions: 'c3-stanford-regions',\n    stanfordText: 'c3-stanford-text',\n    stanfordTexts: 'c3-stanford-texts',\n    axis: 'c3-axis',\n    axisX: 'c3-axis-x',\n    axisXLabel: 'c3-axis-x-label',\n    axisY: 'c3-axis-y',\n    axisYLabel: 'c3-axis-y-label',\n    axisY2: 'c3-axis-y2',\n    axisY2Label: 'c3-axis-y2-label',\n    legendBackground: 'c3-legend-background',\n    legendItem: 'c3-legend-item',\n    legendItemEvent: 'c3-legend-item-event',\n    legendItemTile: 'c3-legend-item-tile',\n    legendItemHidden: 'c3-legend-item-hidden',\n    legendItemFocused: 'c3-legend-item-focused',\n    dragarea: 'c3-dragarea',\n    EXPANDED: '_expanded_',\n    SELECTED: '_selected_',\n    INCLUDED: '_included_'\n  };\n\n  var AxisClass =\n  /** @class */\n  function () {\n    function AxisClass(owner) {\n      this.owner = owner;\n      this.d3 = owner.d3;\n      this.internal = AxisInternal;\n    }\n\n    return AxisClass;\n  }();\n\n  var Axis = AxisClass;\n\n  Axis.prototype.init = function init() {\n    var $$ = this.owner,\n        config = $$.config,\n        main = $$.main;\n    $$.axes.x = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisX).attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis).attr('transform', $$.getTranslate('x')).style('visibility', config.axis_x_show ? 'visible' : 'hidden');\n    $$.axes.x.append('text').attr('class', CLASS.axisXLabel).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\n    $$.axes.y = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY).attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis).attr('transform', $$.getTranslate('y')).style('visibility', config.axis_y_show ? 'visible' : 'hidden');\n    $$.axes.y.append('text').attr('class', CLASS.axisYLabel).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\n    $$.axes.y2 = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY2) // clip-path?\n    .attr('transform', $$.getTranslate('y2')).style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\n    $$.axes.y2.append('text').attr('class', CLASS.axisY2Label).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n        config = $$.config,\n        axisParams = {\n      isCategory: $$.isCategorized(),\n      withOuterTick: withOuterTick,\n      tickMultiline: config.axis_x_tick_multiline,\n      tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n      tickWidth: config.axis_x_tick_width,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n      withoutTransition: withoutTransition\n    },\n        axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n\n    if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\n      tickValues = tickValues.map(function (v) {\n        return $$.parseDate(v);\n      });\n    } // Set tick\n\n\n    axis.tickFormat(tickFormat).tickValues(tickValues);\n\n    if ($$.isCategorized()) {\n      axis.tickCentered(config.axis_x_tick_centered);\n\n      if (isEmpty(config.axis_x_tick_culling)) {\n        config.axis_x_tick_culling = false;\n      }\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n    var $$ = this.owner,\n        config = $$.config,\n        tickValues;\n\n    if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n      tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n    }\n\n    if (axis) {\n      axis.tickValues(tickValues);\n    } else {\n      $$.xAxis.tickValues(tickValues);\n      $$.subXAxis.tickValues(tickValues);\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner;\n    var config = $$.config;\n    var tickFormat = config[\"axis_\" + axisId + \"_tick_format\"];\n\n    if (!tickFormat && $$.isAxisNormalized(axisId)) {\n      tickFormat = function tickFormat(x) {\n        return x + \"%\";\n      };\n    }\n\n    var axis = new this.internal(this, {\n      withOuterTick: withOuterTick,\n      withoutTransition: withoutTransition,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n    }).axis.scale(scale).orient(orient);\n\n    if (tickFormat) {\n      axis.tickFormat(tickFormat);\n    }\n\n    if ($$.isTimeSeriesY()) {\n      axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\n    } else {\n      axis.tickValues(tickValues);\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.getId = function getId(id) {\n    var config = this.owner.config;\n    return id in config.data_axes ? config.data_axes[id] : 'y';\n  };\n\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\n    // #2251 previously set any negative values to a whole number,\n    // however both should be truncated according to the users format specification\n    var $$ = this.owner,\n        config = $$.config;\n    var format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n      return v;\n    };\n\n    if (config.axis_x_tick_format) {\n      if (isFunction(config.axis_x_tick_format)) {\n        format = config.axis_x_tick_format;\n      } else if ($$.isTimeSeries()) {\n        format = function format(date) {\n          return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\n        };\n      }\n    }\n\n    return isFunction(format) ? function (v) {\n      return format.call($$, v);\n    } : format;\n  };\n\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\n    return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n  };\n\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n  };\n\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n  };\n\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n  };\n\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n    var $$ = this.owner,\n        config = $$.config,\n        option;\n\n    if (axisId === 'y') {\n      option = config.axis_y_label;\n    } else if (axisId === 'y2') {\n      option = config.axis_y2_label;\n    } else if (axisId === 'x') {\n      option = config.axis_x_label;\n    }\n\n    return option;\n  };\n\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\n    var option = this.getLabelOptionByAxisId(axisId);\n    return isString(option) ? option : option ? option.text : null;\n  };\n\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\n    var $$ = this.owner,\n        config = $$.config,\n        option = this.getLabelOptionByAxisId(axisId);\n\n    if (isString(option)) {\n      if (axisId === 'y') {\n        config.axis_y_label = text;\n      } else if (axisId === 'y2') {\n        config.axis_y2_label = text;\n      } else if (axisId === 'x') {\n        config.axis_x_label = text;\n      }\n    } else if (option) {\n      option.text = text;\n    }\n  };\n\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n    var option = this.getLabelOptionByAxisId(axisId),\n        position = option && typeof option === 'object' && option.position ? option.position : defaultPosition;\n    return {\n      isInner: position.indexOf('inner') >= 0,\n      isOuter: position.indexOf('outer') >= 0,\n      isLeft: position.indexOf('left') >= 0,\n      isCenter: position.indexOf('center') >= 0,\n      isRight: position.indexOf('right') >= 0,\n      isTop: position.indexOf('top') >= 0,\n      isMiddle: position.indexOf('middle') >= 0,\n      isBottom: position.indexOf('bottom') >= 0\n    };\n  };\n\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\n    return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n  };\n\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\n    return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n    return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\n    return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n  };\n\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\n    return this.getLabelText('x');\n  };\n\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\n    return this.getLabelText('y');\n  };\n\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\n    return this.getLabelText('y2');\n  };\n\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n    var $$ = this.owner;\n\n    if (forHorizontal) {\n      return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n    } else {\n      return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n    }\n  };\n\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\n    } else {\n      return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\n    }\n  };\n\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n    } else {\n      return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n    }\n  };\n\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\n    return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\n    return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\n    var $$ = this.owner,\n        config = $$.config,\n        position = this.getXAxisLabelPosition();\n\n    if (config.axis_rotated) {\n      return position.isInner ? '1.2em' : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n    } else {\n      return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\n    }\n  };\n\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\n    var $$ = this.owner,\n        position = this.getYAxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '-0.5em' : '3em';\n    } else {\n      return position.isInner ? '1.2em' : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n    }\n  };\n\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\n    var $$ = this.owner,\n        position = this.getY2AxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '1.2em' : '-2.2em';\n    } else {\n      return position.isInner ? '-0.5em' : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n    }\n  };\n\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n    var $$ = this.owner,\n        maxWidth = 0,\n        targetsToShow,\n        scale,\n        axis,\n        dummy,\n        svg;\n\n    if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n      return $$.currentMaxTickWidths[id];\n    }\n\n    if ($$.svg) {\n      targetsToShow = $$.filterTargetsToShow($$.data.targets);\n\n      if (id === 'y') {\n        scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n        axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\n      } else if (id === 'y2') {\n        scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n        axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\n      } else {\n        scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n        axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n        this.updateXAxisTickValues(targetsToShow, axis);\n      }\n\n      dummy = $$.d3.select('body').append('div').classed('c3', true);\n      svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n        $$.d3.select(this).selectAll('text').each(function () {\n          var box = getBBox(this);\n\n          if (maxWidth < box.width) {\n            maxWidth = box.width;\n          }\n        });\n        dummy.remove();\n      });\n    }\n\n    $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n    return $$.currentMaxTickWidths[id];\n  };\n\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\n    var $$ = this.owner;\n    var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n        axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n        axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n    (withTransition ? axisXLabel.transition() : axisXLabel).attr('x', this.xForXAxisLabel.bind(this)).attr('dx', this.dxForXAxisLabel.bind(this)).attr('dy', this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n    (withTransition ? axisYLabel.transition() : axisYLabel).attr('x', this.xForYAxisLabel.bind(this)).attr('dx', this.dxForYAxisLabel.bind(this)).attr('dy', this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n    (withTransition ? axisY2Label.transition() : axisY2Label).attr('x', this.xForY2AxisLabel.bind(this)).attr('dx', this.dxForY2AxisLabel.bind(this)).attr('dy', this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n    var p = typeof padding === 'number' ? padding : padding[key];\n\n    if (!isValue(p)) {\n      return defaultValue;\n    }\n\n    if (padding.unit === 'ratio') {\n      return padding[key] * domainLength;\n    } // assume padding is pixels if unit is not specified\n\n\n    return this.convertPixelsToAxisPadding(p, domainLength);\n  };\n\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n    var $$ = this.owner,\n        length = $$.config.axis_rotated ? $$.width : $$.height;\n    return domainLength * (pixels / length);\n  };\n\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n    var tickValues = values,\n        targetCount,\n        start,\n        end,\n        count,\n        interval,\n        i,\n        tickValue;\n\n    if (tickCount) {\n      targetCount = isFunction(tickCount) ? tickCount() : tickCount; // compute ticks according to tickCount\n\n      if (targetCount === 1) {\n        tickValues = [values[0]];\n      } else if (targetCount === 2) {\n        tickValues = [values[0], values[values.length - 1]];\n      } else if (targetCount > 2) {\n        count = targetCount - 2;\n        start = values[0];\n        end = values[values.length - 1];\n        interval = (end - start) / (count + 1); // re-construct unique values\n\n        tickValues = [start];\n\n        for (i = 0; i < count; i++) {\n          tickValue = +start + interval * (i + 1);\n          tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n        }\n\n        tickValues.push(end);\n      }\n    }\n\n    if (!forTimeSeries) {\n      tickValues = tickValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\n    var $$ = this.owner,\n        axes = $$.axes;\n    return {\n      axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n      axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n      axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n      axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n    };\n  };\n\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\n    var $$ = this.owner,\n        transition = duration ? $$.d3.transition().duration(duration) : null;\n    $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\n    $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\n    $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\n    $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\n  };\n\n  var c3 = {\n    version: '0.7.20',\n    chart: {\n      fn: Chart.prototype,\n      internal: {\n        fn: ChartInternal.prototype,\n        axis: {\n          fn: AxisClass.prototype,\n          internal: {\n            fn: AxisInternal.prototype\n          }\n        }\n      }\n    },\n    generate: function generate(config) {\n      return new Chart(config);\n    }\n  };\n\n  ChartInternal.prototype.beforeInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.afterInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.init = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.initParams();\n\n    if (config.data_url) {\n      $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n    } else if (config.data_json) {\n      $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n    } else if (config.data_rows) {\n      $$.initWithData($$.convertRowsToData(config.data_rows));\n    } else if (config.data_columns) {\n      $$.initWithData($$.convertColumnsToData(config.data_columns));\n    } else {\n      throw Error('url or json or rows or columns is required.');\n    }\n  };\n\n  ChartInternal.prototype.initParams = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config; // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n\n    $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\n    $$.clipIdForXAxis = $$.clipId + '-xaxis';\n    $$.clipIdForYAxis = $$.clipId + '-yaxis';\n    $$.clipIdForGrid = $$.clipId + '-grid';\n    $$.clipIdForSubchart = $$.clipId + '-subchart';\n    $$.clipPath = $$.getClipPath($$.clipId);\n    $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\n    $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n    $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\n    $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\n    $$.dragStart = null;\n    $$.dragging = false;\n    $$.flowing = false;\n    $$.cancelClick = false;\n    $$.mouseover = undefined;\n    $$.transiting = false;\n    $$.color = $$.generateColor();\n    $$.levelColor = $$.generateLevelColor();\n    $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\n    $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\n\n    $$.defaultAxisTimeFormat = function (date) {\n      if (date.getMilliseconds()) {\n        return d3.timeFormat('.%L')(date);\n      }\n\n      if (date.getSeconds()) {\n        return d3.timeFormat(':%S')(date);\n      }\n\n      if (date.getMinutes()) {\n        return d3.timeFormat('%I:%M')(date);\n      }\n\n      if (date.getHours()) {\n        return d3.timeFormat('%I %p')(date);\n      }\n\n      if (date.getDay() && date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getMonth()) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      return d3.timeFormat('%Y/%-m/%-d')(date);\n    };\n\n    $$.hiddenTargetIds = [];\n    $$.hiddenLegendIds = [];\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n    $$.xOrient = config.axis_rotated ? config.axis_x_inner ? 'right' : 'left' : config.axis_x_inner ? 'top' : 'bottom';\n    $$.yOrient = config.axis_rotated ? config.axis_y_inner ? 'top' : 'bottom' : config.axis_y_inner ? 'right' : 'left';\n    $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? 'bottom' : 'top' : config.axis_y2_inner ? 'left' : 'right';\n    $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\n    $$.isLegendRight = config.legend_position === 'right';\n    $$.isLegendInset = config.legend_position === 'inset';\n    $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n    $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n    $$.legendStep = 0;\n    $$.legendItemWidth = 0;\n    $$.legendItemHeight = 0;\n    $$.currentMaxTickWidths = {\n      x: 0,\n      y: 0,\n      y2: 0\n    };\n    $$.rotated_padding_left = 30;\n    $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n    $$.rotated_padding_top = 5;\n    $$.withoutFadeIn = {};\n    $$.intervalForObserveInserted = undefined;\n    $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n  };\n\n  ChartInternal.prototype.initChartElements = function () {\n    if (this.initBar) {\n      this.initBar();\n    }\n\n    if (this.initLine) {\n      this.initLine();\n    }\n\n    if (this.initArc) {\n      this.initArc();\n    }\n\n    if (this.initGauge) {\n      this.initGauge();\n    }\n\n    if (this.initText) {\n      this.initText();\n    }\n  };\n\n  ChartInternal.prototype.initWithData = function (data) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n    var defs,\n        main,\n        binding = true;\n    $$.axis = new AxisClass($$);\n\n    if (!config.bindto) {\n      $$.selectChart = d3.selectAll([]);\n    } else if (typeof config.bindto.node === 'function') {\n      $$.selectChart = config.bindto;\n    } else {\n      $$.selectChart = d3.select(config.bindto);\n    }\n\n    if ($$.selectChart.empty()) {\n      $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n      $$.observeInserted($$.selectChart);\n      binding = false;\n    }\n\n    $$.selectChart.html('').classed('c3', true); // Init data as targets\n\n    $$.data.xs = {};\n    $$.data.targets = $$.convertDataToTargets(data);\n\n    if (config.data_filter) {\n      $$.data.targets = $$.data.targets.filter(config.data_filter);\n    } // Set targets to hide if needed\n\n\n    if (config.data_hide) {\n      $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n    }\n\n    if (config.legend_hide) {\n      $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.initStanfordData();\n    } // Init sizes and scales\n\n\n    $$.updateSizes();\n    $$.updateScales(); // Set domains for each scale\n\n    $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n    $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n    $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n    $$.subX.domain($$.x.domain());\n    $$.subY.domain($$.y.domain());\n    $$.subY2.domain($$.y2.domain()); // Save original x domain for zoom update\n\n    $$.orgXDomain = $$.x.domain();\n    /*-- Basic Elements --*/\n    // Define svgs\n\n    $$.svg = $$.selectChart.append('svg').style('overflow', 'hidden').on('mouseenter', function () {\n      return config.onmouseover.call($$);\n    }).on('mouseleave', function () {\n      return config.onmouseout.call($$);\n    });\n\n    if ($$.config.svg_classname) {\n      $$.svg.attr('class', $$.config.svg_classname);\n    } // Define defs\n\n\n    defs = $$.svg.append('defs');\n    $$.clipChart = $$.appendClip(defs, $$.clipId);\n    $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n    $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n    $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n    $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n    $$.updateSvgSize(); // Define regions\n\n    main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\n\n    if ($$.initPie) {\n      $$.initPie();\n    }\n\n    if ($$.initDragZoom) {\n      $$.initDragZoom();\n    }\n\n    if (config.subchart_show && $$.initSubchart) {\n      $$.initSubchart();\n    }\n\n    if ($$.initTooltip) {\n      $$.initTooltip();\n    }\n\n    if ($$.initLegend) {\n      $$.initLegend();\n    }\n\n    if ($$.initTitle) {\n      $$.initTitle();\n    }\n\n    if ($$.initZoom) {\n      $$.initZoom();\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // Update selection based on size and scale\n    // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\n\n\n    if (config.subchart_show && $$.initSubchartBrush) {\n      $$.initSubchartBrush();\n    }\n    /*-- Main Region --*/\n    // text when empty\n\n\n    main.append('text').attr('class', CLASS.text + ' ' + CLASS.empty).attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\n    .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\n    // Regions\n\n    $$.initRegion(); // Grids\n\n    $$.initGrid(); // Define g for chart area\n\n    main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.chart); // Grid lines\n\n    if (config.grid_lines_front) {\n      $$.initGridLines();\n    }\n\n    $$.initStanfordElements(); // Cover whole with rects for events\n\n    $$.initEventRect(); // Define g for chart\n\n    $$.initChartElements(); // Add Axis\n\n    $$.axis.init(); // Set targets\n\n    $$.updateTargets($$.data.targets); // Set default extent if defined\n\n    if (config.axis_x_selection) {\n      $$.brush.selectionAsValue($$.getDefaultSelection());\n    } // Draw with targets\n\n\n    if (binding) {\n      $$.updateDimension();\n      $$.config.oninit.call($$);\n      $$.redraw({\n        withTransition: false,\n        withTransform: true,\n        withUpdateXDomain: true,\n        withUpdateOrgXDomain: true,\n        withTransitionForAxis: false\n      });\n    } // Bind to resize event\n\n\n    $$.bindResize(); // Bind to window focus event\n\n    $$.bindWindowFocus(); // export element of the chart\n\n    $$.api.element = $$.selectChart.node();\n  };\n\n  ChartInternal.prototype.smoothLines = function (el, type) {\n    var $$ = this;\n\n    if (type === 'grid') {\n      el.each(function () {\n        var g = $$.d3.select(this),\n            x1 = g.attr('x1'),\n            x2 = g.attr('x2'),\n            y1 = g.attr('y1'),\n            y2 = g.attr('y2');\n        g.attr({\n          x1: Math.ceil(x1),\n          x2: Math.ceil(x2),\n          y1: Math.ceil(y1),\n          y2: Math.ceil(y2)\n        });\n      });\n    }\n  };\n\n  ChartInternal.prototype.updateSizes = function () {\n    var $$ = this,\n        config = $$.config;\n    var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n        legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n        legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n        hasArc = $$.hasArcType(),\n        xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n        subchartXAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x', true),\n        subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + subchartXAxisHeight : 0;\n    $$.currentWidth = $$.getCurrentWidth();\n    $$.currentHeight = $$.getCurrentHeight(); // for main\n\n    $$.margin = config.axis_rotated ? {\n      top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n    } : {\n      top: 4 + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n    }; // for subchart\n\n    $$.margin2 = config.axis_rotated ? {\n      top: $$.margin.top,\n      right: NaN,\n      bottom: 20 + legendHeightForBottom,\n      left: $$.rotated_padding_left\n    } : {\n      top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n      right: NaN,\n      bottom: subchartXAxisHeight + legendHeightForBottom,\n      left: $$.margin.left\n    }; // for legend\n\n    $$.margin3 = {\n      top: 0,\n      right: NaN,\n      bottom: 0,\n      left: 0\n    };\n\n    if ($$.updateSizeForLegend) {\n      $$.updateSizeForLegend(legendHeight, legendWidth);\n    }\n\n    $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n    $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n\n    if ($$.width < 0) {\n      $$.width = 0;\n    }\n\n    if ($$.height < 0) {\n      $$.height = 0;\n    }\n\n    $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n    $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n\n    if ($$.width2 < 0) {\n      $$.width2 = 0;\n    }\n\n    if ($$.height2 < 0) {\n      $$.height2 = 0;\n    } // for arc\n\n\n    $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n    $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n\n    if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n      $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n    }\n\n    if ($$.updateRadius) {\n      $$.updateRadius();\n    }\n\n    if ($$.isLegendRight && hasArc) {\n      $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n    }\n  };\n\n  ChartInternal.prototype.updateTargets = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    /*-- Main --*/\n    //-- Text --//\n\n    $$.updateTargetsForText(targets); //-- Bar --//\n\n    $$.updateTargetsForBar(targets); //-- Line --//\n\n    $$.updateTargetsForLine(targets); //-- Arc --//\n\n    if ($$.hasArcType() && $$.updateTargetsForArc) {\n      $$.updateTargetsForArc(targets);\n    }\n    /*-- Sub --*/\n\n\n    if (config.subchart_show && $$.updateTargetsForSubchart) {\n      $$.updateTargetsForSubchart(targets);\n    } // Fade-in each chart\n\n\n    $$.showTargets();\n  };\n\n  ChartInternal.prototype.showTargets = function () {\n    var $$ = this;\n    $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n      return $$.isTargetToShow(d.id);\n    }).transition().duration($$.config.transition_duration).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.redraw = function (options, transitions) {\n    var $$ = this,\n        main = $$.main,\n        d3 = $$.d3,\n        config = $$.config;\n    var areaIndices = $$.getShapeIndices($$.isAreaType),\n        barIndices = $$.getShapeIndices($$.isBarType),\n        lineIndices = $$.getShapeIndices($$.isLineType);\n    var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n    var hideAxis = $$.hasArcType();\n    var drawArea, drawBar, drawLine, xForText, yForText;\n    var duration, durationForExit, durationForAxis;\n    var transitionsToWait, waitForDraw, flow, transition;\n    var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n        tickValues,\n        i,\n        intervalForCulling,\n        xDomainForZoom;\n    var xv = $$.xv.bind($$),\n        cx,\n        cy;\n    options = options || {};\n    withY = getOption(options, 'withY', true);\n    withSubchart = getOption(options, 'withSubchart', true);\n    withTransition = getOption(options, 'withTransition', true);\n    withTransform = getOption(options, 'withTransform', false);\n    withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\n    withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\n    withTrimXDomain = getOption(options, 'withTrimXDomain', true);\n    withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\n    withLegend = getOption(options, 'withLegend', false);\n    withEventRect = getOption(options, 'withEventRect', true);\n    withDimension = getOption(options, 'withDimension', true);\n    withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\n    withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\n    duration = withTransition ? config.transition_duration : 0;\n    durationForExit = withTransitionForExit ? duration : 0;\n    durationForAxis = withTransitionForAxis ? duration : 0;\n    transitions = transitions || $$.axis.generateTransitions(durationForAxis); // update legend and transform each g\n\n    if (withLegend && config.legend_show) {\n      $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n    } else if (withDimension) {\n      // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n      // no need to update axis in it because they will be updated in redraw()\n      $$.updateDimension(true);\n    } // MEMO: needed for grids calculation\n\n\n    if ($$.isCategorized() && targetsToShow.length === 0) {\n      $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n    }\n\n    if (targetsToShow.length) {\n      $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n\n      if (!config.axis_x_tick_values) {\n        tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n      }\n    } else {\n      $$.xAxis.tickValues([]);\n      $$.subXAxis.tickValues([]);\n    }\n\n    if (config.zoom_rescale && !options.flow) {\n      xDomainForZoom = $$.x.orgDomain();\n    }\n\n    $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n    $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n\n    if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n      $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n    }\n\n    if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n      $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n    } // axes\n\n\n    $$.axis.redraw(durationForAxis, hideAxis); // Update axis label\n\n    $$.axis.updateLabels(withTransition); // show/hide if manual culling needed\n\n    if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n      if (config.axis_x_tick_culling && tickValues) {\n        for (i = 1; i < tickValues.length; i++) {\n          if (tickValues.length / i < config.axis_x_tick_culling_max) {\n            intervalForCulling = i;\n            break;\n          }\n        }\n\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n          var index = tickValues.indexOf(e);\n\n          if (index >= 0) {\n            d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n          }\n        });\n      } else {\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n      }\n    } // setup drawer - MEMO: these must be called after axis updated\n\n\n    drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n    drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n    drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n    xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n    yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false); // update circleY based on updated parameters\n\n    $$.updateCircleY(); // generate circle x/y functions depending on updated params\n\n    cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n    cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$); // Update sub domain\n\n    if (withY) {\n      $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n      $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n    } // xgrid focus\n\n\n    $$.updateXgridFocus(); // Data empty label positioning and text.\n\n    main.select('text.' + CLASS.text + '.' + CLASS.empty).attr('x', $$.width / 2).attr('y', $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1); // event rect\n\n    if (withEventRect) {\n      $$.redrawEventRect();\n    } // grid\n\n\n    $$.updateGrid(duration);\n    $$.updateStanfordElements(duration); // rect for regions\n\n    $$.updateRegion(duration); // bars\n\n    $$.updateBar(durationForExit); // lines, areas and circles\n\n    $$.updateLine(durationForExit);\n    $$.updateArea(durationForExit);\n    $$.updateCircle(cx, cy); // text\n\n    if ($$.hasDataLabel()) {\n      $$.updateText(xForText, yForText, durationForExit);\n    } // title\n\n\n    if ($$.redrawTitle) {\n      $$.redrawTitle();\n    } // arc\n\n\n    if ($$.redrawArc) {\n      $$.redrawArc(duration, durationForExit, withTransform);\n    } // subchart\n\n\n    if (config.subchart_show && $$.redrawSubchart) {\n      $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // circles for select\n\n\n    main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove();\n\n    if (options.flow) {\n      flow = $$.generateFlow({\n        targets: targetsToShow,\n        flow: options.flow,\n        duration: options.flow.duration,\n        drawBar: drawBar,\n        drawLine: drawLine,\n        drawArea: drawArea,\n        cx: cx,\n        cy: cy,\n        xv: xv,\n        xForText: xForText,\n        yForText: yForText\n      });\n    }\n\n    if (duration && $$.isTabVisible()) {\n      // Only use transition if tab visible. See #938.\n      // transition should be derived from one transition\n      transition = d3.transition().duration(duration);\n      transitionsToWait = [];\n      [$$.redrawBar(drawBar, true, transition), $$.redrawLine(drawLine, true, transition), $$.redrawArea(drawArea, true, transition), $$.redrawCircle(cx, cy, true, transition), $$.redrawText(xForText, yForText, options.flow, true, transition), $$.redrawRegion(true, transition), $$.redrawGrid(true, transition)].forEach(function (transitions) {\n        transitions.forEach(function (transition) {\n          transitionsToWait.push(transition);\n        });\n      }); // Wait for end of transitions to call flow and onrendered callback\n\n      waitForDraw = $$.generateWait();\n      transitionsToWait.forEach(function (t) {\n        waitForDraw.add(t);\n      });\n      waitForDraw(function () {\n        if (flow) {\n          flow();\n        }\n\n        if (config.onrendered) {\n          config.onrendered.call($$);\n        }\n      });\n    } else {\n      $$.redrawBar(drawBar);\n      $$.redrawLine(drawLine);\n      $$.redrawArea(drawArea);\n      $$.redrawCircle(cx, cy);\n      $$.redrawText(xForText, yForText, options.flow);\n      $$.redrawRegion();\n      $$.redrawGrid();\n\n      if (flow) {\n        flow();\n      }\n\n      if (config.onrendered) {\n        config.onrendered.call($$);\n      }\n    } // update fadein condition\n\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = true;\n    });\n  };\n\n  ChartInternal.prototype.updateAndRedraw = function (options) {\n    var $$ = this,\n        config = $$.config,\n        transitions;\n    options = options || {}; // same with redraw\n\n    options.withTransition = getOption(options, 'withTransition', true);\n    options.withTransform = getOption(options, 'withTransform', false);\n    options.withLegend = getOption(options, 'withLegend', false); // NOT same with redraw\n\n    options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\n    options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\n    options.withTransitionForExit = false;\n    options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition); // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n\n    $$.updateSizes(); // MEMO: called in updateLegend in redraw if withLegend\n\n    if (!(options.withLegend && config.legend_show)) {\n      transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0); // Update scales\n\n      $$.updateScales();\n      $$.updateSvgSize(); // Update g positions\n\n      $$.transformAll(options.withTransitionForTransform, transitions);\n    } // Draw with new sizes & scales\n\n\n    $$.redraw(options, transitions);\n  };\n\n  ChartInternal.prototype.redrawWithoutRescale = function () {\n    this.redraw({\n      withY: false,\n      withSubchart: false,\n      withEventRect: false,\n      withTransitionForAxis: false\n    });\n  };\n\n  ChartInternal.prototype.isTimeSeries = function () {\n    return this.config.axis_x_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.isCategorized = function () {\n    return this.config.axis_x_type.indexOf('categor') >= 0;\n  };\n\n  ChartInternal.prototype.isCustomX = function () {\n    var $$ = this,\n        config = $$.config;\n    return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n  };\n\n  ChartInternal.prototype.isTimeSeriesY = function () {\n    return this.config.axis_y_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.getTranslate = function (target) {\n    var $$ = this,\n        config = $$.config,\n        x,\n        y;\n\n    if (target === 'main') {\n      x = asHalfPixel($$.margin.left);\n      y = asHalfPixel($$.margin.top);\n    } else if (target === 'context') {\n      x = asHalfPixel($$.margin2.left);\n      y = asHalfPixel($$.margin2.top);\n    } else if (target === 'legend') {\n      x = $$.margin3.left;\n      y = $$.margin3.top;\n    } else if (target === 'x') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height;\n    } else if (target === 'y') {\n      x = 0;\n      y = config.axis_rotated ? $$.height : 0;\n    } else if (target === 'y2') {\n      x = config.axis_rotated ? 0 : $$.width;\n      y = config.axis_rotated ? 1 : 0;\n    } else if (target === 'subx') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height2;\n    } else if (target === 'arc') {\n      x = $$.arcWidth / 2;\n      y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n    }\n\n    return 'translate(' + x + ',' + y + ')';\n  };\n\n  ChartInternal.prototype.initialOpacity = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n  };\n\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n  };\n\n  ChartInternal.prototype.opacityForCircle = function (d) {\n    var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n    var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\n    return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n  };\n\n  ChartInternal.prototype.opacityForText = function () {\n    return this.hasDataLabel() ? 1 : 0;\n  };\n\n  ChartInternal.prototype.xx = function (d) {\n    return d ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\n    var $$ = this,\n        value = xyValue ? d[xyValue] : d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y,\n        value = xyValue ? d[xyValue] : d.value;\n    return Math.ceil(yScale(value));\n  };\n\n  ChartInternal.prototype.xv = function (d) {\n    var $$ = this,\n        value = d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yv = function (d) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n    return Math.ceil(yScale(d.value));\n  };\n\n  ChartInternal.prototype.subxx = function (d) {\n    return d ? this.subX(d.x) : null;\n  };\n\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\n    var $$ = this,\n        xAxis,\n        yAxis,\n        y2Axis;\n\n    if (transitions && transitions.axisX) {\n      xAxis = transitions.axisX;\n    } else {\n      xAxis = $$.main.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        xAxis = xAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY) {\n      yAxis = transitions.axisY;\n    } else {\n      yAxis = $$.main.select('.' + CLASS.axisY);\n\n      if (withTransition) {\n        yAxis = yAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY2) {\n      y2Axis = transitions.axisY2;\n    } else {\n      y2Axis = $$.main.select('.' + CLASS.axisY2);\n\n      if (withTransition) {\n        y2Axis = y2Axis.transition();\n      }\n    }\n\n    (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\n    xAxis.attr('transform', $$.getTranslate('x'));\n    yAxis.attr('transform', $$.getTranslate('y'));\n    y2Axis.attr('transform', $$.getTranslate('y2'));\n    $$.main.select('.' + CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n  };\n\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\n    var $$ = this;\n    $$.transformMain(withTransition, transitions);\n\n    if ($$.config.subchart_show) {\n      $$.transformContext(withTransition, transitions);\n    }\n\n    if ($$.legend) {\n      $$.transformLegend(withTransition);\n    }\n  };\n\n  ChartInternal.prototype.updateSvgSize = function () {\n    var $$ = this,\n        brush = $$.svg.select(\".\" + CLASS.brush + \" .overlay\");\n    $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n    $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n    $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() && brush.attr('height') || 0); // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n\n    $$.selectChart.style('max-height', $$.currentHeight + 'px');\n  };\n\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\n    var $$ = this;\n\n    if (!withoutAxis) {\n      if ($$.config.axis_rotated) {\n        $$.axes.x.call($$.xAxis);\n        $$.axes.subx.call($$.subXAxis);\n      } else {\n        $$.axes.y.call($$.yAxis);\n        $$.axes.y2.call($$.y2Axis);\n      }\n    }\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    $$.transformAll(false);\n  };\n\n  ChartInternal.prototype.observeInserted = function (selection) {\n    var $$ = this,\n        observer;\n\n    if (typeof MutationObserver === 'undefined') {\n      window.console.error('MutationObserver not defined.');\n      return;\n    }\n\n    observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'childList' && mutation.previousSibling) {\n          observer.disconnect(); // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n\n          $$.intervalForObserveInserted = window.setInterval(function () {\n            // parentNode will NOT be null when completed\n            if (selection.node().parentNode) {\n              window.clearInterval($$.intervalForObserveInserted);\n              $$.updateDimension();\n\n              if ($$.brush) {\n                $$.brush.update();\n              }\n\n              $$.config.oninit.call($$);\n              $$.redraw({\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransition: false,\n                withTransitionForTransform: false,\n                withLegend: true\n              });\n              selection.transition().style('opacity', 1);\n            }\n          }, 10);\n        }\n      });\n    });\n    observer.observe(selection.node(), {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  };\n  /**\r\n   * Binds handlers to the window resize event.\r\n   */\n\n\n  ChartInternal.prototype.bindResize = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.resizeFunction = $$.generateResize(); // need to call .remove\n\n    $$.resizeFunction.add(function () {\n      config.onresize.call($$);\n    });\n\n    if (config.resize_auto) {\n      $$.resizeFunction.add(function () {\n        if ($$.resizeTimeout !== undefined) {\n          window.clearTimeout($$.resizeTimeout);\n        }\n\n        $$.resizeTimeout = window.setTimeout(function () {\n          delete $$.resizeTimeout;\n          $$.updateAndRedraw({\n            withUpdateXDomain: false,\n            withUpdateOrgXDomain: false,\n            withTransition: false,\n            withTransitionForTransform: false,\n            withLegend: true\n          });\n\n          if ($$.brush) {\n            $$.brush.update();\n          }\n        }, 100);\n      });\n    }\n\n    $$.resizeFunction.add(function () {\n      config.onresized.call($$);\n    });\n\n    $$.resizeIfElementDisplayed = function () {\n      // if element not displayed skip it\n      if ($$.api == null || !$$.api.element.offsetParent) {\n        return;\n      }\n\n      $$.resizeFunction();\n    };\n\n    window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n  };\n  /**\r\n   * Binds handlers to the window focus event.\r\n   */\n\n\n  ChartInternal.prototype.bindWindowFocus = function () {\n    var _this = this;\n\n    if (this.windowFocusHandler) {\n      // The handler is already set\n      return;\n    }\n\n    this.windowFocusHandler = function () {\n      _this.redraw();\n    };\n\n    window.addEventListener('focus', this.windowFocusHandler);\n  };\n  /**\r\n   * Unbinds from the window focus event.\r\n   */\n\n\n  ChartInternal.prototype.unbindWindowFocus = function () {\n    window.removeEventListener('focus', this.windowFocusHandler);\n    delete this.windowFocusHandler;\n  };\n\n  ChartInternal.prototype.generateResize = function () {\n    var resizeFunctions = [];\n\n    function callResizeFunctions() {\n      resizeFunctions.forEach(function (f) {\n        f();\n      });\n    }\n\n    callResizeFunctions.add = function (f) {\n      resizeFunctions.push(f);\n    };\n\n    callResizeFunctions.remove = function (f) {\n      for (var i = 0; i < resizeFunctions.length; i++) {\n        if (resizeFunctions[i] === f) {\n          resizeFunctions.splice(i, 1);\n          break;\n        }\n      }\n    };\n\n    return callResizeFunctions;\n  };\n\n  ChartInternal.prototype.endall = function (transition, callback) {\n    var n = 0;\n    transition.each(function () {\n      ++n;\n    }).on('end', function () {\n      if (! --n) {\n        callback.apply(this, arguments);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateWait = function () {\n    var $$ = this;\n\n    var transitionsToWait = [],\n        f = function f(callback) {\n      var timer = setInterval(function () {\n        if (!$$.isTabVisible()) {\n          return;\n        }\n\n        var done = 0;\n        transitionsToWait.forEach(function (t) {\n          if (t.empty()) {\n            done += 1;\n            return;\n          }\n\n          try {\n            t.transition();\n          } catch (e) {\n            done += 1;\n          }\n        });\n\n        if (done === transitionsToWait.length) {\n          clearInterval(timer);\n\n          if (callback) {\n            callback();\n          }\n        }\n      }, 50);\n    };\n\n    f.add = function (transition) {\n      transitionsToWait.push(transition);\n    };\n\n    return f;\n  };\n\n  ChartInternal.prototype.parseDate = function (date) {\n    var $$ = this,\n        parsedDate;\n\n    if (date instanceof Date) {\n      parsedDate = date;\n    } else if (typeof date === 'string') {\n      parsedDate = $$.dataTimeParse(date);\n    } else if (typeof date === 'object') {\n      parsedDate = new Date(+date);\n    } else if (typeof date === 'number' && !isNaN(date)) {\n      parsedDate = new Date(+date);\n    }\n\n    if (!parsedDate || isNaN(+parsedDate)) {\n      window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n    }\n\n    return parsedDate;\n  };\n\n  ChartInternal.prototype.isTabVisible = function () {\n    return !document.hidden;\n  };\n\n  ChartInternal.prototype.getPathBox = getPathBox;\n  ChartInternal.prototype.CLASS = CLASS;\n  /* jshint ignore:start */\n\n  (function () {\n    if (!('SVGPathSeg' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n      window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n        this.pathSegType = type;\n        this.pathSegTypeAsLetter = typeAsLetter;\n        this._owningPathSegList = owningPathSegList;\n      };\n\n      window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\n      window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n      window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n      window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n      window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n      window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n      window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n      window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n      window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19; // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n\n      window.SVGPathSeg.prototype._segmentChanged = function () {\n        if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n      };\n\n      window.SVGPathSegClosePath = function (owningPathSegList) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\n      };\n\n      window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegClosePath.prototype.toString = function () {\n        return '[object SVGPathSegClosePath]';\n      };\n\n      window.SVGPathSegClosePath.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter;\n      };\n\n      window.SVGPathSegClosePath.prototype.clone = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegMovetoAbs]';\n      };\n\n      window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoRel.prototype.toString = function () {\n        return '[object SVGPathSegMovetoRel]';\n      };\n\n      window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype.clone = function () {\n        return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoAbs]';\n      };\n\n      window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoRel]';\n      };\n\n      window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcAbs.prototype.toString = function () {\n        return '[object SVGPathSegArcAbs]';\n      };\n\n      window.SVGPathSegArcAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcAbs.prototype.clone = function () {\n        return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcRel.prototype.toString = function () {\n        return '[object SVGPathSegArcRel]';\n      };\n\n      window.SVGPathSegArcRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcRel.prototype.clone = function () {\n        return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalAbs]';\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalRel]';\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalAbs]';\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalRel]';\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      }); // Add createSVGPathSeg* functions to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n\n      window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n        return new window.SVGPathSegMovetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n        return new window.SVGPathSegMovetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n        return new window.SVGPathSegLinetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n        return new window.SVGPathSegLinetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n      };\n\n      if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\n        // Add getPathSegAtLength to SVGPathElement.\n        // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n        // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n        window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n          if (distance === undefined || !isFinite(distance)) throw 'Invalid arguments.';\n          var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          measurementElement.setAttribute('d', this.getAttribute('d'));\n          var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1; // If the path is empty, return 0.\n\n          if (lastPathSegment <= 0) return 0;\n\n          do {\n            measurementElement.pathSegList.removeItem(lastPathSegment);\n            if (distance > measurementElement.getTotalLength()) break;\n            lastPathSegment--;\n          } while (lastPathSegment > 0);\n\n          return lastPathSegment;\n        };\n      }\n    }\n\n    if (!('SVGPathSegList' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n      window.SVGPathSegList = function (pathElement) {\n        this._pathElement = pathElement;\n        this._list = this._parsePath(this._pathElement.getAttribute('d')); // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n\n        this._mutationObserverConfig = {\n          attributes: true,\n          attributeFilter: ['d']\n        };\n        this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n\n      window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\n      Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\n        get: function get() {\n          this._checkPathSynchronizedToList();\n\n          return this._list.length;\n        },\n        enumerable: true\n      }); // Add the pathSegList accessors to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\n        get: function get() {\n          if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n          return this._pathSegList;\n        },\n        enumerable: true\n      }); // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      }); // Process any pending mutations to the path element and update the list as needed.\n      // This should be the first call of all public functions and is needed because\n      // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n\n      window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n        this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n      };\n\n      window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n        if (!this._pathElement) return;\n        var hasPathMutations = false;\n        mutationRecords.forEach(function (record) {\n          if (record.attributeName == 'd') hasPathMutations = true;\n        });\n        if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute('d'));\n      }; // Serialize the list and update the path's 'd' attribute.\n\n\n      window.SVGPathSegList.prototype._writeListToPath = function () {\n        this._pathElementMutationObserver.disconnect();\n\n        this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      }; // When a path segment changes the list needs to be synchronized back to the path element.\n\n\n      window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.clear = function () {\n        this._checkPathSynchronizedToList();\n\n        this._list.forEach(function (pathSeg) {\n          pathSeg._owningPathSegList = null;\n        });\n\n        this._list = [];\n\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.initialize = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        this._list = [newItem];\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n        if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw 'INDEX_SIZE_ERR';\n      };\n\n      window.SVGPathSegList.prototype.getItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        return this._list[index];\n      };\n\n      window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n        this._checkPathSynchronizedToList(); // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n\n\n        if (index > this.numberOfItems) index = this.numberOfItems;\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.splice(index, 0, newItem);\n\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._checkValidIndex(index);\n\n        this._list[index] = newItem;\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.removeItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        var item = this._list[index];\n\n        this._list.splice(index, 1);\n\n        this._writeListToPath();\n\n        return item;\n      };\n\n      window.SVGPathSegList.prototype.appendItem = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.push(newItem);\n\n        newItem._owningPathSegList = this; // TODO: Optimize this to just append to the existing attribute.\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n        var string = '';\n        var first = true;\n        pathSegArray.forEach(function (pathSeg) {\n          if (first) {\n            first = false;\n            string += pathSeg._asPathString();\n          } else {\n            string += ' ' + pathSeg._asPathString();\n          }\n        });\n        return string;\n      }; // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n\n\n      window.SVGPathSegList.prototype._parsePath = function (string) {\n        if (!string || string.length == 0) return [];\n        var owningPathSegList = this;\n\n        var Builder = function Builder() {\n          this.pathSegList = [];\n        };\n\n        Builder.prototype.appendSegment = function (pathSeg) {\n          this.pathSegList.push(pathSeg);\n        };\n\n        var Source = function Source(string) {\n          this._string = string;\n          this._currentIndex = 0;\n          this._endIndex = this._string.length;\n          this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n\n          this._skipOptionalSpaces();\n        };\n\n        Source.prototype._isCurrentSpace = function () {\n          var character = this._string[this._currentIndex];\n          return character <= ' ' && (character == ' ' || character == '\\n' || character == '\\t' || character == '\\r' || character == '\\f');\n        };\n\n        Source.prototype._skipOptionalSpaces = function () {\n          while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {\n            this._currentIndex++;\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n          if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ',') return false;\n\n          if (this._skipOptionalSpaces()) {\n            if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ',') {\n              this._currentIndex++;\n\n              this._skipOptionalSpaces();\n            }\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.hasMoreData = function () {\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.peekSegmentType = function () {\n          var lookahead = this._string[this._currentIndex];\n          return this._pathSegTypeFromChar(lookahead);\n        };\n\n        Source.prototype._pathSegTypeFromChar = function (lookahead) {\n          switch (lookahead) {\n            case 'Z':\n            case 'z':\n              return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n\n            case 'M':\n              return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n\n            case 'm':\n              return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n\n            case 'L':\n              return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n\n            case 'l':\n              return window.SVGPathSeg.PATHSEG_LINETO_REL;\n\n            case 'C':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n\n            case 'c':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n\n            case 'Q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n\n            case 'q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n\n            case 'A':\n              return window.SVGPathSeg.PATHSEG_ARC_ABS;\n\n            case 'a':\n              return window.SVGPathSeg.PATHSEG_ARC_REL;\n\n            case 'H':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n\n            case 'h':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n\n            case 'V':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n\n            case 'v':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n\n            case 'S':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n\n            case 's':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n\n            case 'T':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n\n            case 't':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n\n            default:\n              return window.SVGPathSeg.PATHSEG_UNKNOWN;\n          }\n        };\n\n        Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n          // Check for remaining coordinates in the current command.\n          if ((lookahead == '+' || lookahead == '-' || lookahead == '.' || lookahead >= '0' && lookahead <= '9') && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            return previousCommand;\n          }\n\n          return window.SVGPathSeg.PATHSEG_UNKNOWN;\n        };\n\n        Source.prototype.initialCommandIsMoveTo = function () {\n          // If the path is empty it is still valid, so return true.\n          if (!this.hasMoreData()) return true;\n          var command = this.peekSegmentType(); // Path must start with moveTo.\n\n          return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n        }; // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n\n\n        Source.prototype._parseNumber = function () {\n          var exponent = 0;\n          var integer = 0;\n          var frac = 1;\n          var decimal = 0;\n          var sign = 1;\n          var expsign = 1;\n          var startIndex = this._currentIndex;\n\n          this._skipOptionalSpaces(); // Read the sign.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '+') this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '-') {\n            this._currentIndex++;\n            sign = -1;\n          }\n          if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') && this._string.charAt(this._currentIndex) != '.') // The first character of a number must be one of [0-9+-.].\n            return undefined; // Read the integer part, build right-to-left.\n\n          var startIntPartIndex = this._currentIndex;\n\n          while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n            this._currentIndex++;\n          } // Advance to first non-digit.\n\n\n          if (this._currentIndex != startIntPartIndex) {\n            var scanIntPartIndex = this._currentIndex - 1;\n            var multiplier = 1;\n\n            while (scanIntPartIndex >= startIntPartIndex) {\n              integer += multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\n              multiplier *= 10;\n            }\n          } // Read the decimals.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '.') {\n            this._currentIndex++; // There must be a least one digit following the .\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              frac *= 10;\n              decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\n              this._currentIndex += 1;\n            }\n          } // Read the exponent part.\n\n\n          if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == 'e' || this._string.charAt(this._currentIndex) == 'E') && this._string.charAt(this._currentIndex + 1) != 'x' && this._string.charAt(this._currentIndex + 1) != 'm') {\n            this._currentIndex++; // Read the sign of the exponent.\n\n            if (this._string.charAt(this._currentIndex) == '+') {\n              this._currentIndex++;\n            } else if (this._string.charAt(this._currentIndex) == '-') {\n              this._currentIndex++;\n              expsign = -1;\n            } // There must be an exponent.\n\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              exponent *= 10;\n              exponent += this._string.charAt(this._currentIndex) - '0';\n              this._currentIndex++;\n            }\n          }\n\n          var number = integer + decimal;\n          number *= sign;\n          if (exponent) number *= Math.pow(10, expsign * exponent);\n          if (startIndex == this._currentIndex) return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return number;\n        };\n\n        Source.prototype._parseArcFlag = function () {\n          if (this._currentIndex >= this._endIndex) return undefined;\n          var flag = false;\n\n          var flagChar = this._string.charAt(this._currentIndex++);\n\n          if (flagChar == '0') flag = false;else if (flagChar == '1') flag = true;else return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return flag;\n        };\n\n        Source.prototype.parseSegment = function () {\n          var lookahead = this._string[this._currentIndex];\n\n          var command = this._pathSegTypeFromChar(lookahead);\n\n          if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n            // Possibly an implicit command. Not allowed if this is the first command.\n            if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n            command = this._nextCommandHelper(lookahead, this._previousCommand);\n            if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n          } else {\n            this._currentIndex++;\n          }\n\n          this._previousCommand = command;\n\n          switch (command) {\n            case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n              return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n              return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_REL:\n              return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n              return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n              return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n              return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n              return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n              return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n              this._skipOptionalSpaces();\n\n              return new window.SVGPathSegClosePath(owningPathSegList);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_ARC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            case window.SVGPathSeg.PATHSEG_ARC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            default:\n              throw 'Unknown path seg type.';\n          }\n        };\n\n        var builder = new Builder();\n        var source = new Source(string);\n        if (!source.initialCommandIsMoveTo()) return [];\n\n        while (source.hasMoreData()) {\n          var pathSeg = source.parseSegment();\n          if (!pathSeg) return [];\n          builder.appendSegment(pathSeg);\n        }\n\n        return builder.pathSegList;\n      };\n    }\n  })(); // String.padEnd polyfill for IE11\n  //\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n\n\n  if (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength, padString) {\n      targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return String(this) + padString.slice(0, targetLength);\n      }\n    };\n  } // Object.assign polyfill for IE11\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\n  if (typeof Object.assign !== 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      value: function assign(target, varArgs) {\n        if (target === null || target === undefined) {\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource !== null && nextSource !== undefined) {\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n  /* jshint ignore:end */\n\n\n  Chart.prototype.axis = function () {};\n\n  Chart.prototype.axis.labels = function (labels) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      Object.keys(labels).forEach(function (axisId) {\n        $$.axis.setLabelText(axisId, labels[axisId]);\n      });\n      $$.axis.updateLabels();\n    } // TODO: return some values?\n\n  };\n\n  Chart.prototype.axis.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (typeof max === 'object') {\n        if (isValue(max.x)) {\n          config.axis_x_max = max.x;\n        }\n\n        if (isValue(max.y)) {\n          config.axis_y_max = max.y;\n        }\n\n        if (isValue(max.y2)) {\n          config.axis_y2_max = max.y2;\n        }\n      } else {\n        config.axis_y_max = config.axis_y2_max = max;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_max,\n        y: config.axis_y_max,\n        y2: config.axis_y2_max\n      };\n    }\n  };\n\n  Chart.prototype.axis.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (typeof min === 'object') {\n        if (isValue(min.x)) {\n          config.axis_x_min = min.x;\n        }\n\n        if (isValue(min.y)) {\n          config.axis_y_min = min.y;\n        }\n\n        if (isValue(min.y2)) {\n          config.axis_y2_min = min.y2;\n        }\n      } else {\n        config.axis_y_min = config.axis_y2_min = min;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_min,\n        y: config.axis_y_min,\n        y2: config.axis_y2_min\n      };\n    }\n  };\n\n  Chart.prototype.axis.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.axis.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.axis.min(range.min);\n      }\n    } else {\n      return {\n        max: this.axis.max(),\n        min: this.axis.min()\n      };\n    }\n  };\n\n  Chart.prototype.axis.types = function (types) {\n    var $$ = this.internal;\n\n    if (types === undefined) {\n      return {\n        y: $$.config.axis_y_type,\n        y2: $$.config.axis_y2_type\n      };\n    } else {\n      if (isDefined(types.y)) {\n        $$.config.axis_y_type = types.y;\n      }\n\n      if (isDefined(types.y2)) {\n        $$.config.axis_y2_type = types.y2;\n      }\n\n      $$.updateScales();\n      $$.redraw();\n    }\n  };\n\n  Chart.prototype.category = function (i, category) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length > 1) {\n      config.axis_x_categories[i] = category;\n      $$.redraw();\n    }\n\n    return config.axis_x_categories[i];\n  };\n\n  Chart.prototype.categories = function (categories) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!arguments.length) {\n      return config.axis_x_categories;\n    }\n\n    config.axis_x_categories = categories;\n    $$.redraw();\n    return config.axis_x_categories;\n  };\n\n  Chart.prototype.resize = function (size) {\n    var $$ = this.internal,\n        config = $$.config;\n    config.size_width = size ? size.width : null;\n    config.size_height = size ? size.height : null;\n    this.flush();\n  };\n\n  Chart.prototype.flush = function () {\n    var $$ = this.internal;\n    $$.updateAndRedraw({\n      withLegend: true,\n      withTransition: false,\n      withTransitionForTransform: false\n    });\n  };\n\n  Chart.prototype.destroy = function () {\n    var $$ = this.internal;\n    window.clearInterval($$.intervalForObserveInserted);\n\n    if ($$.resizeTimeout !== undefined) {\n      window.clearTimeout($$.resizeTimeout);\n    }\n\n    window.removeEventListener('resize', $$.resizeIfElementDisplayed); // Removes the inner resize functions\n\n    $$.resizeFunction.remove(); // Unbinds from the window focus event\n\n    $$.unbindWindowFocus();\n    $$.selectChart.classed('c3', false).html(''); // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n\n    Object.keys($$).forEach(function (key) {\n      $$[key] = null;\n    });\n    return null;\n  }; // TODO: fix\n\n\n  Chart.prototype.color = function (id) {\n    var $$ = this.internal;\n    return $$.color(id); // more patterns\n  };\n\n  Chart.prototype.data = function (targetIds) {\n    var targets = this.internal.data.targets;\n    return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n      return [].concat(targetIds).indexOf(t.id) >= 0;\n    });\n  };\n\n  Chart.prototype.data.shown = function (targetIds) {\n    return this.internal.filterTargetsToShow(this.data(targetIds));\n  };\n  /**\r\n   * Get values of the data loaded in the chart.\r\n   *\r\n   * @param {String|Array} targetId This API returns the value of specified target.\r\n   * @param flat\r\n   * @return {Array} Data values\r\n   */\n\n\n  Chart.prototype.data.values = function (targetId, flat) {\n    if (flat === void 0) {\n      flat = true;\n    }\n\n    var values = null;\n\n    if (targetId) {\n      var targets = this.data(targetId);\n\n      if (targets && isArray(targets)) {\n        values = targets.reduce(function (ret, v) {\n          var dataValue = v.values.map(function (d) {\n            return d.value;\n          });\n\n          if (flat) {\n            ret = ret.concat(dataValue);\n          } else {\n            ret.push(dataValue);\n          }\n\n          return ret;\n        }, []);\n      }\n    }\n\n    return values;\n  };\n\n  Chart.prototype.data.names = function (names) {\n    this.internal.clearLegendItemTextBoxCache();\n    return this.internal.updateDataAttributes('names', names);\n  };\n\n  Chart.prototype.data.colors = function (colors) {\n    return this.internal.updateDataAttributes('colors', colors);\n  };\n\n  Chart.prototype.data.axes = function (axes) {\n    return this.internal.updateDataAttributes('axes', axes);\n  };\n\n  Chart.prototype.data.stackNormalized = function (normalized) {\n    if (normalized === undefined) {\n      return this.internal.isStackNormalized();\n    }\n\n    this.internal.config.data_stack_normalize = !!normalized;\n    this.internal.redraw();\n  };\n\n  Chart.prototype.donut = function () {};\n\n  Chart.prototype.donut.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.donut_padAngle;\n    }\n\n    this.internal.config.donut_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.flow = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        notfoundIds = [],\n        orgDataCount = $$.getMaxDataCount(),\n        dataCount,\n        domain,\n        baseTarget,\n        baseValue,\n        length = 0,\n        tail = 0,\n        diff,\n        to;\n\n    if (args.json) {\n      data = $$.convertJsonToData(args.json, args.keys);\n    } else if (args.rows) {\n      data = $$.convertRowsToData(args.rows);\n    } else if (args.columns) {\n      data = $$.convertColumnsToData(args.columns);\n    } else {\n      return;\n    }\n\n    targets = $$.convertDataToTargets(data, true); // Update/Add data\n\n    $$.data.targets.forEach(function (t) {\n      var found = false,\n          i,\n          j;\n\n      for (i = 0; i < targets.length; i++) {\n        if (t.id === targets[i].id) {\n          found = true;\n\n          if (t.values[t.values.length - 1]) {\n            tail = t.values[t.values.length - 1].index + 1;\n          }\n\n          length = targets[i].values.length;\n\n          for (j = 0; j < length; j++) {\n            targets[i].values[j].index = tail + j;\n\n            if (!$$.isTimeSeries()) {\n              targets[i].values[j].x = tail + j;\n            }\n          }\n\n          t.values = t.values.concat(targets[i].values);\n          targets.splice(i, 1);\n          break;\n        }\n      }\n\n      if (!found) {\n        notfoundIds.push(t.id);\n      }\n    }); // Append null for not found targets\n\n    $$.data.targets.forEach(function (t) {\n      var i, j;\n\n      for (i = 0; i < notfoundIds.length; i++) {\n        if (t.id === notfoundIds[i]) {\n          tail = t.values[t.values.length - 1].index + 1;\n\n          for (j = 0; j < length; j++) {\n            t.values.push({\n              id: t.id,\n              index: tail + j,\n              x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n              value: null\n            });\n          }\n        }\n      }\n    }); // Generate null values for new target\n\n    if ($$.data.targets.length) {\n      targets.forEach(function (t) {\n        var i,\n            missing = [];\n\n        for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n          missing.push({\n            id: t.id,\n            index: i,\n            x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n            value: null\n          });\n        }\n\n        t.values.forEach(function (v) {\n          v.index += tail;\n\n          if (!$$.isTimeSeries()) {\n            v.x += tail;\n          }\n        });\n        t.values = missing.concat(t.values);\n      });\n    }\n\n    $$.data.targets = $$.data.targets.concat(targets); // add remained\n    // check data count because behavior needs to change when it's only one\n\n    dataCount = $$.getMaxDataCount();\n    baseTarget = $$.data.targets[0];\n    baseValue = baseTarget.values[0]; // Update length to flow if needed\n\n    if (isDefined(args.to)) {\n      length = 0;\n      to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n      baseTarget.values.forEach(function (v) {\n        if (v.x < to) {\n          length++;\n        }\n      });\n    } else if (isDefined(args.length)) {\n      length = args.length;\n    } // If only one data, update the domain to flow from left edge of the chart\n\n\n    if (!orgDataCount) {\n      if ($$.isTimeSeries()) {\n        if (baseTarget.values.length > 1) {\n          diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n        } else {\n          diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n        }\n      } else {\n        diff = 1;\n      }\n\n      domain = [baseValue.x - diff, baseValue.x];\n      $$.updateXDomain(null, true, true, false, domain);\n    } else if (orgDataCount === 1) {\n      if ($$.isTimeSeries()) {\n        diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n        domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n        $$.updateXDomain(null, true, true, false, domain);\n      }\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      flow: {\n        index: baseValue.index,\n        length: length,\n        duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n        done: args.done,\n        orgDataCount: orgDataCount\n      },\n      withLegend: true,\n      withTransition: orgDataCount > 1,\n      withTrimXDomain: false,\n      withUpdateXAxis: true\n    });\n  };\n\n  ChartInternal.prototype.generateFlow = function (args) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    return function () {\n      var targets = args.targets,\n          flow = args.flow,\n          drawBar = args.drawBar,\n          drawLine = args.drawLine,\n          drawArea = args.drawArea,\n          cx = args.cx,\n          cy = args.cy,\n          xv = args.xv,\n          xForText = args.xForText,\n          yForText = args.yForText,\n          duration = args.duration;\n\n      var translateX,\n          scaleX = 1,\n          transform,\n          flowIndex = flow.index,\n          flowLength = flow.length,\n          flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n          flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n          orgDomain = $$.x.domain(),\n          domain,\n          durationForFlow = flow.duration || duration,\n          done = flow.done || function () {},\n          wait = $$.generateWait();\n\n      var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle; // set flag\n\n      $$.flowing = true; // remove head data after rendered\n\n      $$.data.targets.forEach(function (d) {\n        d.values.splice(0, flowLength);\n      }); // update x domain to generate axis elements for flow\n\n      domain = $$.updateXDomain(targets, true, true); // update elements related to x scale\n\n      if ($$.updateXGrid) {\n        $$.updateXGrid(true);\n      }\n\n      xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\n\n      xgridLines = $$.xgridLines || d3.selectAll([]);\n      mainRegion = $$.mainRegion || d3.selectAll([]);\n      mainText = $$.mainText || d3.selectAll([]);\n      mainBar = $$.mainBar || d3.selectAll([]);\n      mainLine = $$.mainLine || d3.selectAll([]);\n      mainArea = $$.mainArea || d3.selectAll([]);\n      mainCircle = $$.mainCircle || d3.selectAll([]); // generate transform to flow\n\n      if (!flow.orgDataCount) {\n        // if empty\n        if ($$.data.targets[0].values.length !== 1) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          if ($$.isTimeSeries()) {\n            flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n            flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n            translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n          } else {\n            translateX = diffDomain(domain) / 2;\n          }\n        }\n      } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n        translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n      } else {\n        if ($$.isTimeSeries()) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n        }\n      }\n\n      scaleX = diffDomain(orgDomain) / diffDomain(domain);\n      transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n      $$.hideXGridFocus();\n      var flowTransition = d3.transition().ease(d3.easeLinear).duration(durationForFlow);\n      wait.add($$.xAxis($$.axes.x, flowTransition));\n      wait.add(mainBar.transition(flowTransition).attr('transform', transform));\n      wait.add(mainLine.transition(flowTransition).attr('transform', transform));\n      wait.add(mainArea.transition(flowTransition).attr('transform', transform));\n      wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\n      wait.add(mainText.transition(flowTransition).attr('transform', transform));\n      wait.add(mainRegion.filter($$.isRegionOnX).transition(flowTransition).attr('transform', transform));\n      wait.add(xgrid.transition(flowTransition).attr('transform', transform));\n      wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\n      wait(function () {\n        var i,\n            shapes = [],\n            texts = []; // remove flowed elements\n\n        if (flowLength) {\n          for (i = 0; i < flowLength; i++) {\n            shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n            texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n          }\n\n          $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n          $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n          $$.svg.select('.' + CLASS.xgrid).remove();\n        } // draw again for removing flowed elements and reverting attr\n\n\n        xgrid.attr('transform', null).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n        xgridLines.attr('transform', null);\n        xgridLines.select('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv);\n        xgridLines.select('text').attr('x', config.axis_rotated ? $$.width : 0).attr('y', xv);\n        mainBar.attr('transform', null).attr('d', drawBar);\n        mainLine.attr('transform', null).attr('d', drawLine);\n        mainArea.attr('transform', null).attr('d', drawArea);\n        mainCircle.attr('transform', null).attr('cx', cx).attr('cy', cy);\n        mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n        mainRegion.attr('transform', null);\n        mainRegion.filter($$.isRegionOnX).attr('x', $$.regionX.bind($$)).attr('width', $$.regionWidth.bind($$)); // callback for end of flow\n\n        done();\n        $$.flowing = false;\n      });\n    };\n  };\n\n  Chart.prototype.focus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n    this.defocus();\n    candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.expandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, true);\n    $$.focusedTargetIds = targetIds;\n    $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  Chart.prototype.defocus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, false);\n    $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    $$.defocusedTargetIds = targetIds;\n  };\n\n  Chart.prototype.revert = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n\n    candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    if ($$.config.legend_show) {\n      $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n      $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n        return $$.d3.select(this).classed(CLASS.legendItemFocused);\n      }).classed(CLASS.legendItemFocused, false);\n    }\n\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n  };\n\n  Chart.prototype.xgrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_x_lines;\n    }\n\n    config.grid_x_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_x_lines;\n  };\n\n  Chart.prototype.xgrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.xgrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, true);\n  };\n\n  Chart.prototype.ygrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_y_lines;\n    }\n\n    config.grid_y_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_y_lines;\n  };\n\n  Chart.prototype.ygrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.ygrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, false);\n  };\n\n  Chart.prototype.groups = function (groups) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (isUndefined(groups)) {\n      return config.data_groups;\n    }\n\n    config.data_groups = groups;\n    $$.redraw();\n    return config.data_groups;\n  };\n\n  Chart.prototype.legend = function () {};\n\n  Chart.prototype.legend.show = function (targetIds) {\n    var $$ = this.internal;\n    $$.showLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.legend.hide = function (targetIds) {\n    var $$ = this.internal;\n    $$.hideLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: false\n    });\n  };\n\n  Chart.prototype.load = function (args) {\n    var $$ = this.internal,\n        config = $$.config; // update xs if specified\n\n    if (args.xs) {\n      $$.addXs(args.xs);\n    } // update names if exists\n\n\n    if ('names' in args) {\n      Chart.prototype.data.names.bind(this)(args.names);\n    } // update classes if exists\n\n\n    if ('classes' in args) {\n      Object.keys(args.classes).forEach(function (id) {\n        config.data_classes[id] = args.classes[id];\n      });\n    } // update categories if exists\n\n\n    if ('categories' in args && $$.isCategorized()) {\n      config.axis_x_categories = args.categories;\n    } // update axes if exists\n\n\n    if ('axes' in args) {\n      Object.keys(args.axes).forEach(function (id) {\n        config.data_axes[id] = args.axes[id];\n      });\n    } // update colors if exists\n\n\n    if ('colors' in args) {\n      Object.keys(args.colors).forEach(function (id) {\n        config.data_colors[id] = args.colors[id];\n      });\n    } // use cache if exists\n\n\n    if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n      $$.load($$.getCaches(args.cacheIds), args.done);\n      return;\n    } // unload if needed\n\n\n    if (args.unload) {\n      // TODO: do not unload if target will load (included in url/rows/columns)\n      $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\n        $$.loadFromArgs(args);\n      });\n    } else {\n      $$.loadFromArgs(args);\n    }\n  };\n\n  Chart.prototype.unload = function (args) {\n    var $$ = this.internal;\n    args = args || {};\n\n    if (args instanceof Array) {\n      args = {\n        ids: args\n      };\n    } else if (typeof args === 'string') {\n      args = {\n        ids: [args]\n      };\n    }\n\n    $$.unload($$.mapToTargetIds(args.ids), function () {\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true,\n        withLegend: true\n      });\n\n      if (args.done) {\n        args.done();\n      }\n    });\n  };\n\n  Chart.prototype.pie = function () {};\n\n  Chart.prototype.pie.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.pie_padAngle;\n    }\n\n    this.internal.config.pie_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.regions = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = regions;\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.add = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = config.regions.concat(regions);\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.remove = function (options) {\n    var $$ = this.internal,\n        config = $$.config,\n        duration,\n        classes,\n        regions;\n    options = options || {};\n    duration = getOption(options, 'duration', config.transition_duration);\n    classes = getOption(options, 'classes', [CLASS.region]);\n    regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n      return '.' + c;\n    }));\n    (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n    config.regions = config.regions.filter(function (region) {\n      var found = false;\n\n      if (!region['class']) {\n        return true;\n      }\n\n      region['class'].split(' ').forEach(function (c) {\n        if (classes.indexOf(c) >= 0) {\n          found = true;\n        }\n      });\n      return !found;\n    });\n    return config.regions;\n  };\n\n  Chart.prototype.selected = function (targetId) {\n    var $$ = this.internal,\n        d3 = $$.d3;\n    return $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n      return d3.select(this).classed(CLASS.SELECTED);\n    }).nodes().map(function (d) {\n      var data = d.__data__;\n      return data.data ? data.data : data;\n    });\n  };\n\n  Chart.prototype.select = function (ids, indices, resetOther) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d) && !isSelected) {\n          toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n        }\n      } else if (isDefined(resetOther) && resetOther) {\n        if (isSelected) {\n          toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n        }\n      }\n    });\n  };\n\n  Chart.prototype.unselect = function (ids, indices) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d)) {\n          if (isSelected) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        }\n      }\n    });\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.removeHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('display', isIE() ? 'block' : 'initial', 'important').style('opacity', 1, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 1);\n    });\n\n    if (options.withLegend) {\n      $$.showLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.hide = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.addHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 0);\n      targets.style('display', 'none');\n    });\n\n    if (options.withLegend) {\n      $$.hideLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.toggle = function (targetIds, options) {\n    var that = this,\n        $$ = this.internal;\n    $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n      $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n    });\n  };\n\n  Chart.prototype.subchart = function () {};\n\n  Chart.prototype.subchart.isShown = function () {\n    var $$ = this.internal;\n    return $$.config.subchart_show;\n  };\n\n  Chart.prototype.subchart.show = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = true; // insert DOM\n\n    $$.initSubchart(); // update dimensions with sub chart now visible\n\n    $$.updateDimension(); // insert brush (depends on sizes previously updated)\n\n    $$.initSubchartBrush(); // attach data\n\n    $$.updateTargetsForSubchart($$.getTargets()); // reset fade-in state\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = false;\n    }); // redraw chart !\n\n    $$.updateAndRedraw(); // update visible targets !\n\n    $$.showTargets();\n  };\n\n  Chart.prototype.subchart.hide = function () {\n    var $$ = this.internal;\n\n    if (!$$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = false; // remove DOM\n\n    $$.removeSubchart(); // re-render chart\n\n    $$.redraw();\n  };\n\n  Chart.prototype.tooltip = function () {};\n\n  Chart.prototype.tooltip.show = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        mouse = {}; // determine mouse position on the chart\n\n    if (args.mouse) {\n      mouse = args.mouse;\n    } else {\n      // determine focus data\n      if (args.data) {\n        data = args.data;\n      } else if (typeof args.x !== 'undefined') {\n        if (args.id) {\n          targets = $$.data.targets.filter(function (t) {\n            return t.id === args.id;\n          });\n        } else {\n          targets = $$.data.targets;\n        }\n\n        data = $$.filterByX(targets, args.x).slice(0, 1)[0];\n      }\n\n      mouse = data ? $$.getMousePosition(data) : null;\n    } // emulate mouse events to show\n\n\n    $$.dispatchEvent('mousemove', mouse);\n    $$.config.tooltip_onshow.call($$, data);\n  };\n\n  Chart.prototype.tooltip.hide = function () {\n    // TODO: get target data by checking the state of focus\n    this.internal.dispatchEvent('mouseout', 0);\n    this.internal.config.tooltip_onhide.call(this);\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\n    var $$ = this.internal,\n        options = ['pie', 'donut'].indexOf(type) >= 0 ? {\n      withTransform: true\n    } : null;\n    $$.transformTo(targetIds, type, options);\n  };\n\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\n    var $$ = this,\n        withTransitionForAxis = !$$.hasArcType(),\n        options = optionsForRedraw || {\n      withTransitionForAxis: withTransitionForAxis\n    };\n    options.withTransitionForTransform = false;\n    $$.transiting = false;\n    $$.setTargetType(targetIds, type);\n    $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n\n    $$.updateAndRedraw(options);\n  };\n\n  Chart.prototype.x = function (x) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetX($$.data.targets, x);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.xs = function (xs) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetXs($$.data.targets, xs);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.zoom = function (domain) {\n    var $$ = this.internal;\n\n    if (domain) {\n      if ($$.isTimeSeries()) {\n        domain = domain.map(function (x) {\n          return $$.parseDate(x);\n        });\n      }\n\n      if ($$.config.subchart_show) {\n        $$.brush.selectionAsValue(domain, true);\n      } else {\n        $$.updateXDomain(null, true, false, false, domain);\n        $$.redraw({\n          withY: $$.config.zoom_rescale,\n          withSubchart: false\n        });\n      }\n\n      $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n      return domain;\n    } else {\n      return $$.x.domain();\n    }\n  };\n\n  Chart.prototype.zoom.enable = function (enabled) {\n    var $$ = this.internal;\n    $$.config.zoom_enabled = enabled;\n    $$.updateAndRedraw();\n  };\n\n  Chart.prototype.unzoom = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      $$.brush.clear();\n    } else {\n      $$.updateXDomain(null, true, false, false, $$.subX.domain());\n      $$.redraw({\n        withY: $$.config.zoom_rescale,\n        withSubchart: false\n      });\n    }\n  };\n\n  Chart.prototype.zoom.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (max === 0 || max) {\n      config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n    } else {\n      return config.zoom_x_max;\n    }\n  };\n\n  Chart.prototype.zoom.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (min === 0 || min) {\n      config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n    } else {\n      return config.zoom_x_min;\n    }\n  };\n\n  Chart.prototype.zoom.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.domain.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.domain.min(range.min);\n      }\n    } else {\n      return {\n        max: this.domain.max(),\n        min: this.domain.min()\n      };\n    }\n  };\n\n  ChartInternal.prototype.initPie = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.pie = d3.pie().padAngle(this.getPadAngle.bind(this)).value(function (d) {\n      return d.values.reduce(function (a, b) {\n        return a + b.value;\n      }, 0);\n    });\n    var orderFct = $$.getOrderFunction(); // we need to reverse the returned order if asc or desc to have the slice in expected order.\n\n    if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\n      var defaultSort_1 = orderFct;\n\n      orderFct = function orderFct(t1, t2) {\n        return defaultSort_1(t1, t2) * -1;\n      };\n    }\n\n    $$.pie.sort(orderFct || null);\n  };\n\n  ChartInternal.prototype.updateRadius = function () {\n    var $$ = this,\n        config = $$.config,\n        w = config.gauge_width || config.donut_width,\n        gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n    $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n    $$.radius = $$.radiusExpanded * 0.95;\n    $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n    $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n    $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n  };\n\n  ChartInternal.prototype.getPadAngle = function () {\n    if (this.hasType('pie')) {\n      return this.config.pie_padAngle || 0;\n    } else if (this.hasType('donut')) {\n      return this.config.donut_padAngle || 0;\n    } else {\n      return 0;\n    }\n  };\n\n  ChartInternal.prototype.updateArc = function () {\n    var $$ = this;\n    $$.svgArc = $$.getSvgArc();\n    $$.svgArcExpanded = $$.getSvgArcExpanded();\n    $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n  };\n\n  ChartInternal.prototype.updateAngle = function (d) {\n    var $$ = this,\n        config = $$.config,\n        found = false,\n        index = 0,\n        gMin,\n        gMax,\n        gTic,\n        gValue;\n\n    if (!config) {\n      return null;\n    }\n\n    $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n      if (!found && t.data.id === d.data.id) {\n        found = true;\n        d = t;\n        d.index = index;\n      }\n\n      index++;\n    });\n\n    if (isNaN(d.startAngle)) {\n      d.startAngle = 0;\n    }\n\n    if (isNaN(d.endAngle)) {\n      d.endAngle = d.startAngle;\n    }\n\n    if ($$.isGaugeType(d.data)) {\n      gMin = config.gauge_min;\n      gMax = config.gauge_max;\n      gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n      gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n      d.startAngle = config.gauge_startingAngle;\n      d.endAngle = d.startAngle + gTic * gValue;\n    }\n\n    return found ? d : null;\n  };\n\n  ChartInternal.prototype.getSvgArc = function () {\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    }),\n        newArc = function newArc(d, withoutUpdate) {\n      var updated;\n\n      if (withoutUpdate) {\n        return arc(d);\n      } // for interpolate\n\n\n      updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    };\n\n    newArc.centroid = arc.centroid;\n    return newArc;\n  };\n\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\n    rate = rate || 1;\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    });\n    return function (d) {\n      var updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\n    return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : 'M 0 0';\n  };\n\n  ChartInternal.prototype.transformForArcLabel = function (d) {\n    var $$ = this,\n        config = $$.config,\n        updated = $$.updateAngle(d),\n        c,\n        x,\n        y,\n        h,\n        ratio,\n        translate = '',\n        hasGauge = $$.hasType('gauge');\n\n    if (updated && !hasGauge) {\n      c = this.svgArc.centroid(updated);\n      x = isNaN(c[0]) ? 0 : c[0];\n      y = isNaN(c[1]) ? 0 : c[1];\n      h = Math.sqrt(x * x + y * y);\n\n      if ($$.hasType('donut') && config.donut_label_ratio) {\n        ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n      } else if ($$.hasType('pie') && config.pie_label_ratio) {\n        ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n      } else {\n        ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n      }\n\n      translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\n    } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n      var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n      x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n      y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n      translate = 'translate(' + x + ',' + y + ')';\n    }\n\n    return translate;\n  };\n  /**\r\n   * @deprecated Use `getRatio('arc', d)` instead.\r\n   */\n\n\n  ChartInternal.prototype.getArcRatio = function (d) {\n    return this.getRatio('arc', d);\n  };\n\n  ChartInternal.prototype.convertToArcData = function (d) {\n    return this.addName({\n      id: d.data.id,\n      value: d.value,\n      ratio: this.getRatio('arc', d),\n      index: d.index\n    });\n  };\n\n  ChartInternal.prototype.textForArcLabel = function (d) {\n    var $$ = this,\n        updated,\n        value,\n        ratio,\n        id,\n        format;\n\n    if (!$$.shouldShowArcLabel()) {\n      return '';\n    }\n\n    updated = $$.updateAngle(d);\n    value = updated ? updated.value : null;\n    ratio = $$.getRatio('arc', updated);\n    id = d.data.id;\n\n    if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n      return '';\n    }\n\n    format = $$.getArcLabelFormat();\n    return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n  };\n\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\n    var $$ = this,\n        format = $$.getGaugeLabelExtents();\n    return format ? format(value, isMax) : value;\n  };\n\n  ChartInternal.prototype.expandArc = function (targetIds) {\n    var $$ = this,\n        interval; // MEMO: avoid to cancel transition\n\n    if ($$.transiting) {\n      interval = window.setInterval(function () {\n        if (!$$.transiting) {\n          window.clearInterval(interval);\n\n          if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n            $$.expandArc(targetIds);\n          }\n        }\n      }, 10);\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n      if (!$$.shouldExpand(d.data.id)) {\n        return;\n      }\n\n      $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr('d', $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr('d', $$.svgArcExpandedSub).each(function (d) {\n        if ($$.isDonutType(d.data)) ;\n      });\n    });\n  };\n\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\n    var $$ = this;\n\n    if ($$.transiting) {\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n      return $$.expandDuration(d.data.id);\n    }).attr('d', $$.svgArc);\n    $$.svg.selectAll('.' + CLASS.arc);\n  };\n\n  ChartInternal.prototype.expandDuration = function (id) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isDonutType(id)) {\n      return config.donut_expand_duration;\n    } else if ($$.isGaugeType(id)) {\n      return config.gauge_expand_duration;\n    } else if ($$.isPieType(id)) {\n      return config.pie_expand_duration;\n    } else {\n      return 50;\n    }\n  };\n\n  ChartInternal.prototype.shouldExpand = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n  };\n\n  ChartInternal.prototype.shouldShowArcLabel = function () {\n    var $$ = this,\n        config = $$.config,\n        shouldShow = true;\n\n    if ($$.hasType('donut')) {\n      shouldShow = config.donut_label_show;\n    } else if ($$.hasType('pie')) {\n      shouldShow = config.pie_label_show;\n    } // when gauge, always true\n\n\n    return shouldShow;\n  };\n\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\n    var $$ = this,\n        config = $$.config,\n        threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n    return ratio >= threshold;\n  };\n\n  ChartInternal.prototype.getArcLabelFormat = function () {\n    var $$ = this,\n        config = $$.config,\n        format = config.pie_label_format;\n\n    if ($$.hasType('gauge')) {\n      format = config.gauge_label_format;\n    } else if ($$.hasType('donut')) {\n      format = config.donut_label_format;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.gauge_label_extents;\n  };\n\n  ChartInternal.prototype.getArcTitle = function () {\n    var $$ = this;\n    return $$.hasType('donut') ? $$.config.donut_title : '';\n  };\n\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\n    var $$ = this,\n        main = $$.main,\n        mainPies,\n        mainPieEnter,\n        classChartArc = $$.classChartArc.bind($$),\n        classArcs = $$.classArcs.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainPies = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr('class', function (d) {\n      return classChartArc(d) + classFocus(d.data);\n    });\n    mainPieEnter = mainPies.enter().append('g').attr('class', classChartArc);\n    mainPieEnter.append('g').attr('class', classArcs);\n    mainPieEnter.append('text').attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em').style('opacity', 0).style('text-anchor', 'middle').style('pointer-events', 'none'); // MEMO: can not keep same color..., but not bad to update color in redraw\n    //mainPieUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.initArc = function () {\n    var $$ = this;\n    $$.arcs = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n    $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style('text-anchor', 'middle').text($$.getArcTitle());\n  };\n\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        main = $$.main,\n        arcs,\n        mainArc,\n        arcLabelLines,\n        mainArcLabelLine,\n        hasGaugeType = $$.hasType('gauge');\n    arcs = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n    mainArc = arcs.enter().append('path').attr('class', $$.classArc.bind($$)).style('fill', function (d) {\n      return $$.color(d.data);\n    }).style('cursor', function (d) {\n      return config.interaction_enabled && config.data_selection_isselectable(d) ? 'pointer' : null;\n    }).each(function (d) {\n      if ($$.isGaugeType(d.data)) {\n        d.startAngle = d.endAngle = config.gauge_startingAngle;\n      }\n\n      this._current = d;\n    }).merge(arcs);\n\n    if (hasGaugeType) {\n      arcLabelLines = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n      mainArcLabelLine = arcLabelLines.enter().append('rect').attr('class', function (d) {\n        return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n      }).merge(arcLabelLines);\n\n      if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n        mainArcLabelLine.style('display', 'none');\n      } else {\n        mainArcLabelLine.style('fill', function (d) {\n          return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n            return total + item.value;\n          }, 0)) : $$.color(d.data);\n        }).style('display', config.gauge_labelLine_show ? '' : 'none').each(function (d) {\n          var lineLength = 0,\n              lineThickness = 2,\n              x = 0,\n              y = 0,\n              transform = '';\n\n          if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n            var updated = $$.updateAngle(d),\n                innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n                lineAngle = updated.endAngle - Math.PI / 2,\n                arcInnerRadius = $$.radius - innerLineLength,\n                linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n            lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n            x = Math.cos(linePositioningAngle) * arcInnerRadius;\n            y = Math.sin(linePositioningAngle) * arcInnerRadius;\n            transform = 'rotate(' + lineAngle * 180 / Math.PI + ', ' + x + ', ' + y + ')';\n          }\n\n          d3.select(this).attr('x', x).attr('y', y).attr('width', lineLength).attr('height', lineThickness).attr('transform', transform).style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\n        });\n      }\n    }\n\n    mainArc.attr('transform', function (d) {\n      return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\n    }).on('mouseover', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.expandArc(updated.data.id);\n        $$.api.focus(updated.data.id);\n        $$.toggleFocusLegend(updated.data.id, true);\n        $$.config.data_onmouseover(arcData, this);\n      }\n    } : null).on('mousemove', config.interaction_enabled ? function (d) {\n      var updated = $$.updateAngle(d),\n          arcData,\n          selectedData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated), selectedData = [arcData];\n        $$.showTooltip(selectedData, this);\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.unexpandArc(updated.data.id);\n        $$.api.revert();\n        $$.revertLegend();\n        $$.hideTooltip();\n        $$.config.data_onmouseout(arcData, this);\n      }\n    } : null).on('click', config.interaction_enabled ? function (d, i) {\n      var updated = $$.updateAngle(d),\n          arcData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n\n        if ($$.toggleShape) {\n          $$.toggleShape(this, arcData, i);\n        }\n\n        $$.config.data_onclick.call($$.api, arcData, this);\n      }\n    } : null).each(function () {\n      $$.transiting = true;\n    }).transition().duration(duration).attrTween('d', function (d) {\n      var updated = $$.updateAngle(d),\n          interpolate;\n\n      if (!updated) {\n        return function () {\n          return 'M 0 0';\n        };\n      } //                if (this._current === d) {\n      //                    this._current = {\n      //                        startAngle: Math.PI*2,\n      //                        endAngle: Math.PI*2,\n      //                    };\n      //                }\n\n\n      if (isNaN(this._current.startAngle)) {\n        this._current.startAngle = 0;\n      }\n\n      if (isNaN(this._current.endAngle)) {\n        this._current.endAngle = this._current.startAngle;\n      }\n\n      interpolate = d3.interpolate(this._current, updated);\n      this._current = interpolate(0);\n      return function (t) {\n        // prevents crashing the charts once in transition and chart.destroy() has been called\n        if ($$.config === null) {\n          return 'M 0 0';\n        }\n\n        var interpolated = interpolate(t);\n        interpolated.data = d.data; // data.id will be updated by interporator\n\n        return $$.getArc(interpolated, true);\n      };\n    }).attr('transform', withTransform ? 'scale(1)' : '').style('fill', function (d) {\n      return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0)) : $$.color(d.data.id);\n    }) // Where gauge reading color would receive customization.\n    .call($$.endall, function () {\n      $$.transiting = false;\n    });\n    arcs.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    main.selectAll('.' + CLASS.chartArc).select('text').style('opacity', 0).attr('class', function (d) {\n      return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n    }).text($$.textForArcLabel.bind($$)).attr('transform', $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n      return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n    }).transition().duration(duration).style('opacity', function (d) {\n      return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n    });\n    main.select('.' + CLASS.chartArcsTitle).style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\n\n    if (hasGaugeType) {\n      var index_1 = 0;\n      var backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n      backgroundArc.enter().append('path').attr('class', function (d, i) {\n        return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n      }).merge(backgroundArc).attr('d', function (d1) {\n        if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n          return 'M 0 0';\n        }\n\n        var d = {\n          data: [{\n            value: config.gauge_max\n          }],\n          startAngle: config.gauge_startingAngle,\n          endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n          index: index_1++\n        };\n        return $$.getArc(d, true, true);\n      });\n      backgroundArc.exit().remove();\n      $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr('dy', '.75em').text(config.gauge_label_show ? config.gauge_units : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr('dx', -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr('dx', $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n    }\n  };\n\n  ChartInternal.prototype.initGauge = function () {\n    var arcs = this.arcs;\n\n    if (this.hasType('gauge')) {\n      arcs.append('g').attr('class', CLASS.chartArcsBackground);\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeUnit).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMin).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMax).style('text-anchor', 'middle').style('pointer-events', 'none');\n    }\n  };\n\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\n    return this.config.gauge_label_show ? 20 : 0;\n  };\n  /**\r\n   * Store value into cache\r\n   *\r\n   * @param key\r\n   * @param value\r\n   */\n\n\n  ChartInternal.prototype.addToCache = function (key, value) {\n    this.cache[\"$\" + key] = value;\n  };\n  /**\r\n   * Returns a cached value or undefined\r\n   *\r\n   * @param key\r\n   * @return {*}\r\n   */\n\n\n  ChartInternal.prototype.getFromCache = function (key) {\n    return this.cache[\"$\" + key];\n  };\n  /**\r\n   * Reset cached data\r\n   */\n\n\n  ChartInternal.prototype.resetCache = function () {\n    var _this = this;\n\n    Object.keys(this.cache).filter(function (key) {\n      return /^\\$/.test(key);\n    }).forEach(function (key) {\n      delete _this.cache[key];\n    });\n  }; // Old API that stores Targets\n\n\n  ChartInternal.prototype.hasCaches = function (ids) {\n    for (var i = 0; i < ids.length; i++) {\n      if (!(ids[i] in this.cache)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  ChartInternal.prototype.addCache = function (id, target) {\n    this.cache[id] = this.cloneTarget(target);\n  };\n\n  ChartInternal.prototype.getCaches = function (ids) {\n    var targets = [],\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] in this.cache) {\n        targets.push(this.cloneTarget(this.cache[ids[i]]));\n      }\n    }\n\n    return targets;\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\n    var config = this.config;\n    return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\n    return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\n  };\n\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\n    return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\n  };\n\n  ChartInternal.prototype.classText = function (d) {\n    return this.generateClass(CLASS.text, d.index);\n  };\n\n  ChartInternal.prototype.classTexts = function (d) {\n    return this.generateClass(CLASS.texts, d.id);\n  };\n\n  ChartInternal.prototype.classShape = function (d) {\n    return this.generateClass(CLASS.shape, d.index);\n  };\n\n  ChartInternal.prototype.classShapes = function (d) {\n    return this.generateClass(CLASS.shapes, d.id);\n  };\n\n  ChartInternal.prototype.classLine = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n  };\n\n  ChartInternal.prototype.classLines = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n  };\n\n  ChartInternal.prototype.classCircle = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n  };\n\n  ChartInternal.prototype.classCircles = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n  };\n\n  ChartInternal.prototype.classBar = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n  };\n\n  ChartInternal.prototype.classBars = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n  };\n\n  ChartInternal.prototype.classArc = function (d) {\n    return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n  };\n\n  ChartInternal.prototype.classArcs = function (d) {\n    return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n  };\n\n  ChartInternal.prototype.classArea = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n  };\n\n  ChartInternal.prototype.classAreas = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n  };\n\n  ChartInternal.prototype.classRegion = function (d, i) {\n    return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n  };\n\n  ChartInternal.prototype.classEvent = function (d) {\n    return this.generateClass(CLASS.eventRect, d.index);\n  };\n\n  ChartInternal.prototype.classTarget = function (id) {\n    var $$ = this;\n    var additionalClassSuffix = $$.config.data_classes[id],\n        additionalClass = '';\n\n    if (additionalClassSuffix) {\n      additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n    }\n\n    return $$.generateClass(CLASS.target, id) + additionalClass;\n  };\n\n  ChartInternal.prototype.classFocus = function (d) {\n    return this.classFocused(d) + this.classDefocused(d);\n  };\n\n  ChartInternal.prototype.classFocused = function (d) {\n    return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n  };\n\n  ChartInternal.prototype.classDefocused = function (d) {\n    return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n  };\n\n  ChartInternal.prototype.classChartText = function (d) {\n    return CLASS.chartText + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartLine = function (d) {\n    return CLASS.chartLine + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartBar = function (d) {\n    return CLASS.chartBar + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartArc = function (d) {\n    return CLASS.chartArc + this.classTarget(d.data.id);\n  };\n\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\n    var targetClass = this.generateTargetClass(targetId);\n\n    if (window.CSS && window.CSS.escape) {\n      return window.CSS.escape(targetClass);\n    } // fallback on imperfect method for old browsers (does not handles unicode)\n\n\n    return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\n  };\n\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\n    return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\n    var $$ = this;\n    ids = ids || [];\n    return ids.length ? ids.map(function (id) {\n      return $$.selectorTarget(id, prefix);\n    }) : null;\n  };\n\n  ChartInternal.prototype.selectorLegend = function (id) {\n    return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorLegends = function (ids) {\n    var $$ = this;\n    return ids && ids.length ? ids.map(function (id) {\n      return $$.selectorLegend(id);\n    }) : null;\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\n    return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\n  };\n\n  ChartInternal.prototype.appendClip = function (parent, id) {\n    return parent.append('clipPath').attr('id', id).append('rect');\n  };\n\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\n    // axis line width + padding for left\n    var left = Math.max(30, this.margin.left);\n    return forHorizontal ? -(1 + left) : -(left - 1);\n  };\n\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\n    return forHorizontal ? -20 : -this.margin.top;\n  };\n\n  ChartInternal.prototype.getXAxisClipX = function () {\n    var $$ = this;\n    return $$.getAxisClipX(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipX = function () {\n    var $$ = this;\n    return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\n    var $$ = this,\n        left = Math.max(30, $$.margin.left),\n        right = Math.max(30, $$.margin.right); // width + axis line width + padding for left/right\n\n    return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n  };\n\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\n    // less than 20 is not enough to show the axis label 'outer' without legend\n    return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n  };\n\n  ChartInternal.prototype.getXAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n  };\n\n  ChartInternal.prototype.getYAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.generateColor = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        colors = config.data_colors,\n        pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.schemeCategory10,\n        callback = config.data_color,\n        ids = [];\n    return function (d) {\n      var id = d.id || d.data && d.data.id || d,\n          color; // if callback function is provided\n\n      if (colors[id] instanceof Function) {\n        color = colors[id](d);\n      } // if specified, choose that color\n      else if (colors[id]) {\n        color = colors[id];\n      } // if not specified, choose from pattern\n      else {\n        if (ids.indexOf(id) < 0) {\n          ids.push(id);\n        }\n\n        color = pattern[ids.indexOf(id) % pattern.length];\n        colors[id] = color;\n      }\n\n      return callback instanceof Function ? callback(color, d) : color;\n    };\n  };\n\n  ChartInternal.prototype.generateLevelColor = function () {\n    var $$ = this,\n        config = $$.config,\n        colors = config.color_pattern,\n        threshold = config.color_threshold,\n        asValue = threshold.unit === 'value',\n        values = threshold.values && threshold.values.length ? threshold.values : [],\n        max = threshold.max || 100;\n    return notEmpty(threshold) && notEmpty(colors) ? function (value) {\n      var i,\n          v,\n          color = colors[colors.length - 1];\n\n      for (i = 0; i < values.length; i++) {\n        v = asValue ? value : value * 100 / max;\n\n        if (v < values[i]) {\n          color = colors[i];\n          break;\n        }\n      }\n\n      return color;\n    } : null;\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\n    var config = {\n      bindto: '#chart',\n      svg_classname: undefined,\n      size_width: undefined,\n      size_height: undefined,\n      padding_left: undefined,\n      padding_right: undefined,\n      padding_top: undefined,\n      padding_bottom: undefined,\n      resize_auto: true,\n      zoom_enabled: false,\n      zoom_initialRange: undefined,\n      zoom_type: 'scroll',\n      zoom_disableDefaultBehavior: false,\n      zoom_privileged: false,\n      zoom_rescale: false,\n      zoom_onzoom: function zoom_onzoom() {},\n      zoom_onzoomstart: function zoom_onzoomstart() {},\n      zoom_onzoomend: function zoom_onzoomend() {},\n      zoom_x_min: undefined,\n      zoom_x_max: undefined,\n      interaction_brighten: true,\n      interaction_enabled: true,\n      onmouseover: function onmouseover() {},\n      onmouseout: function onmouseout() {},\n      onresize: function onresize() {},\n      onresized: function onresized() {},\n      oninit: function oninit() {},\n      onrendered: function onrendered() {},\n      transition_duration: 350,\n      data_epochs: 'epochs',\n      data_x: undefined,\n      data_xs: {},\n      data_xFormat: '%Y-%m-%d',\n      data_xLocaltime: true,\n      data_xSort: true,\n      data_idConverter: function data_idConverter(id) {\n        return id;\n      },\n      data_names: {},\n      data_classes: {},\n      data_groups: [],\n      data_axes: {},\n      data_type: undefined,\n      data_types: {},\n      data_labels: {},\n      data_order: 'desc',\n      data_regions: {},\n      data_color: undefined,\n      data_colors: {},\n      data_hide: false,\n      data_filter: undefined,\n      data_selection_enabled: false,\n      data_selection_grouped: false,\n      data_selection_isselectable: function data_selection_isselectable() {\n        return true;\n      },\n      data_selection_multiple: true,\n      data_selection_draggable: false,\n      data_stack_normalize: false,\n      data_onclick: function data_onclick() {},\n      data_onmouseover: function data_onmouseover() {},\n      data_onmouseout: function data_onmouseout() {},\n      data_onselected: function data_onselected() {},\n      data_onunselected: function data_onunselected() {},\n      data_url: undefined,\n      data_headers: undefined,\n      data_json: undefined,\n      data_rows: undefined,\n      data_columns: undefined,\n      data_mimeType: undefined,\n      data_keys: undefined,\n      // configuration for no plot-able data supplied.\n      data_empty_label_text: '',\n      // subchart\n      subchart_show: false,\n      subchart_size_height: 60,\n      subchart_axis_x_show: true,\n      subchart_onbrush: function subchart_onbrush() {},\n      // color\n      color_pattern: [],\n      color_threshold: {},\n      // legend\n      legend_show: true,\n      legend_hide: false,\n      legend_position: 'bottom',\n      legend_inset_anchor: 'top-left',\n      legend_inset_x: 10,\n      legend_inset_y: 0,\n      legend_inset_step: undefined,\n      legend_item_onclick: undefined,\n      legend_item_onmouseover: undefined,\n      legend_item_onmouseout: undefined,\n      legend_equally: false,\n      legend_padding: 0,\n      legend_item_tile_width: 10,\n      legend_item_tile_height: 10,\n      // axis\n      axis_rotated: false,\n      axis_x_show: true,\n      axis_x_type: 'indexed',\n      axis_x_localtime: true,\n      axis_x_categories: [],\n      axis_x_tick_centered: false,\n      axis_x_tick_format: undefined,\n      axis_x_tick_culling: {},\n      axis_x_tick_culling_max: 10,\n      axis_x_tick_count: undefined,\n      axis_x_tick_fit: true,\n      axis_x_tick_values: null,\n      axis_x_tick_rotate: 0,\n      axis_x_tick_outer: true,\n      axis_x_tick_multiline: true,\n      axis_x_tick_multilineMax: 0,\n      axis_x_tick_width: null,\n      axis_x_max: undefined,\n      axis_x_min: undefined,\n      axis_x_padding: {},\n      axis_x_height: undefined,\n      axis_x_selection: undefined,\n      axis_x_label: {},\n      axis_x_inner: undefined,\n      axis_y_show: true,\n      axis_y_type: 'linear',\n      axis_y_max: undefined,\n      axis_y_min: undefined,\n      axis_y_inverted: false,\n      axis_y_center: undefined,\n      axis_y_inner: undefined,\n      axis_y_label: {},\n      axis_y_tick_format: undefined,\n      axis_y_tick_outer: true,\n      axis_y_tick_values: null,\n      axis_y_tick_rotate: 0,\n      axis_y_tick_count: undefined,\n      axis_y_tick_time_type: undefined,\n      axis_y_tick_time_interval: undefined,\n      axis_y_padding: {},\n      axis_y_default: undefined,\n      axis_y2_show: false,\n      axis_y2_type: 'linear',\n      axis_y2_max: undefined,\n      axis_y2_min: undefined,\n      axis_y2_inverted: false,\n      axis_y2_center: undefined,\n      axis_y2_inner: undefined,\n      axis_y2_label: {},\n      axis_y2_tick_format: undefined,\n      axis_y2_tick_outer: true,\n      axis_y2_tick_values: null,\n      axis_y2_tick_count: undefined,\n      axis_y2_padding: {},\n      axis_y2_default: undefined,\n      // grid\n      grid_x_show: false,\n      grid_x_type: 'tick',\n      grid_x_lines: [],\n      grid_y_show: false,\n      // not used\n      // grid_y_type: 'tick',\n      grid_y_lines: [],\n      grid_y_ticks: 10,\n      grid_focus_show: true,\n      grid_lines_front: true,\n      // point - point of each data\n      point_show: true,\n      point_r: 2.5,\n      point_sensitivity: 10,\n      point_focus_expand_enabled: true,\n      point_focus_expand_r: undefined,\n      point_select_r: undefined,\n      // line\n      line_connectNull: false,\n      line_step_type: 'step',\n      // bar\n      bar_width: undefined,\n      bar_width_ratio: 0.6,\n      bar_width_max: undefined,\n      bar_zerobased: true,\n      bar_space: 0,\n      // area\n      area_zerobased: true,\n      area_above: false,\n      // pie\n      pie_label_show: true,\n      pie_label_format: undefined,\n      pie_label_threshold: 0.05,\n      pie_label_ratio: undefined,\n      pie_expand: {},\n      pie_expand_duration: 50,\n      pie_padAngle: 0,\n      // gauge\n      gauge_fullCircle: false,\n      gauge_label_show: true,\n      gauge_labelLine_show: true,\n      gauge_label_format: undefined,\n      gauge_min: 0,\n      gauge_max: 100,\n      gauge_startingAngle: -1 * Math.PI / 2,\n      gauge_label_extents: undefined,\n      gauge_units: undefined,\n      gauge_width: undefined,\n      gauge_arcs_minWidth: 5,\n      gauge_expand: {},\n      gauge_expand_duration: 50,\n      // donut\n      donut_label_show: true,\n      donut_label_format: undefined,\n      donut_label_threshold: 0.05,\n      donut_label_ratio: undefined,\n      donut_width: undefined,\n      donut_title: '',\n      donut_expand: {},\n      donut_expand_duration: 50,\n      donut_padAngle: 0,\n      // spline\n      spline_interpolation_type: 'cardinal',\n      // stanford\n      stanford_lines: [],\n      stanford_regions: [],\n      stanford_texts: [],\n      stanford_scaleMin: undefined,\n      stanford_scaleMax: undefined,\n      stanford_scaleWidth: undefined,\n      stanford_scaleFormat: undefined,\n      stanford_scaleValues: undefined,\n      stanford_colors: undefined,\n      stanford_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      // region - region to change style\n      regions: [],\n      // tooltip - show when mouseover on each data\n      tooltip_show: true,\n      tooltip_grouped: true,\n      tooltip_order: undefined,\n      tooltip_format_title: undefined,\n      tooltip_format_name: undefined,\n      tooltip_format_value: undefined,\n      tooltip_horizontal: undefined,\n      tooltip_position: undefined,\n      tooltip_contents: function tooltip_contents(d, defaultTitleFormat, defaultValueFormat, color) {\n        return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n      },\n      tooltip_init_show: false,\n      tooltip_init_x: 0,\n      tooltip_init_position: {\n        top: '0px',\n        left: '50px'\n      },\n      tooltip_onshow: function tooltip_onshow() {},\n      tooltip_onhide: function tooltip_onhide() {},\n      // title\n      title_text: undefined,\n      title_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      title_position: 'top-center'\n    };\n    Object.keys(this.additionalConfig).forEach(function (key) {\n      config[key] = this.additionalConfig[key];\n    }, this);\n    return config;\n  };\n\n  ChartInternal.prototype.additionalConfig = {};\n\n  ChartInternal.prototype.loadConfig = function (config) {\n    var this_config = this.config,\n        target,\n        keys,\n        read;\n\n    function find() {\n      var key = keys.shift(); //        console.log(\"key =>\", key, \", target =>\", target);\n\n      if (key && target && typeof target === 'object' && key in target) {\n        target = target[key];\n        return find();\n      } else if (!key) {\n        return target;\n      } else {\n        return undefined;\n      }\n    }\n\n    Object.keys(this_config).forEach(function (key) {\n      target = config;\n      keys = key.split('_');\n      read = find(); //        console.log(\"CONFIG : \", key, read);\n\n      if (isDefined(read)) {\n        this_config[key] = read;\n      }\n    });\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\n    var $$ = this,\n        type = mimeType ? mimeType : 'csv',\n        f,\n        converter;\n\n    if (type === 'json') {\n      f = $$.d3.json;\n      converter = $$.convertJsonToData;\n    } else if (type === 'tsv') {\n      f = $$.d3.tsv;\n      converter = $$.convertXsvToData;\n    } else {\n      f = $$.d3.csv;\n      converter = $$.convertXsvToData;\n    }\n\n    f(url, headers).then(function (data) {\n      done.call($$, converter.call($$, data, keys));\n    }).catch(function (error) {\n      throw error;\n    });\n  };\n\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\n    var keys = xsv.columns,\n        rows = xsv;\n\n    if (rows.length === 0) {\n      return {\n        keys: keys,\n        rows: [keys.reduce(function (row, key) {\n          var _a;\n\n          return Object.assign(row, (_a = {}, _a[key] = null, _a));\n        }, {})]\n      };\n    } else {\n      // [].concat() is to convert result into a plain array otherwise\n      // test is not happy because rows have properties.\n      return {\n        keys: keys,\n        rows: [].concat(xsv)\n      };\n    }\n  };\n\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\n    var $$ = this,\n        new_rows = [],\n        targetKeys,\n        data;\n\n    if (keys) {\n      // when keys specified, json would be an array that includes objects\n      if (keys.x) {\n        targetKeys = keys.value.concat(keys.x);\n        $$.config.data_x = keys.x;\n      } else {\n        targetKeys = keys.value;\n      }\n\n      new_rows.push(targetKeys);\n      json.forEach(function (o) {\n        var new_row = [];\n        targetKeys.forEach(function (key) {\n          // convert undefined to null because undefined data will be removed in convertDataToTargets()\n          var v = $$.findValueInJson(o, key);\n\n          if (isUndefined(v)) {\n            v = null;\n          }\n\n          new_row.push(v);\n        });\n        new_rows.push(new_row);\n      });\n      data = $$.convertRowsToData(new_rows);\n    } else {\n      Object.keys(json).forEach(function (key) {\n        new_rows.push([key].concat(json[key]));\n      });\n      data = $$.convertColumnsToData(new_rows);\n    }\n\n    return data;\n  };\n  /**\r\n   * Finds value from the given nested object by the given path.\r\n   * If it's not found, then this returns undefined.\r\n   * @param {Object} object the object\r\n   * @param {string} path the path\r\n   */\n\n\n  ChartInternal.prototype.findValueInJson = function (object, path) {\n    if (path in object) {\n      // If object has a key that contains . or [], return the key's value\n      // instead of searching for an inner object.\n      // See https://github.com/c3js/c3/issues/1691 for details.\n      return object[path];\n    }\n\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n\n    path = path.replace(/^\\./, ''); // strip a leading dot\n\n    var pathArray = path.split('.');\n\n    for (var i = 0; i < pathArray.length; ++i) {\n      var k = pathArray[i];\n\n      if (k in object) {\n        object = object[k];\n      } else {\n        return;\n      }\n    }\n\n    return object;\n  };\n  /**\r\n   * Converts the rows to normalized data.\r\n   * @param {any[][]} rows The row data\r\n   * @return {Object}\r\n   */\n\n\n  ChartInternal.prototype.convertRowsToData = function (rows) {\n    var newRows = [];\n    var keys = rows[0];\n\n    for (var i = 1; i < rows.length; i++) {\n      var newRow = {};\n\n      for (var j = 0; j < rows[i].length; j++) {\n        if (isUndefined(rows[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRow[keys[j]] = rows[i][j];\n      }\n\n      newRows.push(newRow);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\r\n   * Converts the columns to normalized data.\r\n   * @param {any[][]} columns The column data\r\n   * @return {Object}\r\n   */\n\n\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\n    var newRows = [];\n    var keys = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      var key = columns[i][0];\n\n      for (var j = 1; j < columns[i].length; j++) {\n        if (isUndefined(newRows[j - 1])) {\n          newRows[j - 1] = {};\n        }\n\n        if (isUndefined(columns[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRows[j - 1][key] = columns[i][j];\n      }\n\n      keys.push(key);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\r\n   * Converts the data format into the target format.\r\n   * @param {!Object} data\r\n   * @param {!Array} data.keys Ordered list of target IDs.\r\n   * @param {!Array} data.rows Rows of data to convert.\r\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\r\n   * @return {!Array}\r\n   */\n\n\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\n    var $$ = this,\n        config = $$.config,\n        targets,\n        ids,\n        xs,\n        keys,\n        epochs; // handles format where keys are not orderly provided\n\n    if (isArray(data)) {\n      keys = Object.keys(data[0]);\n    } else {\n      keys = data.keys;\n      data = data.rows;\n    }\n\n    xs = keys.filter($$.isX, $$);\n\n    if (!$$.isStanfordGraphType()) {\n      ids = keys.filter($$.isNotX, $$);\n    } else {\n      epochs = keys.filter($$.isEpochs, $$);\n      ids = keys.filter($$.isNotXAndNotEpochs, $$);\n\n      if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\n        throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\n      }\n    } // save x for update data by load when custom x and c3.x API\n\n\n    ids.forEach(function (id) {\n      var xKey = $$.getXKey(id);\n\n      if ($$.isCustomX() || $$.isTimeSeries()) {\n        // if included in input data\n        if (xs.indexOf(xKey) >= 0) {\n          $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n            return d[xKey];\n          }).filter(isValue).map(function (rawX, i) {\n            return $$.generateTargetX(rawX, id, i);\n          }));\n        } // if not included in input data, find from preloaded data of other id's x\n        else if (config.data_x) {\n          $$.data.xs[id] = $$.getOtherTargetXs();\n        } // if not included in input data, find from preloaded data\n        else if (notEmpty(config.data_xs)) {\n          $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n        } // MEMO: if no x included, use same x of current will be used\n\n      } else {\n        $$.data.xs[id] = data.map(function (d, i) {\n          return i;\n        });\n      }\n    }); // check x is defined\n\n    ids.forEach(function (id) {\n      if (!$$.data.xs[id]) {\n        throw new Error('x is not defined for id = \"' + id + '\".');\n      }\n    }); // convert to target\n\n    targets = ids.map(function (id, index) {\n      var convertedId = config.data_idConverter(id);\n      return {\n        id: convertedId,\n        id_org: id,\n        values: data.map(function (d, i) {\n          var xKey = $$.getXKey(id),\n              rawX = d[xKey],\n              value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n              x,\n              returnData; // use x as categories if custom x and categorized\n\n          if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n            if (index === 0 && i === 0) {\n              config.axis_x_categories = [];\n            }\n\n            x = config.axis_x_categories.indexOf(rawX);\n\n            if (x === -1) {\n              x = config.axis_x_categories.length;\n              config.axis_x_categories.push(rawX);\n            }\n          } else {\n            x = $$.generateTargetX(rawX, id, i);\n          } // mark as x = undefined if value is undefined and filter to remove after mapped\n\n\n          if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n            x = undefined;\n          }\n\n          returnData = {\n            x: x,\n            value: value,\n            id: convertedId\n          };\n\n          if ($$.isStanfordGraphType()) {\n            returnData.epochs = d[epochs];\n          }\n\n          return returnData;\n        }).filter(function (v) {\n          return isDefined(v.x);\n        })\n      };\n    }); // finish targets\n\n    targets.forEach(function (t) {\n      var i; // sort values by its x\n\n      if (config.data_xSort) {\n        t.values = t.values.sort(function (v1, v2) {\n          var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n              x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n          return x1 - x2;\n        });\n      } // indexing each value\n\n\n      i = 0;\n      t.values.forEach(function (v) {\n        v.index = i++;\n      }); // this needs to be sorted because its index and value.index is identical\n\n      $$.data.xs[t.id].sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    }); // cache information about values\n\n    $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n    $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets); // set target types\n\n    if (config.data_type) {\n      $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n        return !(id in config.data_types);\n      }), config.data_type);\n    } // cache as original id keyed\n\n\n    targets.forEach(function (d) {\n      $$.addCache(d.id_org, d);\n    });\n    return targets;\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_epochs && key === config.data_epochs;\n  };\n\n  ChartInternal.prototype.isX = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n  };\n\n  ChartInternal.prototype.isNotX = function (key) {\n    return !this.isX(key);\n  };\n\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\n    return !this.isX(key) && !this.isEpochs(key);\n  };\n  /**\r\n   * Returns whether the normalized stack option is enabled or not.\r\n   *\r\n   * To be enabled it must also have data.groups defined.\r\n   *\r\n   * @return {boolean}\r\n   */\n\n\n  ChartInternal.prototype.isStackNormalized = function () {\n    return this.config.data_stack_normalize && this.config.data_groups.length > 0;\n  };\n  /**\r\n   * Returns whether the axis is normalized or not.\r\n   *\r\n   * An axis is normalized as long as one of its associated target\r\n   * is normalized.\r\n   *\r\n   * @param axisId Axis ID (y or y2)\r\n   * @return {Boolean}\r\n   */\n\n\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      // shortcut\n      return false;\n    }\n\n    return $$.data.targets.filter(function (target) {\n      return $$.axis.getId(target.id) === axisId;\n    }).some(function (target) {\n      return $$.isTargetNormalized(target.id);\n    });\n  };\n  /**\r\n   * Returns whether the values for this target ID is normalized or not.\r\n   *\r\n   * To be normalized the option needs to be enabled and target needs\r\n   * to be defined in `data.groups`.\r\n   *\r\n   * @param targetId ID of the target\r\n   * @return {Boolean} True if the target is normalized, false otherwise.\r\n   */\n\n\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\n    var $$ = this;\n    return $$.isStackNormalized() && $$.config.data_groups.some(function (group) {\n      return group.includes(targetId);\n    });\n  };\n\n  ChartInternal.prototype.getXKey = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n  };\n  /**\r\n   * Get sum of visible data per index for given axis.\r\n   *\r\n   * Expect axisId to be either 'y' or 'y2'.\r\n   *\r\n   * @private\r\n   * @param axisId Compute sum for data associated to given axis.\r\n   * @return {Array}\r\n   */\n\n\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      return null;\n    }\n\n    var cached = $$.getFromCache('getTotalPerIndex');\n\n    if (cached !== undefined) {\n      return cached[axisId];\n    }\n\n    var sum = {\n      y: [],\n      y2: []\n    };\n    $$.data.targets // keep only target that are normalized\n    .filter(function (target) {\n      return $$.isTargetNormalized(target.id);\n    }) // keep only target that are visible\n    .filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }) // compute sum per axis\n    .forEach(function (target) {\n      var sumByAxis = sum[$$.axis.getId(target.id)];\n      target.values.forEach(function (v, i) {\n        if (!sumByAxis[i]) {\n          sumByAxis[i] = 0;\n        }\n\n        sumByAxis[i] += isNumber(v.value) ? v.value : 0;\n      });\n    });\n    $$.addToCache('getTotalPerIndex', sum);\n    return sum[axisId];\n  };\n  /**\r\n   * Get sum of visible data.\r\n   *\r\n   * Should be used for normalised data only since all values\r\n   * are expected to be positive.\r\n   *\r\n   * @private\r\n   * @return {Number}\r\n   */\n\n\n  ChartInternal.prototype.getTotalDataSum = function () {\n    var $$ = this;\n    var cached = $$.getFromCache('getTotalDataSum');\n\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    var totalDataSum = flattenArray($$.data.targets.filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }).map(function (target) {\n      return target.values;\n    })).map(function (d) {\n      return d.value;\n    }).reduce(function (p, c) {\n      return p + c;\n    }, 0);\n    $$.addToCache('getTotalDataSum', totalDataSum);\n    return totalDataSum;\n  };\n\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\n    var $$ = this,\n        xValues,\n        ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n    ids.forEach(function (id) {\n      if ($$.getXKey(id) === key) {\n        xValues = $$.data.xs[id];\n      }\n    });\n    return xValues;\n  };\n\n  ChartInternal.prototype.getXValue = function (id, i) {\n    var $$ = this;\n    return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n  };\n\n  ChartInternal.prototype.getOtherTargetXs = function () {\n    var $$ = this,\n        idsForX = Object.keys($$.data.xs);\n    return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n  };\n\n  ChartInternal.prototype.getOtherTargetX = function (index) {\n    var xs = this.getOtherTargetXs();\n    return xs && index < xs.length ? xs[index] : null;\n  };\n\n  ChartInternal.prototype.addXs = function (xs) {\n    var $$ = this;\n    Object.keys(xs).forEach(function (id) {\n      $$.config.data_xs[id] = xs[id];\n    });\n  };\n\n  ChartInternal.prototype.addName = function (data) {\n    var $$ = this,\n        name;\n\n    if (data) {\n      name = $$.config.data_names[data.id];\n      data.name = name !== undefined ? name : data.id;\n    }\n\n    return data;\n  };\n\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\n    var valueOnIndex = values.filter(function (v) {\n      return v.index === index;\n    });\n    return valueOnIndex.length ? valueOnIndex[0] : null;\n  };\n\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      t.values.forEach(function (v, i) {\n        v.x = $$.generateTargetX(x[i], t.id, i);\n      });\n      $$.data.xs[t.id] = x;\n    });\n  };\n\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      if (xs[t.id]) {\n        $$.updateTargetX([t], xs[t.id]);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\n    var $$ = this,\n        x;\n\n    if ($$.isTimeSeries()) {\n      x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n    } else if ($$.isCustomX() && !$$.isCategorized()) {\n      x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n    } else {\n      x = index;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.cloneTarget = function (target) {\n    return {\n      id: target.id,\n      id_org: target.id_org,\n      values: target.values.map(function (d) {\n        return {\n          x: d.x,\n          value: d.value,\n          id: d.id\n        };\n      })\n    };\n  };\n\n  ChartInternal.prototype.getMaxDataCount = function () {\n    var $$ = this;\n    return $$.d3.max($$.data.targets, function (t) {\n      return t.values.length;\n    });\n  };\n\n  ChartInternal.prototype.mapToIds = function (targets) {\n    return targets.map(function (d) {\n      return d.id;\n    });\n  };\n\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\n    var $$ = this;\n    return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n  };\n\n  ChartInternal.prototype.hasTarget = function (targets, id) {\n    var ids = this.mapToIds(targets),\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] === id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\n    return this.hiddenTargetIds.indexOf(targetId) < 0;\n  };\n\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\n    return this.hiddenLegendIds.indexOf(targetId) < 0;\n  };\n  /**\r\n   * Returns only visible targets.\r\n   *\r\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\r\n   *\r\n   * @return {Array}\r\n   */\n\n\n  ChartInternal.prototype.getTargetsToShow = function () {\n    var $$ = this;\n    return $$.filterTargetsToShow($$.data.targets);\n  };\n\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\n    var $$ = this;\n    return targets.filter(function (t) {\n      return $$.isTargetToShow(t.id);\n    });\n  };\n  /**\r\n   * @return {Array} Returns all the targets attached to the chart, visible or not\r\n   */\n\n\n  ChartInternal.prototype.getTargets = function () {\n    var $$ = this;\n    return $$.data.targets;\n  };\n\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\n    var $$ = this;\n    var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n      return t.values.map(function (v) {\n        return +v.x;\n      });\n    }))).values();\n    xs = $$.isTimeSeries() ? xs.map(function (x) {\n      return new Date(+x);\n    }) : xs.map(function (x) {\n      return +x;\n    });\n    return xs.sort(function (a, b) {\n      return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    });\n  };\n\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n      }\n    }\n\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\n    this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n      }\n    }\n  };\n\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\n    this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\n    var ys = {};\n    targets.forEach(function (t) {\n      ys[t.id] = [];\n      t.values.forEach(function (v) {\n        ys[t.id].push(v.value);\n      });\n    });\n    return ys;\n  };\n\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\n    var ids = Object.keys(targets),\n        i,\n        j,\n        values;\n\n    for (i = 0; i < ids.length; i++) {\n      values = targets[ids[i]].values;\n\n      for (j = 0; j < values.length; j++) {\n        if (checker(values[j].value)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v < 0;\n    });\n  };\n\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v > 0;\n    });\n  };\n\n  ChartInternal.prototype.isOrderDesc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n  };\n\n  ChartInternal.prototype.isOrderAsc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n  };\n\n  ChartInternal.prototype.getOrderFunction = function () {\n    var $$ = this,\n        config = $$.config,\n        orderAsc = $$.isOrderAsc(),\n        orderDesc = $$.isOrderDesc();\n\n    if (orderAsc || orderDesc) {\n      var reducer = function reducer(p, c) {\n        return p + Math.abs(c.value);\n      };\n\n      return function (t1, t2) {\n        var t1Sum = t1.values.reduce(reducer, 0),\n            t2Sum = t2.values.reduce(reducer, 0);\n        return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\n      };\n    } else if (isFunction(config.data_order)) {\n      return config.data_order;\n    } else if (isArray(config.data_order)) {\n      var order = config.data_order;\n      return function (t1, t2) {\n        return order.indexOf(t1.id) - order.indexOf(t2.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.orderTargets = function (targets) {\n    var fct = this.getOrderFunction();\n\n    if (fct) {\n      targets.sort(fct);\n    }\n\n    return targets;\n  };\n  /**\r\n   * Returns all the values from the given targets at the given index.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   */\n\n\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values.filter(function (v) {\n        return v.index === index;\n      });\n    }));\n  };\n\n  ChartInternal.prototype.filterByX = function (targets, x) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values;\n    })).filter(function (v) {\n      return v.x - x === 0;\n    });\n  };\n\n  ChartInternal.prototype.filterRemoveNull = function (data) {\n    return data.filter(function (d) {\n      return isValue(d.value);\n    });\n  };\n\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\n    return targets.map(function (t) {\n      return {\n        id: t.id,\n        id_org: t.id_org,\n        values: t.values.filter(function (v) {\n          return xDomain[0] <= v.x && v.x <= xDomain[1];\n        })\n      };\n    });\n  };\n\n  ChartInternal.prototype.hasDataLabel = function () {\n    var config = this.config;\n\n    if (typeof config.data_labels === 'boolean' && config.data_labels) {\n      return true;\n    } else if (typeof config.data_labels === 'object' && notEmpty(config.data_labels)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\n    var $$ = this,\n        lengths = [0, 0],\n        paddingCoef = 1.3;\n    $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n      return $$.dataLabelFormat(d.id)(d);\n    }).each(function (d, i) {\n      lengths[i] = getBBox(this)[key] * paddingCoef;\n    }).remove();\n    return lengths;\n  };\n  /**\r\n   * Returns true if the given data point is not arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\n\n\n  ChartInternal.prototype.isNoneArc = function (d) {\n    return this.hasTarget(this.data.targets, d.id);\n  };\n  /**\r\n   * Returns true if the given data point is arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\n\n\n  ChartInternal.prototype.isArc = function (d) {\n    return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n  };\n  /**\r\n   * Find the closest point from the given pos among the given targets or\r\n   * undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @return {Object|undefined}\r\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\n    var $$ = this; // for each target, find the closest point\n\n    var candidates = targets.map(function (t) {\n      return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal ? $$.horizontalDistance.bind($$) : $$.dist.bind($$), $$.config.point_sensitivity);\n    }).filter(function (v) {\n      return v;\n    }); // returns the closest of candidates\n\n    if (candidates.length === 0) {\n      return undefined;\n    } else if (candidates.length === 1) {\n      return candidates[0];\n    } else {\n      return $$.findClosest(candidates, pos, $$.dist.bind($$));\n    }\n  };\n  /**\r\n   * Find the closest point from the x value or undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} x A value on X axis\r\n   * @return {Object|undefined}\r\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\n    var closest;\n    var diff;\n    targets.forEach(function (t) {\n      t.values.forEach(function (d) {\n        var newDiff = Math.abs(x - d.x);\n\n        if (diff === undefined || newDiff < diff) {\n          closest = d;\n          diff = newDiff;\n        }\n      });\n    });\n    return closest;\n  };\n  /**\r\n   * Using given compute distance method, returns the closest data point from the\r\n   * given position.\r\n   *\r\n   * Giving optionally a minimum distance to satisfy.\r\n   *\r\n   * @param {Array} dataPoints List of DataPoints\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @param {Function} computeDist Function to compute distance between 2 points\r\n   * @param {Number} minDist Minimal distance to satisfy\r\n   * @return {Object|undefined} Closest data point\r\n   */\n\n\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist, minDist) {\n    if (minDist === void 0) {\n      minDist = Infinity;\n    }\n\n    var $$ = this;\n    var closest; // find closest bar\n\n    dataPoints.filter(function (v) {\n      return v && $$.isBarType(v.id);\n    }).forEach(function (v) {\n      if (!closest) {\n        var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n\n        if ($$.isWithinBar(pos, shape)) {\n          closest = v;\n        }\n      }\n    }); // find closest point from non-bar\n\n    dataPoints.filter(function (v) {\n      return v && !$$.isBarType(v.id);\n    }).forEach(function (v) {\n      var d = computeDist(v, pos);\n\n      if (d < minDist) {\n        minDist = d;\n        closest = v;\n      }\n    });\n    return closest;\n  };\n\n  ChartInternal.prototype.dist = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        yIndex = config.axis_rotated ? 0 : 1,\n        y = $$.circleY(data, data.index),\n        x = $$.x(data.x);\n    return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n  };\n\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        x = $$.x(data.x);\n    return Math.abs(x - pos[xIndex]);\n  };\n\n  ChartInternal.prototype.convertValuesToStep = function (values) {\n    var converted = [].concat(values),\n        i;\n\n    if (!this.isCategorized()) {\n      return values;\n    }\n\n    for (i = values.length + 1; 0 < i; i--) {\n      converted[i] = converted[i - 1];\n    }\n\n    converted[0] = {\n      x: converted[0].x - 1,\n      value: converted[0].value,\n      id: converted[0].id\n    };\n    converted[values.length + 1] = {\n      x: converted[values.length].x + 1,\n      value: converted[values.length].value,\n      id: converted[values.length].id\n    };\n    return converted;\n  };\n  /**\r\n   * Get ratio value\r\n   *\r\n   * @param {String} type Ratio for given type\r\n   * @param {Object} d Data value object\r\n   * @param {Boolean} asPercent Convert the return as percent or not\r\n   * @return {Number} Ratio value\r\n   * @private\r\n   */\n\n\n  ChartInternal.prototype.getRatio = function (type, d, asPercent) {\n    if (asPercent === void 0) {\n      asPercent = false;\n    }\n\n    var $$ = this;\n    var api = $$.api;\n    var ratio = 0;\n\n    if (d && api.data.shown.call(api).length) {\n      ratio = d.ratio || d.value;\n\n      if (type === 'arc') {\n        if ($$.hasType('gauge')) {\n          ratio = (d.endAngle - d.startAngle) / (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\n        } else {\n          var total = $$.getTotalDataSum();\n          ratio = d.value / total;\n        }\n      } else if (type === 'index') {\n        var total = $$.getTotalPerIndex($$.axis.getId(d.id));\n        d.ratio = isNumber(d.value) && total && total[d.index] > 0 ? d.value / total[d.index] : 0;\n        ratio = d.ratio;\n      }\n    }\n\n    return asPercent && ratio ? ratio * 100 : ratio;\n  };\n\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\n    var $$ = this,\n        config = $$.config,\n        current = config['data_' + name];\n\n    if (typeof attrs === 'undefined') {\n      return current;\n    }\n\n    Object.keys(attrs).forEach(function (id) {\n      current[id] = attrs[id];\n    });\n    $$.redraw({\n      withLegend: true\n    });\n    return current;\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\n    var $$ = this;\n\n    if (targets) {\n      // filter loading targets if needed\n      if (args.filter) {\n        targets = targets.filter(args.filter);\n      } // set type if args.types || args.type specified\n\n\n      if (args.type || args.types) {\n        targets.forEach(function (t) {\n          var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n          $$.setTargetType(t.id, type);\n        });\n      } // Update/Add data\n\n\n      $$.data.targets.forEach(function (d) {\n        for (var i = 0; i < targets.length; i++) {\n          if (d.id === targets[i].id) {\n            d.values = targets[i].values;\n            targets.splice(i, 1);\n            break;\n          }\n        }\n      });\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n\n    if (args.done) {\n      args.done();\n    }\n  };\n\n  ChartInternal.prototype.loadFromArgs = function (args) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (args.data) {\n      $$.load($$.convertDataToTargets(args.data), args);\n    } else if (args.url) {\n      $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n        $$.load($$.convertDataToTargets(data), args);\n      });\n    } else if (args.json) {\n      $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n    } else if (args.rows) {\n      $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n    } else if (args.columns) {\n      $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n    } else {\n      $$.load(null, args);\n    }\n  };\n\n  ChartInternal.prototype.unload = function (targetIds, done) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (!done) {\n      done = function done() {};\n    } // filter existing target\n\n\n    targetIds = targetIds.filter(function (id) {\n      return $$.hasTarget($$.data.targets, id);\n    }); // If no target, call done and return\n\n    if (!targetIds || targetIds.length === 0) {\n      done();\n      return;\n    }\n\n    $$.svg.selectAll(targetIds.map(function (id) {\n      return $$.selectorTarget(id);\n    })).transition().style('opacity', 0).remove().call($$.endall, done);\n    targetIds.forEach(function (id) {\n      // Reset fadein for future load\n      $$.withoutFadeIn[id] = false; // Remove target's elements\n\n      if ($$.legend) {\n        $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n      } // Remove target\n\n\n      $$.data.targets = $$.data.targets.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasNegativeValue;\n\n    if (config.data_groups.length > 0) {\n      hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider negative values\n\n        if (hasNegativeValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v < 0 ? v : 0;\n          });\n        } // Compute min\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.min(Object.keys(ys).map(function (key) {\n      return $$.d3.min(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasPositiveValue;\n\n    if (config.data_groups.length > 0) {\n      hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider positive values\n\n        if (hasPositiveValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v > 0 ? v : 0;\n          });\n        } // Compute max\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.max(Object.keys(ys).map(function (key) {\n      return $$.d3.max(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isAxisNormalized(axisId)) {\n      return [0, 100];\n    }\n\n    var targetsByAxisId = targets.filter(function (t) {\n      return $$.axis.getId(t.id) === axisId;\n    }),\n        yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n        yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n        yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n        yDomainMin = $$.getYDomainMin(yTargets),\n        yDomainMax = $$.getYDomainMax(yTargets),\n        domain,\n        domainLength,\n        padding_top,\n        padding_bottom,\n        center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n        yDomainAbs,\n        lengths,\n        diff,\n        ratio,\n        isAllPositive,\n        isAllNegative,\n        isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n        isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n        showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n        showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated; // MEMO: avoid inverting domain unexpectedly\n\n    yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n    yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n\n    if (yTargets.length === 0) {\n      // use current domain if target of axisId is none\n      return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n    }\n\n    if (isNaN(yDomainMin)) {\n      // set minimum to zero when not number\n      yDomainMin = 0;\n    }\n\n    if (isNaN(yDomainMax)) {\n      // set maximum to have same value as yDomainMin\n      yDomainMax = yDomainMin;\n    }\n\n    if (yDomainMin === yDomainMax) {\n      yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n    }\n\n    isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n    isAllNegative = yDomainMin <= 0 && yDomainMax <= 0; // Cancel zerobased if axis_*_min / axis_*_max specified\n\n    if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n      isZeroBased = false;\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        yDomainMin = 0;\n      }\n\n      if (isAllNegative) {\n        yDomainMax = 0;\n      }\n    }\n\n    domainLength = Math.abs(yDomainMax - yDomainMin);\n    padding_top = padding_bottom = domainLength * 0.1;\n\n    if (typeof center !== 'undefined') {\n      yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n      yDomainMax = center + yDomainAbs;\n      yDomainMin = center - yDomainAbs;\n    } // add padding for data label\n\n\n    if (showHorizontalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n      diff = diffDomain($$.y.range());\n      ratio = [lengths[0] / diff, lengths[1] / diff];\n      padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n      padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n    } else if (showVerticalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n      var pixelsToAxisPadding = $$.getY(config[\"axis_\" + axisId + \"_type\"], // input domain as pixels\n      [0, config.axis_rotated ? $$.width : $$.height], // output range as axis padding\n      [0, domainLength]);\n      padding_top += pixelsToAxisPadding(lengths[1]);\n      padding_bottom += pixelsToAxisPadding(lengths[0]);\n    }\n\n    if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n    }\n\n    if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        padding_bottom = yDomainMin;\n      }\n\n      if (isAllNegative) {\n        padding_top = -yDomainMax;\n      }\n    }\n\n    domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n    return isInverted ? domain.reverse() : domain;\n  };\n\n  ChartInternal.prototype.getXDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n      return $$.d3.min(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n      return $$.d3.max(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\n    var $$ = this,\n        config = $$.config,\n        diff = domain[1] - domain[0],\n        maxDataCount,\n        padding,\n        paddingLeft,\n        paddingRight;\n\n    if ($$.isCategorized()) {\n      padding = 0;\n    } else if ($$.hasType('bar')) {\n      maxDataCount = $$.getMaxDataCount();\n      padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n    } else {\n      padding = diff * 0.01;\n    }\n\n    if (typeof config.axis_x_padding === 'object' && notEmpty(config.axis_x_padding)) {\n      paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n      paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n    } else if (typeof config.axis_x_padding === 'number') {\n      paddingLeft = paddingRight = config.axis_x_padding;\n    } else {\n      paddingLeft = paddingRight = padding;\n    }\n\n    return {\n      left: paddingLeft,\n      right: paddingRight\n    };\n  };\n\n  ChartInternal.prototype.getXDomain = function (targets) {\n    var $$ = this,\n        xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n        firstX = xDomain[0],\n        lastX = xDomain[1],\n        padding = $$.getXDomainPadding(xDomain),\n        min = 0,\n        max = 0; // show center of x domain if min and max are the same\n\n    if (firstX - lastX === 0 && !$$.isCategorized()) {\n      if ($$.isTimeSeries()) {\n        firstX = new Date(firstX.getTime() * 0.5);\n        lastX = new Date(lastX.getTime() * 1.5);\n      } else {\n        firstX = firstX === 0 ? 1 : firstX * 0.5;\n        lastX = lastX === 0 ? -1 : lastX * 1.5;\n      }\n    }\n\n    if (firstX || firstX === 0) {\n      min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n    }\n\n    if (lastX || lastX === 0) {\n      max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n    }\n\n    return [min, max];\n  };\n\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n    var $$ = this,\n        config = $$.config;\n\n    if (withUpdateOrgXDomain) {\n      $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n      $$.orgXDomain = $$.x.domain();\n\n      if (config.zoom_enabled) {\n        $$.zoom.update();\n      }\n\n      $$.subX.domain($$.x.domain());\n\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    }\n\n    if (withUpdateXDomain) {\n      $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.selectionAsValue());\n    } // Trim domain when too big by zoom mousemove event\n\n\n    if (withTrim) {\n      $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n    }\n\n    return $$.x.domain();\n  };\n\n  ChartInternal.prototype.trimXDomain = function (domain) {\n    var zoomDomain = this.getZoomDomain(),\n        min = zoomDomain[0],\n        max = zoomDomain[1];\n\n    if (domain[0] <= min) {\n      domain[1] = +domain[1] + (min - domain[0]);\n      domain[0] = min;\n    }\n\n    if (max <= domain[1]) {\n      domain[0] = +domain[0] - (domain[1] - max);\n      domain[1] = max;\n    }\n\n    return domain;\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\n    var $$ = this,\n        config = $$.config,\n        main = $$.main,\n        d3 = $$.d3;\n    var sx, sy, mx, my, minX, maxX, minY, maxY;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    if (!config.data_selection_multiple) {\n      return;\n    } // skip when single selection because drag is used for multiple selection\n\n\n    sx = $$.dragStart[0];\n    sy = $$.dragStart[1];\n    mx = mouse[0];\n    my = mouse[1];\n    minX = Math.min(sx, mx);\n    maxX = Math.max(sx, mx);\n    minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n    maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n    main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY); // TODO: binary search when multiple xs\n\n    main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      if (!config.data_selection_isselectable(d)) {\n        return;\n      }\n\n      var shape = d3.select(this),\n          isSelected = shape.classed(CLASS.SELECTED),\n          isIncluded = shape.classed(CLASS.INCLUDED),\n          _x,\n          _y,\n          _w,\n          _h,\n          toggle,\n          isWithin = false,\n          box;\n\n      if (shape.classed(CLASS.circle)) {\n        _x = shape.attr('cx') * 1;\n        _y = shape.attr('cy') * 1;\n        toggle = $$.togglePoint;\n        isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n      } else if (shape.classed(CLASS.bar)) {\n        box = getPathBox(this);\n        _x = box.x;\n        _y = box.y;\n        _w = box.width;\n        _h = box.height;\n        toggle = $$.togglePath;\n        isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n      } else {\n        // line/area selection not supported yet\n        return;\n      }\n\n      if (isWithin ^ isIncluded) {\n        shape.classed(CLASS.INCLUDED, !isIncluded); // TODO: included/unincluded callback here\n\n        shape.classed(CLASS.SELECTED, !isSelected);\n        toggle.call($$, !isSelected, shape, d, i);\n      }\n    });\n  };\n\n  ChartInternal.prototype.dragstart = function (mouse) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.dragStart = mouse;\n    $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n    $$.dragging = true;\n  };\n\n  ChartInternal.prototype.dragend = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n    $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n    $$.dragging = false;\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\n    var $$ = this,\n        formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n        formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n    return function (v, ratio, id) {\n      var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n      return format.call($$, v, ratio);\n    };\n  };\n\n  ChartInternal.prototype.yFormat = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.y2Format = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.defaultValueFormat = function (v) {\n    return isValue(v) ? +v : '';\n  };\n\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\n    return (ratio * 100).toFixed(1) + '%';\n  };\n\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\n    var $$ = this,\n        data_labels = $$.config.data_labels,\n        format,\n        defaultFormat = function defaultFormat(v) {\n      return isValue(v) ? +v : '';\n    }; // find format according to axis id\n\n\n    if (typeof data_labels.format === 'function') {\n      format = data_labels.format;\n    } else if (typeof data_labels.format === 'object') {\n      if (data_labels.format[targetId]) {\n        format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n      } else {\n        format = function format() {\n          return '';\n        };\n      }\n    } else {\n      format = defaultFormat;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.initGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    $$.grid = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid);\n\n    if (config.grid_x_show) {\n      $$.grid.append('g').attr('class', CLASS.xgrids);\n    }\n\n    if (config.grid_y_show) {\n      $$.grid.append('g').attr('class', CLASS.ygrids);\n    }\n\n    if (config.grid_focus_show) {\n      $$.grid.append('g').attr('class', CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n    }\n\n    $$.xgrid = d3.selectAll([]);\n\n    if (!config.grid_lines_front) {\n      $$.initGridLines();\n    }\n  };\n\n  ChartInternal.prototype.initGridLines = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.gridLines = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n    $$.gridLines.append('g').attr('class', CLASS.xgridLines);\n    $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n    $$.xgridLines = d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n        tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n    $$.xgridAttr = config.axis_rotated ? {\n      x1: 0,\n      x2: $$.width,\n      y1: function y1(d) {\n        return $$.x(d) - tickOffset;\n      },\n      y2: function y2(d) {\n        return $$.x(d) - tickOffset;\n      }\n    } : {\n      x1: function x1(d) {\n        return $$.x(d) + tickOffset;\n      },\n      x2: function x2(d) {\n        return $$.x(d) + tickOffset;\n      },\n      y1: 0,\n      y2: $$.height\n    };\n\n    $$.xgridAttr.opacity = function () {\n      var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\n      return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n    };\n\n    var xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n    var xgridEnter = xgrid.enter().append('line').attr('class', CLASS.xgrid).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', 0);\n    $$.xgrid = xgridEnter.merge(xgrid);\n\n    if (!withoutUpdate) {\n      $$.xgrid.attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n    }\n\n    xgrid.exit().remove();\n  };\n\n  ChartInternal.prototype.updateYGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n    var ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n    var ygridEnter = ygrid.enter().append('line') // TODO: x1, x2, y1, y2, opacity need to be set here maybe\n    .attr('class', CLASS.ygrid);\n    $$.ygrid = ygridEnter.merge(ygrid);\n    $$.ygrid.attr('x1', config.axis_rotated ? $$.y : 0).attr('x2', config.axis_rotated ? $$.y : $$.width).attr('y1', config.axis_rotated ? 0 : $$.y).attr('y2', config.axis_rotated ? $$.height : $$.y);\n    ygrid.exit().remove();\n    $$.smoothLines($$.ygrid, 'grid');\n  };\n\n  ChartInternal.prototype.gridTextAnchor = function (d) {\n    return d.position ? d.position : 'end';\n  };\n\n  ChartInternal.prototype.gridTextDx = function (d) {\n    return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n  };\n\n  ChartInternal.prototype.xGridTextX = function (d) {\n    return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n  };\n\n  ChartInternal.prototype.yGridTextX = function (d) {\n    return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n  };\n\n  ChartInternal.prototype.updateGrid = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        xgridLine,\n        xgridLineEnter,\n        ygridLine,\n        ygridLineEnter,\n        xv = $$.xv.bind($$),\n        yv = $$.yv.bind($$),\n        xGridTextX = $$.xGridTextX.bind($$),\n        yGridTextX = $$.yGridTextX.bind($$); // hide if arc type\n\n    $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n\n    if (config.grid_x_show) {\n      $$.updateXGrid();\n    }\n\n    xgridLine = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines); // enter\n\n    xgridLineEnter = xgridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    xgridLineEnter.append('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 0);\n    xgridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').attr('x', config.axis_rotated ? yGridTextX : xGridTextX).attr('y', xv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // udpate\n\n    $$.xgridLines = xgridLineEnter.merge(xgridLine); // done in d3.transition() of the end of this function\n    // exit\n\n    xgridLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Y-Grid\n\n    if (config.grid_y_show) {\n      $$.updateYGrid();\n    }\n\n    ygridLine = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines); // enter\n\n    ygridLineEnter = ygridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    ygridLineEnter.append('line').attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 0);\n    ygridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').attr('x', config.axis_rotated ? xGridTextX : yGridTextX).attr('y', yv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // update\n\n    $$.ygridLines = ygridLineEnter.merge(ygridLine);\n    $$.ygridLines.select('line').transition().duration(duration).attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 1);\n    $$.ygridLines.select('text').transition().duration(duration).attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr('y', yv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1); // exit\n\n    ygridLine.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\n    var $$ = this,\n        config = $$.config,\n        xv = $$.xv.bind($$),\n        lines = $$.xgridLines.select('line'),\n        texts = $$.xgridLines.select('text');\n    return [(withTransition ? lines.transition(transition) : lines).attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 1), (withTransition ? texts.transition(transition) : texts).attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr('y', xv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\n    var $$ = this,\n        config = $$.config,\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n        xx = $$.xx.bind($$);\n\n    if (!config.tooltip_show) {\n      return;\n    } // Hide when stanford plot exists\n\n\n    if ($$.hasType('stanford') || $$.hasArcType()) {\n      return;\n    }\n\n    focusEl.style('visibility', 'visible').data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n    $$.smoothLines(focusEl, 'grid');\n  };\n\n  ChartInternal.prototype.hideXGridFocus = function () {\n    this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.updateXgridFocus = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('line.' + CLASS.xgridFocus).attr('x1', config.axis_rotated ? 0 : -10).attr('x2', config.axis_rotated ? $$.width : -10).attr('y1', config.axis_rotated ? -10 : 0).attr('y2', config.axis_rotated ? -10 : $$.height);\n  };\n\n  ChartInternal.prototype.generateGridData = function (type, scale) {\n    var $$ = this,\n        gridData = [],\n        xDomain,\n        firstYear,\n        lastYear,\n        i,\n        tickNum = $$.main.select('.' + CLASS.axisX).selectAll('.tick').size();\n\n    if (type === 'year') {\n      xDomain = $$.getXDomain();\n      firstYear = xDomain[0].getFullYear();\n      lastYear = xDomain[1].getFullYear();\n\n      for (i = firstYear; i <= lastYear; i++) {\n        gridData.push(new Date(i + '-01-01 00:00:00'));\n      }\n    } else {\n      gridData = scale.ticks(10);\n\n      if (gridData.length > tickNum) {\n        // use only int\n        gridData = gridData.filter(function (d) {\n          return ('' + d).indexOf('.') < 0;\n        });\n      }\n    }\n\n    return gridData;\n  };\n\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\n    return params ? function (line) {\n      var found = false;\n      [].concat(params).forEach(function (param) {\n        if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n          found = true;\n        }\n      });\n      return found;\n    } : function () {\n      return true;\n    };\n  };\n\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\n    var $$ = this,\n        config = $$.config,\n        toRemove = $$.getGridFilterToRemove(params),\n        toShow = function toShow(line) {\n      return !toRemove(line);\n    },\n        classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n        classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n\n    $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n\n    if (forX) {\n      config.grid_x_lines = config.grid_x_lines.filter(toShow);\n    } else {\n      config.grid_y_lines = config.grid_y_lines.filter(toShow);\n    }\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.eventRects).style('fill-opacity', 0);\n    $$.eventRect = $$.main.select('.' + CLASS.eventRects).append('rect').attr('class', CLASS.eventRect); // event rect handle zoom event as well\n\n    if (config.zoom_enabled && $$.zoom) {\n      $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\n\n      if (config.zoom_initialRange) {\n        // WORKAROUND: Add transition to apply transform immediately when no subchart\n        $$.eventRect.transition().duration(0).call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\n      }\n    }\n  };\n\n  ChartInternal.prototype.redrawEventRect = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n\n    function mouseout() {\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n      $$.hideXGridFocus();\n      $$.hideTooltip();\n      $$.unexpandCircles();\n      $$.unexpandBars();\n    }\n\n    var isHoveringDataPoint = function isHoveringDataPoint(mouse, closest) {\n      return closest && ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity);\n    };\n\n    var withName = function withName(d) {\n      return d ? $$.addName(Object.assign({}, d)) : null;\n    }; // rects for mouseover\n\n\n    $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null);\n    $$.eventRect.attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).on('mouseout', config.interaction_enabled ? function () {\n      if (!config) {\n        return;\n      } // chart is destroyed\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      if ($$.mouseover) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      mouseout();\n    } : null).on('mousemove', config.interaction_enabled ? function () {\n      // do nothing when dragging\n      if ($$.dragging) {\n        return;\n      }\n\n      var targetsToShow = $$.getTargetsToShow(); // do nothing if arc type\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n      var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest); // ensure onmouseout is always called if mousemove switch between 2 targets\n\n      if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id || closest.index !== $$.mouseover.index)) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      if (closest && !$$.mouseover) {\n        config.data_onmouseover.call($$.api, closest);\n        $$.mouseover = closest;\n      } // show cursor as pointer if we're hovering a data point close enough\n\n\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', isMouseCloseToDataPoint ? 'pointer' : null); // if tooltip not grouped, we want to display only data from closest data point\n\n      var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow); // find data to highlight\n\n      var selectedData;\n\n      if (showSingleDataPoint) {\n        if (closest) {\n          selectedData = [closest];\n        }\n      } else {\n        var closestByX = void 0;\n\n        if (closest) {\n          // reuse closest value\n          closestByX = closest;\n        } else {\n          // try to find the closest value by X values from the mouse position\n          var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\n          closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\n        } // highlight all data for this 'x' value\n\n\n        if (closestByX) {\n          selectedData = $$.filterByX(targetsToShow, closestByX.x);\n        }\n      } // ensure we have data to show\n\n\n      if (!selectedData || selectedData.length === 0) {\n        return mouseout();\n      } // inject names for each point\n\n\n      selectedData = selectedData.map(withName); // show tooltip\n\n      $$.showTooltip(selectedData, this); // expand points\n\n      if (config.point_focus_expand_enabled) {\n        $$.unexpandCircles();\n        selectedData.forEach(function (d) {\n          $$.expandCircles(d.index, d.id, false);\n        });\n      } // expand bars\n\n\n      $$.unexpandBars();\n      selectedData.forEach(function (d) {\n        $$.expandBars(d.index, d.id, false);\n      }); // Show xgrid focus line\n\n      $$.showXGridFocus(selectedData);\n    } : null).on('click', config.interaction_enabled ? function () {\n      var targetsToShow = $$.getTargetsToShow();\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n\n      if (!isHoveringDataPoint(mouse, closest)) {\n        return;\n      } // select if selection enabled\n\n\n      var sameXData;\n\n      if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\n        sameXData = [closest];\n      } else {\n        sameXData = $$.filterByX(targetsToShow, closest.x);\n      } // toggle selected state\n\n\n      sameXData.forEach(function (d) {\n        $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.shape + '-' + d.index).each(function () {\n          if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n            $$.toggleShape(this, d, d.index);\n          }\n        });\n      }); // call data_onclick on the closest data point\n\n      if (closest) {\n        var shape = $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).select('.' + CLASS.shape + '-' + closest.index);\n        config.data_onclick.call($$.api, closest, shape.node());\n      }\n    } : null).call(config.interaction_enabled && config.data_selection_draggable && $$.drag ? d3.drag().on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('start', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('end', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n\n  ChartInternal.prototype.getMousePosition = function (data) {\n    var $$ = this;\n    return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\n  };\n\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\n    var $$ = this,\n        selector = '.' + CLASS.eventRect,\n        eventRect = $$.main.select(selector).node(),\n        box = eventRect.getBoundingClientRect(),\n        x = box.left + (mouse ? mouse[0] : 0),\n        y = box.top + (mouse ? mouse[1] : 0),\n        event = document.createEvent('MouseEvents');\n    event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n    eventRect.dispatchEvent(event);\n  };\n\n  ChartInternal.prototype.initLegend = function () {\n    var $$ = this;\n    $$.legendItemTextBox = {};\n    $$.legendHasRendered = false;\n    $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\n\n    if (!$$.config.legend_show) {\n      $$.legend.style('visibility', 'hidden');\n      $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n      return;\n    } // MEMO: call here to update legend box and tranlate for all\n    // MEMO: translate will be updated by this, so transform not needed in updateLegend()\n\n\n    $$.updateLegendWithDefaults();\n  };\n\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\n    var $$ = this;\n    $$.updateLegend($$.mapToIds($$.data.targets), {\n      withTransform: false,\n      withTransitionForTransform: false,\n      withTransition: false\n    });\n  };\n\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\n    var $$ = this,\n        config = $$.config,\n        insetLegendPosition = {\n      top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n      left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n    };\n    $$.margin3 = {\n      top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n      right: NaN,\n      bottom: 0,\n      left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n    };\n  };\n\n  ChartInternal.prototype.transformLegend = function (withTransition) {\n    var $$ = this;\n    (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\n  };\n\n  ChartInternal.prototype.updateLegendStep = function (step) {\n    this.legendStep = step;\n  };\n\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\n    this.legendItemWidth = w;\n  };\n\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\n    this.legendItemHeight = h;\n  };\n\n  ChartInternal.prototype.getLegendWidth = function () {\n    var $$ = this;\n    return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n  };\n\n  ChartInternal.prototype.getLegendHeight = function () {\n    var $$ = this,\n        h = 0;\n\n    if ($$.config.legend_show) {\n      if ($$.isLegendRight) {\n        h = $$.currentHeight;\n      } else {\n        h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n      }\n    }\n\n    return h;\n  };\n\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n  };\n\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n  };\n\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\n    var $$ = this;\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n      return targetIds.indexOf(id) >= 0;\n    }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n      var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n      return opacity.call($$, $$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.revertLegend = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n      return $$.opacityForLegend(d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.showLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (!config.legend_show) {\n      config.legend_show = true;\n      $$.legend.style('visibility', 'visible');\n\n      if (!$$.legendHasRendered) {\n        $$.updateLegendWithDefaults();\n      }\n    }\n\n    $$.removeHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n      return $$.opacityForLegend($$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.hideLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.legend_show && isEmpty(targetIds)) {\n      config.legend_show = false;\n      $$.legend.style('visibility', 'hidden');\n    }\n\n    $$.addHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\n    this.legendItemTextBox = {};\n  };\n\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\n    var $$ = this,\n        config = $$.config;\n    var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n    var paddingTop = 4,\n        paddingRight = 10,\n        maxWidth = 0,\n        maxHeight = 0,\n        posMin = 10,\n        tileWidth = config.legend_item_tile_width + 5;\n    var l,\n        totalLength = 0,\n        offsets = {},\n        widths = {},\n        heights = {},\n        margins = [0],\n        steps = {},\n        step = 0;\n    var withTransition, withTransitionForTransform;\n    var texts, rects, tiles, background; // Skip elements when their name is set to null\n\n    targetIds = targetIds.filter(function (id) {\n      return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n    });\n    options = options || {};\n    withTransition = getOption(options, 'withTransition', true);\n    withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\n\n    function getTextBox(textElement, id) {\n      if (!$$.legendItemTextBox[id]) {\n        $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n      }\n\n      return $$.legendItemTextBox[id];\n    }\n\n    function updatePositions(textElement, id, index) {\n      var reset = index === 0,\n          isLast = index === targetIds.length - 1,\n          box = getTextBox(textElement, id),\n          itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n          itemHeight = box.height + paddingTop,\n          itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n          areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n          margin,\n          maxLength; // MEMO: care about condifion of step, totalLength\n\n      function updateValues(id, withoutStep) {\n        if (!withoutStep) {\n          margin = (areaLength - totalLength - itemLength) / 2;\n\n          if (margin < posMin) {\n            margin = (areaLength - itemLength) / 2;\n            totalLength = 0;\n            step++;\n          }\n        }\n\n        steps[id] = step;\n        margins[step] = $$.isLegendInset ? 10 : margin;\n        offsets[id] = totalLength;\n        totalLength += itemLength;\n      }\n\n      if (reset) {\n        totalLength = 0;\n        step = 0;\n        maxWidth = 0;\n        maxHeight = 0;\n      }\n\n      if (config.legend_show && !$$.isLegendToShow(id)) {\n        widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n        return;\n      }\n\n      widths[id] = itemWidth;\n      heights[id] = itemHeight;\n\n      if (!maxWidth || itemWidth >= maxWidth) {\n        maxWidth = itemWidth;\n      }\n\n      if (!maxHeight || itemHeight >= maxHeight) {\n        maxHeight = itemHeight;\n      }\n\n      maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n\n      if (config.legend_equally) {\n        Object.keys(widths).forEach(function (id) {\n          widths[id] = maxWidth;\n        });\n        Object.keys(heights).forEach(function (id) {\n          heights[id] = maxHeight;\n        });\n        margin = (areaLength - maxLength * targetIds.length) / 2;\n\n        if (margin < posMin) {\n          totalLength = 0;\n          step = 0;\n          targetIds.forEach(function (id) {\n            updateValues(id);\n          });\n        } else {\n          updateValues(id, true);\n        }\n      } else {\n        updateValues(id);\n      }\n    }\n\n    if ($$.isLegendInset) {\n      step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n      $$.updateLegendStep(step);\n    }\n\n    if ($$.isLegendRight) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else if ($$.isLegendInset) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id] + 10;\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else {\n      xForLegend = function xForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return maxHeight * steps[id];\n      };\n    }\n\n    xForLegendText = function xForLegendText(id, i) {\n      return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n    };\n\n    yForLegendText = function yForLegendText(id, i) {\n      return yForLegend(id, i) + 9;\n    };\n\n    xForLegendRect = function xForLegendRect(id, i) {\n      return xForLegend(id, i);\n    };\n\n    yForLegendRect = function yForLegendRect(id, i) {\n      return yForLegend(id, i) - 5;\n    };\n\n    x1ForLegendTile = function x1ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2;\n    };\n\n    x2ForLegendTile = function x2ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n    };\n\n    yForLegendTile = function yForLegendTile(id, i) {\n      return yForLegend(id, i) + 4;\n    }; // Define g for legend area\n\n\n    l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n      return $$.generateClass(CLASS.legendItem, id);\n    }).style('visibility', function (id) {\n      return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n    }).style('cursor', function () {\n      return config.interaction_enabled ? 'pointer' : 'auto';\n    }).on('click', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onclick) {\n        config.legend_item_onclick.call($$, id);\n      } else {\n        if ($$.d3.event.altKey) {\n          $$.api.hide();\n          $$.api.show(id);\n        } else {\n          $$.api.toggle(id);\n          $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n        }\n      }\n    } : null).on('mouseover', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseover) {\n        config.legend_item_onmouseover.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n\n        if (!$$.transiting && $$.isTargetToShow(id)) {\n          $$.api.focus(id);\n        }\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseout) {\n        config.legend_item_onmouseout.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n        $$.api.revert();\n      }\n    } : null);\n    l.append('text').text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }).each(function (id, i) {\n      updatePositions(this, id, i);\n    }).style('pointer-events', 'none').attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n    l.append('rect').attr('class', CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n    l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style('pointer-events', 'none').attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height); // Set background for inset legend\n\n    background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n\n    if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n      background = $$.legend.insert('g', '.' + CLASS.legendItem).attr('class', CLASS.legendBackground).append('rect');\n    }\n\n    texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }) // MEMO: needed for update\n    .each(function (id, i) {\n      updatePositions(this, id, i);\n    });\n    (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n    rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n    (withTransition ? rects.transition() : rects).attr('width', function (id) {\n      return widths[id];\n    }).attr('height', function (id) {\n      return heights[id];\n    }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n    tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n    (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n      return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0));\n    } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n\n    if (background) {\n      (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n    } // toggle legend state\n\n\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n      return !$$.isTargetToShow(id);\n    }); // Update all to reflect change of legend\n\n    $$.updateLegendItemWidth(maxWidth);\n    $$.updateLegendItemHeight(maxHeight);\n    $$.updateLegendStep(step); // Update size and scale\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize(); // Update g positions\n\n    $$.transformAll(withTransitionForTransform, transitions);\n    $$.legendHasRendered = true;\n  };\n\n  ChartInternal.prototype.initRegion = function () {\n    var $$ = this;\n    $$.region = $$.main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.regions);\n  };\n\n  ChartInternal.prototype.updateRegion = function (duration) {\n    var $$ = this,\n        config = $$.config; // hide if arc type\n\n    $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    var mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n    var g = mainRegion.enter().append('g');\n    g.append('rect').attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    });\n    g.append('text').text($$.labelRegion.bind($$));\n    $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\n    mainRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\n    var $$ = this,\n        regions = $$.mainRegion,\n        regionLabels = $$.mainRegion.selectAll('text');\n    return [(withTransition ? regions.transition(transition) : regions).attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    }), (withTransition ? regionLabels.transition(transition) : regionLabels).attr('x', $$.labelOffsetX.bind($$)).attr('y', $$.labelOffsetY.bind($$)).attr('transform', $$.labelTransform.bind($$)).attr('style', 'text-anchor: left;')];\n  };\n\n  ChartInternal.prototype.regionX = function (d) {\n    var $$ = this,\n        config = $$.config,\n        xPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n    } else {\n      xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.regionY = function (d) {\n    var $$ = this,\n        config = $$.config,\n        yPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n    } else {\n      yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.regionWidth = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = $$.regionX(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n    } else {\n      end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.regionHeight = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = this.regionY(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n    } else {\n      end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.isRegionOnX = function (d) {\n    return !d.axis || d.axis === 'x';\n  };\n\n  ChartInternal.prototype.labelRegion = function (d) {\n    return 'label' in d ? d.label : '';\n  };\n\n  ChartInternal.prototype.labelTransform = function (d) {\n    return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\n  };\n\n  ChartInternal.prototype.labelOffsetX = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? this.regionY(d) + paddingY : this.regionX(d) + paddingX;\n  };\n\n  ChartInternal.prototype.labelOffsetY = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? -(this.regionX(d) + paddingX) : this.regionY(d) + 10 + paddingY;\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\n    var PROJECTION = [0.01, 10];\n\n    if (!linearScale) {\n      linearScale = d3.scaleLinear();\n      linearScale.range(PROJECTION);\n    }\n\n    if (!logScale) {\n      logScale = d3.scaleLog();\n      logScale.domain(PROJECTION);\n      logScale.nice();\n    } // copied from https://github.com/compute-io/logspace\n\n\n    function logspace(a, b, len) {\n      var arr, end, tmp, d;\n\n      if (arguments.length < 3) {\n        len = 10;\n      } else {\n        if (len === 0) {\n          return [];\n        }\n      } // Calculate the increment:\n\n\n      end = len - 1;\n      d = (b - a) / end; // Build the output array...\n\n      arr = new Array(len);\n      tmp = a;\n      arr[0] = Math.pow(10, tmp);\n\n      for (var i = 1; i < end; i++) {\n        tmp += d;\n        arr[i] = Math.pow(10, tmp);\n      }\n\n      arr[end] = Math.pow(10, b);\n      return arr;\n    }\n\n    function scale(x) {\n      return logScale(linearScale(x));\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) {\n        return linearScale.domain();\n      }\n\n      linearScale.domain(x);\n      return scale;\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) {\n        return logScale.range();\n      }\n\n      logScale.range(x);\n      return scale;\n    };\n\n    scale.ticks = function (m) {\n      return logspace(-2, 1, m || 10).map(function (v) {\n        return linearScale.invert(v);\n      });\n    };\n\n    scale.copy = function () {\n      return c3LogScale(d3, linearScale.copy(), logScale.copy());\n    };\n\n    return scale;\n  }\n\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\n    return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([min, max]);\n  };\n\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\n    var $$ = this,\n        scale = $$.getScale(min, max, $$.isTimeSeries()),\n        _scale = domain ? scale.domain(domain) : scale,\n        key; // Define customized scale if categorized axis\n\n\n    if ($$.isCategorized()) {\n      offset = offset || function () {\n        return 0;\n      };\n\n      scale = function scale(d, raw) {\n        var v = _scale(d) + offset(d);\n        return raw ? v : Math.ceil(v);\n      };\n    } else {\n      scale = function scale(d, raw) {\n        var v = _scale(d);\n\n        return raw ? v : Math.ceil(v);\n      };\n    } // define functions\n\n\n    for (key in _scale) {\n      scale[key] = _scale[key];\n    }\n\n    scale.orgDomain = function () {\n      return _scale.domain();\n    }; // define custom domain() for categorized axis\n\n\n    if ($$.isCategorized()) {\n      scale.domain = function (domain) {\n        if (!arguments.length) {\n          domain = this.orgDomain();\n          return [domain[0], domain[1] + 1];\n        }\n\n        _scale.domain(domain);\n\n        return scale;\n      };\n    }\n\n    return scale;\n  };\n  /**\r\n   * Creates and configures a D3 scale instance for the given type.\r\n   *\r\n   * By defaults it returns a Linear scale.\r\n   *\r\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\r\n   * @param {Array} domain The scale domain such as [from, to]\r\n   * @param {Array} range The scale's range such as [from, to]\r\n   *\r\n   * @return A d3-scale instance\r\n   */\n\n\n  ChartInternal.prototype.getY = function (type, domain, range) {\n    var scale;\n\n    if (type === 'timeseries' || type === 'time') {\n      scale = this.d3.scaleTime();\n    } else if (type === 'log') {\n      scale = c3LogScale(this.d3);\n    } else if (type === 'linear' || type === undefined) {\n      scale = this.d3.scaleLinear();\n    } else {\n      throw new Error(\"Invalid Y axis type: \\\"\" + type + \"\\\"\");\n    }\n\n    if (domain) {\n      scale.domain(domain);\n    }\n\n    if (range) {\n      scale.range(range);\n    }\n\n    return scale;\n  };\n\n  ChartInternal.prototype.getYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n  };\n\n  ChartInternal.prototype.getSubYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n  };\n\n  ChartInternal.prototype.updateScales = function () {\n    var $$ = this,\n        config = $$.config,\n        forInit = !$$.x; // update edges\n\n    $$.xMin = config.axis_rotated ? 1 : 0;\n    $$.xMax = config.axis_rotated ? $$.height : $$.width;\n    $$.yMin = config.axis_rotated ? 0 : $$.height;\n    $$.yMax = config.axis_rotated ? $$.width : 1;\n    $$.subXMin = $$.xMin;\n    $$.subXMax = $$.xMax;\n    $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n    $$.subYMax = config.axis_rotated ? $$.width2 : 1; // update scales\n\n    $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n      return $$.xAxis.tickOffset();\n    });\n    $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\n    $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\n    $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n      return d % 1 ? 0 : $$.subXAxis.tickOffset();\n    });\n    $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\n    $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]); // update axes\n\n    $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n    $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n    $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n    $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n    $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\n    $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer); // Set initialized scales to brush and zoom\n\n    if (!forInit) {\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    } // update for arc\n\n\n    if ($$.updateArc) {\n      $$.updateArc();\n    }\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\n    var $$ = this,\n        config = $$.config,\n        cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n        cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n        r = $$.pointSelectR.bind($$);\n    config.data_onselected.call($$.api, d, target.node()); // add selected-circle on low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr('class', function () {\n      return $$.generateClass(CLASS.selectedCircle, i);\n    }).attr('cx', cx).attr('cy', cy).attr('stroke', function () {\n      return $$.color(d);\n    }).attr('r', function (d) {\n      return $$.pointSelectR(d) * 1.4;\n    }).transition().duration(100).attr('r', r);\n  };\n\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$.api, d, target.node()); // remove selected-circle from low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n  };\n\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\n    selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n  };\n\n  ChartInternal.prototype.selectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.d3.rgb($$.color(d)).brighter(0.75);\n      });\n    }\n  };\n\n  ChartInternal.prototype.unselectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.color(d);\n      });\n    }\n  };\n\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\n    selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n  };\n\n  ChartInternal.prototype.getToggle = function (that, d) {\n    var $$ = this,\n        toggle;\n\n    if (that.nodeName === 'circle') {\n      if ($$.isStepType(d)) {\n        // circle is hidden in step chart, so treat as within the click area\n        toggle = function toggle() {}; // TODO: how to select step chart?\n\n      } else {\n        toggle = $$.togglePoint;\n      }\n    } else if (that.nodeName === 'path') {\n      toggle = $$.togglePath;\n    }\n\n    return toggle;\n  };\n\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        shape = d3.select(that),\n        isSelected = shape.classed(CLASS.SELECTED),\n        toggle = $$.getToggle(that, d).bind($$);\n\n    if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n      if (!config.data_selection_multiple) {\n        $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : '')).selectAll('.' + CLASS.shape).each(function (d, i) {\n          var shape = d3.select(this);\n\n          if (shape.classed(CLASS.SELECTED)) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        });\n      }\n\n      shape.classed(CLASS.SELECTED, !isSelected);\n      toggle(!isSelected, shape, d, i);\n    }\n  };\n\n  ChartInternal.prototype.initBar = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars);\n  };\n\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainBars,\n        mainBarEnter,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainBars = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n      return classChartBar(d) + classFocus(d);\n    });\n    mainBarEnter = mainBars.enter().append('g').attr('class', classChartBar).style('pointer-events', 'none'); // Bars for each data\n\n    mainBarEnter.append('g').attr('class', classBars).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    });\n  };\n\n  ChartInternal.prototype.updateBar = function (durationForExit) {\n    var $$ = this,\n        barData = $$.barData.bind($$),\n        classBar = $$.classBar.bind($$),\n        initialOpacity = $$.initialOpacity.bind($$),\n        color = function color(d) {\n      return $$.color(d.id);\n    };\n\n    var mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n    var mainBarEnter = mainBar.enter().append('path').attr('class', classBar).style('stroke', color).style('fill', color);\n    $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\n    mainBar.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\n    var $$ = this;\n    return [(withTransition ? this.mainBar.transition(transition) : this.mainBar).attr('d', drawBar).style('stroke', this.color).style('fill', this.color).style('opacity', function (d) {\n      return $$.isTargetToShow(d.id) ? 1 : 0;\n    })];\n  };\n\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\n    var $$ = this,\n        config = $$.config,\n        w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n    return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n  };\n\n  ChartInternal.prototype.getBars = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\n    var $$ = this;\n\n    if (reset) {\n      $$.unexpandBars();\n    }\n\n    $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n  };\n\n  ChartInternal.prototype.unexpandBars = function (i) {\n    var $$ = this;\n    $$.getBars(i).classed(CLASS.EXPANDED, false);\n  };\n\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        getPoints = $$.generateGetBarPoints(barIndices, isSub);\n    return function (d, i) {\n      // 4 points that make a bar\n      var points = getPoints(d, i); // switch points if axis is rotated, not applicable for sub chart\n\n      var indexX = config.axis_rotated ? 1 : 0;\n      var indexY = config.axis_rotated ? 0 : 1;\n      var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n      return path;\n    };\n  };\n\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\n    var $$ = this,\n        axis = isSub ? $$.subXAxis : $$.xAxis,\n        barTargetsNum = barIndices.__max__ + 1,\n        barW = $$.getBarW(axis, barTargetsNum),\n        barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n        barY = $$.getShapeY(!!isSub),\n        barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n        barSpaceOffset = barW * ($$.config.bar_space / 2),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = barOffset(d, i) || y0,\n          // offset is for stacked bar chart\n      posX = barX(d),\n          posY = barY(d); // fix posY not to overflow opposite quadrant\n\n      if ($$.config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n\n      posY -= y0 - offset; // 4 points that make a bar\n\n      return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY], [posX + barW - barSpaceOffset, posY], [posX + barW - barSpaceOffset, offset]];\n    };\n  };\n  /**\r\n   * Returns whether the data point is within the given bar shape.\r\n   *\r\n   * @param mouse\r\n   * @param barShape\r\n   * @return {boolean}\r\n   */\n\n\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\n    return isWithinBox(mouse, getBBox(barShape), 2);\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\n    var $$ = this,\n        config = $$.config,\n        indices = {},\n        i = 0,\n        j,\n        k;\n    $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n      for (j = 0; j < config.data_groups.length; j++) {\n        if (config.data_groups[j].indexOf(d.id) < 0) {\n          continue;\n        }\n\n        for (k = 0; k < config.data_groups[j].length; k++) {\n          if (config.data_groups[j][k] in indices) {\n            indices[d.id] = indices[config.data_groups[j][k]];\n            break;\n          }\n        }\n      }\n\n      if (isUndefined(indices[d.id])) {\n        indices[d.id] = i++;\n      }\n    });\n    indices.__max__ = i - 1;\n    return indices;\n  };\n\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\n    var $$ = this,\n        scale = isSub ? $$.subX : $$.x;\n    return function (d) {\n      var index = d.id in indices ? indices[d.id] : 0;\n      return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n    };\n  };\n\n  ChartInternal.prototype.getShapeY = function (isSub) {\n    var $$ = this;\n    return function (d) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n      return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\n    };\n  };\n\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\n    var $$ = this,\n        targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n        targetIds = targets.map(function (t) {\n      return t.id;\n    });\n    return function (d, i) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n          y0 = scale(0),\n          offset = y0;\n      targets.forEach(function (t) {\n        var rowValues = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n        var isTargetNormalized = $$.isTargetNormalized(d.id);\n        var values = rowValues.map(function (v) {\n          return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\n        });\n\n        if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n          return;\n        }\n\n        if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n          // check if the x values line up\n          if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\n            // \"+\" for timeseries\n            // if not, try to find the value that does line up\n            i = -1;\n            rowValues.forEach(function (v, j) {\n              var x1 = v.x.constructor === Date ? +v.x : v.x;\n              var x2 = d.x.constructor === Date ? +d.x : d.x;\n\n              if (x1 === x2) {\n                i = j;\n              }\n            });\n          }\n\n          if (i in rowValues && rowValues[i].value * d.value >= 0) {\n            offset += scale(values[i]) - y0;\n          }\n        }\n      });\n      return offset;\n    };\n  };\n\n  ChartInternal.prototype.isWithinShape = function (that, d) {\n    var $$ = this,\n        shape = $$.d3.select(that),\n        isWithin;\n\n    if (!$$.isTargetToShow(d.id)) {\n      isWithin = false;\n    } else if (that.nodeName === 'circle') {\n      isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n    } else if (that.nodeName === 'path') {\n      isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar($$.d3.mouse(that), that) : true;\n    }\n\n    return isWithin;\n  };\n\n  ChartInternal.prototype.getInterpolate = function (d) {\n    var $$ = this,\n        d3 = $$.d3,\n        types = {\n      linear: d3.curveLinear,\n      'linear-closed': d3.curveLinearClosed,\n      basis: d3.curveBasis,\n      'basis-open': d3.curveBasisOpen,\n      'basis-closed': d3.curveBasisClosed,\n      bundle: d3.curveBundle,\n      cardinal: d3.curveCardinal,\n      'cardinal-open': d3.curveCardinalOpen,\n      'cardinal-closed': d3.curveCardinalClosed,\n      monotone: d3.curveMonotoneX,\n      step: d3.curveStep,\n      'step-before': d3.curveStepBefore,\n      'step-after': d3.curveStepAfter\n    },\n        type;\n\n    if ($$.isSplineType(d)) {\n      type = types[$$.config.spline_interpolation_type] || types.cardinal;\n    } else if ($$.isStepType(d)) {\n      type = types[$$.config.line_step_type];\n    } else {\n      type = types.linear;\n    }\n\n    return type;\n  };\n\n  ChartInternal.prototype.initLine = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines);\n  };\n\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainLines,\n        mainLineEnter,\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$),\n        classCircles = $$.classCircles.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainLines = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n      return classChartLine(d) + classFocus(d);\n    });\n    mainLineEnter = mainLines.enter().append('g').attr('class', classChartLine).style('opacity', 0).style('pointer-events', 'none'); // Lines for each data\n\n    mainLineEnter.append('g').attr('class', classLines); // Areas\n\n    mainLineEnter.append('g').attr('class', classAreas); // Circles for each data point on lines\n\n    mainLineEnter.append('g').attr('class', function (d) {\n      return $$.generateClass(CLASS.selectedCircles, d.id);\n    });\n    mainLineEnter.append('g').attr('class', classCircles).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    }); // Update date for selected circles\n\n    targets.forEach(function (t) {\n      $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n        d.value = t.values[d.index].value;\n      });\n    }); // MEMO: can not keep same color...\n    //mainLineUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.updateLine = function (durationForExit) {\n    var $$ = this;\n    var mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var mainLineEnter = mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    $$.mainLine = mainLineEnter.merge(mainLine).style('opacity', $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n      return $$.isStepType(d) ? 'crispEdges' : '';\n    }).attr('transform', null);\n    mainLine.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\n    return [(withTransition ? this.mainLine.transition(transition) : this.mainLine).attr('d', drawLine).style('stroke', this.color).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        line = $$.d3.line(),\n        getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        yValue = function yValue(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n\n    if (!config.line_connectNull) {\n      line = line.defined(function (d) {\n        return d.value != null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x = isSub ? $$.subX : $$.x,\n          y = yScaleGetter.call($$, d.id),\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isLineType(d)) {\n        if (config.data_regions[d.id]) {\n          path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n        } else {\n          if ($$.isStepType(d)) {\n            values = $$.convertValuesToStep(values);\n          }\n\n          path = line.curve($$.getInterpolate(d))(values);\n        }\n      } else {\n        if (values[0]) {\n          x0 = x(values[0].x);\n          y0 = y(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        lineTargetsNum = lineIndices.__max__ + 1,\n        x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = lineOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the line position\n\n\n      return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\n    var $$ = this,\n        config = $$.config,\n        prev = -1,\n        i,\n        j,\n        s = 'M',\n        sWithRegion,\n        xp,\n        yp,\n        dx,\n        dy,\n        dd,\n        diff,\n        diffx2,\n        xOffset = $$.isCategorized() ? 0.5 : 0,\n        xValue,\n        yValue,\n        regions = [];\n\n    function isWithinRegions(x, regions) {\n      var i;\n\n      for (i = 0; i < regions.length; i++) {\n        if (regions[i].start < x && x <= regions[i].end) {\n          return true;\n        }\n      }\n\n      return false;\n    } // Check start/end of regions\n\n\n    if (isDefined(_regions)) {\n      for (i = 0; i < _regions.length; i++) {\n        regions[i] = {};\n\n        if (isUndefined(_regions[i].start)) {\n          regions[i].start = d[0].x;\n        } else {\n          regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n        }\n\n        if (isUndefined(_regions[i].end)) {\n          regions[i].end = d[d.length - 1].x;\n        } else {\n          regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n        }\n      }\n    } // Set scales\n\n\n    xValue = config.axis_rotated ? function (d) {\n      return y(d.value);\n    } : function (d) {\n      return x(d.x);\n    };\n    yValue = config.axis_rotated ? function (d) {\n      return x(d.x);\n    } : function (d) {\n      return y(d.value);\n    }; // Define svg generator function for region\n\n    function generateM(points) {\n      return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n    }\n\n    if ($$.isTimeSeries()) {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var x0 = d0.x.getTime(),\n            x_diff = d1.x - d0.x,\n            xv0 = new Date(x0 + x_diff * j),\n            xv1 = new Date(x0 + x_diff * (j + diff)),\n            points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n        } else {\n          points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } else {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n        } else {\n          points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } // Generate\n\n\n    for (i = 0; i < d.length; i++) {\n      // Draw as normal\n      if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n        s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\n      } // Draw with region // TODO: Fix for horizotal charts\n      else {\n        xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n        yp = $$.getScale(d[i - 1].value, d[i].value);\n        dx = x(d[i].x) - x(d[i - 1].x);\n        dy = y(d[i].value) - y(d[i - 1].value);\n        dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        diff = 2 / dd;\n        diffx2 = diff * 2;\n\n        for (j = diff; j <= 1; j += diffx2) {\n          s += sWithRegion(d[i - 1], d[i], j, diff);\n        }\n      }\n\n      prev = d[i].x;\n    }\n\n    return s;\n  };\n\n  ChartInternal.prototype.updateArea = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var mainAreaEnter = mainArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.mainArea = mainAreaEnter.merge(mainArea).style('opacity', $$.orgAreaOpacity);\n    mainArea.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\n    return [(withTransition ? this.mainArea.transition(transition) : this.mainArea).attr('d', drawArea).style('fill', this.color).style('opacity', this.orgAreaOpacity)];\n  };\n\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        area = $$.d3.area(),\n        getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        value0 = function value0(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n    },\n        value1 = function value1(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n\n    if (!config.line_connectNull) {\n      area = area.defined(function (d) {\n        return d.value !== null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isAreaType(d)) {\n        if ($$.isStepType(d)) {\n          values = $$.convertValuesToStep(values);\n        }\n\n        path = area.curve($$.getInterpolate(d))(values);\n      } else {\n        if (values[0]) {\n          x0 = $$.x(values[0].x);\n          y0 = $$.getYScale(d.id)(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getAreaBaseValue = function () {\n    return 0;\n  };\n\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        areaTargetsNum = areaIndices.__max__ + 1,\n        x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = areaOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the area position\n\n\n      return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, offset] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\n    var $$ = this;\n    var mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterOrStanfordData.bind($$));\n    var mainCircleEnter = mainCircle.enter().append('circle').attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '').attr('class', $$.classCircle.bind($$)).attr('cx', cx).attr('cy', cy).attr('r', $$.pointR.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\n    $$.mainCircle = mainCircleEnter.merge(mainCircle).style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\n    mainCircle.exit().style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\n    var $$ = this,\n        selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\n    return [(withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle).style('opacity', this.opacityForCircle.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color).attr('cx', cx).attr('cy', cy), (withTransition ? selectedCircles.transition(transition) : selectedCircles).attr('cx', cx).attr('cy', cy)];\n  };\n\n  ChartInternal.prototype.circleX = function (d) {\n    return d.x || d.x === 0 ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.updateCircleY = function () {\n    var $$ = this,\n        lineIndices,\n        getPoints;\n\n    if ($$.config.data_groups.length > 0) {\n      lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n\n      $$.circleY = function (d, i) {\n        return getPoints(d, i)[0][1];\n      };\n    } else {\n      $$.circleY = function (d) {\n        return $$.getYScale(d.id)(d.value);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getCircles = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\n    var $$ = this,\n        r = $$.pointExpandedR.bind($$);\n\n    if (reset) {\n      $$.unexpandCircles();\n    }\n\n    $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n  };\n\n  ChartInternal.prototype.unexpandCircles = function (i) {\n    var $$ = this,\n        r = $$.pointR.bind($$);\n    $$.getCircles(i).filter(function () {\n      return $$.d3.select(this).classed(CLASS.EXPANDED);\n    }).classed(CLASS.EXPANDED, false).attr('r', r);\n  };\n\n  ChartInternal.prototype.pointR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n  };\n\n  ChartInternal.prototype.pointExpandedR = function (d) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.point_focus_expand_enabled) {\n      return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n    } else {\n      return $$.pointR(d);\n    }\n  };\n\n  ChartInternal.prototype.pointSelectR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n  };\n\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\n    var d3 = this.d3,\n        mouse = d3.mouse(that),\n        d3_this = d3.select(that),\n        cx = +d3_this.attr('cx'),\n        cy = +d3_this.attr('cy');\n    return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n  };\n\n  ChartInternal.prototype.isWithinStep = function (that, y) {\n    return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.size_width ? config.size_width : $$.getParentWidth();\n  };\n\n  ChartInternal.prototype.getCurrentHeight = function () {\n    var $$ = this,\n        config = $$.config,\n        h = config.size_height ? config.size_height : $$.getParentHeight();\n    return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n  };\n\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = isValue(config.padding_top) ? config.padding_top : 0;\n\n    if ($$.title && $$.title.node()) {\n      padding += $$.getTitlePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\n    var config = this.config;\n    return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config;\n\n    if (isValue(config.padding_left)) {\n      return config.padding_left;\n    } else if (config.axis_rotated) {\n      return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n    } else if (!config.axis_y_show || config.axis_y_inner) {\n      // && !config.axis_rotated\n      return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n    }\n  };\n\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = 0,\n        defaultPadding = 10,\n        legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n\n    if (isValue(config.padding_right)) {\n      padding = config.padding_right + 1; // 1 is needed not to hide tick line\n    } else if (config.axis_rotated) {\n      padding = defaultPadding + legendWidthOnRight;\n    } else if (!config.axis_y2_show || config.axis_y2_inner) {\n      // && !config.axis_rotated\n      padding = 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n    } else {\n      padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n    }\n\n    if ($$.colorScale && $$.colorScale.node()) {\n      padding += $$.getColorScalePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getParentRectValue = function (key) {\n    var parent = this.selectChart.node(),\n        v;\n\n    while (parent && parent.tagName !== 'BODY') {\n      try {\n        v = parent.getBoundingClientRect()[key];\n      } catch (e) {\n        if (key === 'width') {\n          // In IE in certain cases getBoundingClientRect\n          // will cause an \"unspecified error\"\n          v = parent.offsetWidth;\n        }\n      }\n\n      if (v) {\n        break;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return v;\n  };\n\n  ChartInternal.prototype.getParentWidth = function () {\n    return this.getParentRectValue('width');\n  };\n\n  ChartInternal.prototype.getParentHeight = function () {\n    var h = this.selectChart.style('height');\n    return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n  };\n\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config,\n        hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n        leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n        leftAxis = $$.main.select('.' + leftAxisClass).node(),\n        svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : {\n      right: 0\n    },\n        chartRect = $$.selectChart.node().getBoundingClientRect(),\n        hasArc = $$.hasArcType(),\n        svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n    return svgLeft > 0 ? svgLeft : 0;\n  };\n\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\n    var $$ = this,\n        position = $$.axis.getLabelPositionById(id);\n    return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n  };\n\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId, isSubchart) {\n    var $$ = this,\n        config = $$.config,\n        h = 30;\n\n    if (axisId === 'x' && !(isDefined(isSubchart) && isSubchart ? config.subchart_axis_x_show : config.axis_x_show)) {\n      return 8;\n    }\n\n    if (axisId === 'x' && config.axis_x_height) {\n      return config.axis_x_height;\n    }\n\n    if (axisId === 'y' && !config.axis_y_show) {\n      return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n    }\n\n    if (axisId === 'y2' && !config.axis_y2_show) {\n      return $$.rotated_padding_top;\n    } // Calculate x axis height when tick rotated\n\n\n    if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_x_tick_rotate)) / 180);\n    } // Calculate y axis height when tick rotated\n\n\n    if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_y_tick_rotate)) / 180);\n    }\n\n    return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\n    var $$ = this,\n        d3 = $$.d3; // TODO: dynamically change brushY/brushX according to axis_rotated.\n\n    $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX()).on('brush', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      $$.redrawForBrush();\n    }).on('end', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      if ($$.brush.empty() && event && event.type !== 'end') {\n        $$.brush.clear();\n      }\n    });\n\n    $$.brush.updateExtent = function () {\n      var range = this.scale.range(),\n          extent;\n\n      if ($$.config.axis_rotated) {\n        extent = [[0, range[0]], [$$.width2, range[1]]];\n      } else {\n        extent = [[range[0], 0], [range[1], $$.height2]];\n      }\n\n      this.extent(extent);\n      return this;\n    };\n\n    $$.brush.updateScale = function (scale) {\n      this.scale = scale;\n      return this;\n    };\n\n    $$.brush.update = function (scale) {\n      this.updateScale(scale || $$.subX).updateExtent();\n      $$.context.select('.' + CLASS.brush).call(this);\n    };\n\n    $$.brush.clear = function () {\n      $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\n    };\n\n    $$.brush.selection = function () {\n      return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\n    };\n\n    $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\n      var selection, brush;\n\n      if (selectionAsValue) {\n        if ($$.context) {\n          selection = [this.scale(selectionAsValue[0]), this.scale(selectionAsValue[1])];\n          brush = $$.context.select('.' + CLASS.brush);\n\n          if (withTransition) {\n            brush = brush.transition();\n          }\n\n          $$.brush.move(brush, selection);\n        }\n\n        return [];\n      }\n\n      selection = $$.brush.selection() || [0, 0];\n      return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\n    };\n\n    $$.brush.empty = function () {\n      var selection = $$.brush.selection();\n      return !selection || selection[0] === selection[1];\n    };\n\n    return $$.brush.updateScale(scale);\n  };\n\n  ChartInternal.prototype.initSubchart = function () {\n    var $$ = this,\n        config = $$.config,\n        context = $$.context = $$.svg.append('g').attr('transform', $$.getTranslate('context')); // set style\n\n    context.style('visibility', 'visible'); // Define g for chart area\n\n    context.append('g').attr('clip-path', $$.clipPathForSubchart).attr('class', CLASS.chart); // Define g for bar chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars); // Define g for line chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines); // Add extent rect for Brush\n\n    context.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.brush); // ATTENTION: This must be called AFTER chart added\n    // Add Axis\n\n    $$.axes.subx = context.append('g').attr('class', CLASS.axisX).attr('transform', $$.getTranslate('subx')).attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis).style('visibility', config.subchart_axis_x_show ? 'visible' : 'hidden');\n  };\n\n  ChartInternal.prototype.initSubchartBrush = function () {\n    var $$ = this; // Add extent rect for Brush\n\n    $$.initBrush($$.subX).updateExtent();\n    $$.context.select('.' + CLASS.brush).call($$.brush);\n  };\n\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\n    var $$ = this,\n        context = $$.context,\n        config = $$.config,\n        contextLineEnter,\n        contextLine,\n        contextBarEnter,\n        contextBar,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$); //-- Bar --//\n\n    contextBar = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets);\n    contextBarEnter = contextBar.enter().append('g').style('opacity', 0);\n    contextBarEnter.merge(contextBar).attr('class', classChartBar); // Bars for each data\n\n    contextBarEnter.append('g').attr('class', classBars); //-- Line --//\n\n    contextLine = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets);\n    contextLineEnter = contextLine.enter().append('g').style('opacity', 0);\n    contextLineEnter.merge(contextLine).attr('class', classChartLine); // Lines for each data\n\n    contextLineEnter.append('g').attr('class', classLines); // Area\n\n    contextLineEnter.append('g').attr('class', classAreas); //-- Brush --//\n\n    context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\n  };\n\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n    var contextBarEnter = contextBar.enter().append('path').attr('class', $$.classBar.bind($$)).style('stroke', 'none').style('fill', $$.color);\n    contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextBar = contextBarEnter.merge(contextBar).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n    (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var contextLineEnter = contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextLine = contextLineEnter.merge(contextLine).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n    (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr('d', drawLineOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var contextAreaEnter = contextArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n    (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr('d', drawAreaOnSub).style('fill', this.color).style('opacity', this.orgAreaOpacity);\n  };\n\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n    var $$ = this,\n        d3 = $$.d3,\n        drawAreaOnSub,\n        drawBarOnSub,\n        drawLineOnSub; // reflect main chart to extent on subchart if zoomed\n\n    if (d3.event && d3.event.type === 'zoom') {\n      $$.brush.selectionAsValue($$.x.orgDomain());\n    } // update subchart elements if needed\n\n\n    if (withSubchart) {\n      // extent rect\n      if (!$$.brush.empty()) {\n        $$.brush.selectionAsValue($$.x.orgDomain());\n      } // setup drawer - MEMO: this must be called after axis updated\n\n\n      drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n      drawBarOnSub = $$.generateDrawBar(barIndices, true);\n      drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n      $$.updateBarForSubchart(duration);\n      $$.updateLineForSubchart(duration);\n      $$.updateAreaForSubchart(duration);\n      $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n      $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n      $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n    }\n  };\n\n  ChartInternal.prototype.redrawForBrush = function () {\n    var $$ = this,\n        x = $$.x,\n        d3 = $$.d3,\n        s;\n    $$.redraw({\n      withTransition: false,\n      withY: $$.config.zoom_rescale,\n      withSubchart: false,\n      withUpdateXDomain: true,\n      withEventRect: false,\n      withDimension: false\n    }); // update zoom transation binded to event rect\n\n    s = d3.event.selection || $$.brush.scale.range();\n    $$.main.select('.' + CLASS.eventRect).call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\n    $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n  };\n\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\n    var $$ = this,\n        subXAxis;\n\n    if (transitions && transitions.axisSubX) {\n      subXAxis = transitions.axisSubX;\n    } else {\n      subXAxis = $$.context.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        subXAxis = subXAxis.transition();\n      }\n    }\n\n    $$.context.attr('transform', $$.getTranslate('context'));\n    subXAxis.attr('transform', $$.getTranslate('subx'));\n  };\n\n  ChartInternal.prototype.getDefaultSelection = function () {\n    var $$ = this,\n        config = $$.config,\n        selection = isFunction(config.axis_x_selection) ? config.axis_x_selection($$.getXDomain($$.data.targets)) : config.axis_x_selection;\n\n    if ($$.isTimeSeries()) {\n      selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\n    }\n\n    return selection;\n  };\n\n  ChartInternal.prototype.removeSubchart = function () {\n    var $$ = this;\n    $$.brush = null;\n    $$.context.remove();\n    $$.context = null;\n  };\n\n  ChartInternal.prototype.initText = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartTexts);\n    $$.mainText = $$.d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\n    var $$ = this,\n        classChartText = $$.classChartText.bind($$),\n        classTexts = $$.classTexts.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    var mainText = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets);\n    var mainTextEnter = mainText.enter().append('g').attr('class', classChartText).style('opacity', 0).style('pointer-events', 'none');\n    mainTextEnter.append('g').attr('class', classTexts);\n    mainTextEnter.merge(mainText).attr('class', function (d) {\n      return classChartText(d) + classFocus(d);\n    });\n  };\n\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\n    var $$ = this,\n        config = $$.config,\n        barOrLineData = $$.barOrLineData.bind($$),\n        classText = $$.classText.bind($$);\n    var mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n    var mainTextEnter = mainText.enter().append('text').attr('class', classText).attr('text-anchor', function (d) {\n      return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n    }).style('stroke', 'none').attr('x', xForText).attr('y', yForText).style('fill', function (d) {\n      return $$.color(d);\n    }).style('fill-opacity', 0);\n    $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\n      return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n    });\n    mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\n    return [(withTransition ? this.mainText.transition(transition) : this.mainText).attr('x', xForText).attr('y', yForText).style('fill', this.color).style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))];\n  };\n\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\n    var dummy = this.d3.select('body').append('div').classed('c3', true),\n        svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n        font = this.d3.select(element).style('font'),\n        rect;\n    svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : '', true).style('font', font).text(text).each(function () {\n      rect = getBBox(this);\n    });\n    dummy.remove();\n    return rect;\n  };\n\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n    var $$ = this,\n        getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n        getBarPoints = $$.generateGetBarPoints(barIndices, false),\n        getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n        getter = forX ? $$.getXForText : $$.getYForText;\n    return function (d, i) {\n      var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n      return getter.call($$, getPoints(d, i), d, this);\n    };\n  };\n\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        xPos,\n        padding;\n\n    if ($$.config.axis_rotated) {\n      padding = $$.isBarType(d) ? 4 : 6;\n      xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n    } else {\n      xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null) {\n      if (xPos > $$.width) {\n        xPos = $$.width - box.width;\n      } else if (xPos < 0) {\n        xPos = 4;\n      }\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        yPos;\n\n    if ($$.config.axis_rotated) {\n      yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n    } else {\n      yPos = points[2][1];\n\n      if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n        yPos += box.height;\n\n        if ($$.isBarType(d) && $$.isSafari()) {\n          yPos -= 3;\n        } else if (!$$.isBarType(d) && $$.isChrome()) {\n          yPos += 3;\n        }\n      } else {\n        yPos += $$.isBarType(d) ? -3 : -6;\n      }\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null && !$$.config.axis_rotated) {\n      if (yPos < box.height) {\n        yPos = box.height;\n      } else if (yPos > this.height) {\n        yPos = this.height - 4;\n      }\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.initTitle = function () {\n    var $$ = this;\n    $$.title = $$.svg.append('text').text($$.config.title_text).attr('class', $$.CLASS.title);\n  };\n\n  ChartInternal.prototype.redrawTitle = function () {\n    var $$ = this;\n    $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\n  };\n\n  ChartInternal.prototype.xForTitle = function () {\n    var $$ = this,\n        config = $$.config,\n        position = config.title_position || 'left',\n        x;\n\n    if (position.indexOf('right') >= 0) {\n      x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n    } else if (position.indexOf('center') >= 0) {\n      x = Math.max(($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2, 0);\n    } else {\n      // left\n      x = config.title_padding.left;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.yForTitle = function () {\n    var $$ = this;\n    return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n  };\n\n  ChartInternal.prototype.getTitlePadding = function () {\n    var $$ = this;\n    return $$.yForTitle() + $$.config.title_padding.bottom;\n  };\n\n  function powerOfTen(d) {\n    return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\n  }\n\n  ChartInternal.prototype.drawColorScale = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        barWidth,\n        barHeight,\n        axis,\n        points,\n        legendAxis,\n        axisScale,\n        inverseScale,\n        height;\n    barWidth = !isNaN(config.stanford_scaleWidth) ? config.stanford_scaleWidth : 20;\n    barHeight = 5;\n\n    if (barHeight < 0 || barWidth < 0) {\n      throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\n    }\n\n    height = $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\n    points = d3.range(config.stanford_padding.bottom, height, barHeight);\n    inverseScale = d3.scaleSequential(target.colors).domain([points[points.length - 1], points[0]]);\n\n    if ($$.colorScale) {\n      $$.colorScale.remove();\n    }\n\n    $$.colorScale = $$.svg.append('g').attr('width', 50).attr('height', height).attr('class', CLASS.colorScale);\n    $$.colorScale.append('g').attr('transform', \"translate(0, \" + config.stanford_padding.top + \")\").selectAll('bars').data(points).enter().append('rect').attr('y', function (d, i) {\n      return i * barHeight;\n    }).attr('x', 0).attr('width', barWidth).attr('height', barHeight).attr('fill', function (d) {\n      return inverseScale(d);\n    }); // Legend Axis\n\n    axisScale = d3.scaleLog().domain([target.minEpochs, target.maxEpochs]).range([points[0] + config.stanford_padding.top + points[points.length - 1] + barHeight - 1, points[0] + config.stanford_padding.top]);\n    legendAxis = d3.axisRight(axisScale);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\n    } else if (isFunction(config.stanford_scaleFormat)) {\n      legendAxis.tickFormat(config.stanford_scaleFormat);\n    } else {\n      legendAxis.tickFormat(d3.format('d'));\n    }\n\n    if (isFunction(config.stanford_scaleValues)) {\n      legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\n    } // Draw Axis\n\n\n    axis = $$.colorScale.append('g').attr('class', 'legend axis').attr('transform', \"translate(\" + barWidth + \",0)\").call(legendAxis);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      axis.selectAll('.tick text').text(null).filter(powerOfTen).text(10).append('tspan').attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\n      .text(function (d) {\n        return Math.round(Math.log(d) / Math.LN10);\n      });\n    }\n\n    $$.colorScale.attr('transform', \"translate(\" + ($$.currentWidth - $$.xForColorScale()) + \", 0)\");\n  };\n\n  ChartInternal.prototype.xForColorScale = function () {\n    var $$ = this;\n    return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\n  };\n\n  ChartInternal.prototype.getColorScalePadding = function () {\n    var $$ = this;\n    return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\n    var $$ = this;\n    return $$.config.data_type === 'stanford';\n  };\n\n  ChartInternal.prototype.initStanfordData = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        epochs,\n        maxEpochs,\n        minEpochs; // Make larger values appear on top\n\n    target.values.sort(compareEpochs); // Get array of epochs\n\n    epochs = target.values.map(function (a) {\n      return a.epochs;\n    });\n    minEpochs = !isNaN(config.stanford_scaleMin) ? config.stanford_scaleMin : d3.min(epochs);\n    maxEpochs = !isNaN(config.stanford_scaleMax) ? config.stanford_scaleMax : d3.max(epochs);\n\n    if (minEpochs > maxEpochs) {\n      throw Error('Number of minEpochs has to be smaller than maxEpochs');\n    }\n\n    target.colors = isFunction(config.stanford_colors) ? config.stanford_colors : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\n    target.colorscale = d3.scaleSequentialLog(target.colors).domain([minEpochs, maxEpochs]);\n    target.minEpochs = minEpochs;\n    target.maxEpochs = maxEpochs;\n  };\n\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\n    var $$ = this,\n        target = $$.data.targets[0];\n    return target.colorscale(d.epochs);\n  }; // http://jsfiddle.net/Xotic750/KtzLq/\n\n\n  ChartInternal.prototype.getCentroid = function (points) {\n    var area = getRegionArea(points);\n    var x = 0,\n        y = 0,\n        i,\n        j,\n        f,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      f = point1.x * point2.y - point2.x * point1.y;\n      x += (point1.x + point2.x) * f;\n      y += (point1.y + point2.y) * f;\n    }\n\n    f = area * 6;\n    return {\n      x: x / f,\n      y: y / f\n    };\n  };\n\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\n    var $$ = this,\n        labelX = $$.axis.getLabelText('x'),\n        labelY = $$.axis.getLabelText('y');\n    return \"\\n      <tr><th>\" + (labelX ? sanitise(labelX) : 'x') + \"</th><th class='value'>\" + d.x + \"</th></tr>\\n      <tr><th>\" + (labelY ? sanitise(labelY) : 'y') + \"</th><th class='value'>\" + d.value + \"</th></tr>\\n    \";\n  };\n\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\n    var $$ = this,\n        target = $$.data.targets[0],\n        total,\n        count;\n    total = target.values.reduce(function (accumulator, currentValue) {\n      return accumulator + Number(currentValue.epochs);\n    }, 0);\n    count = target.values.reduce(function (accumulator, currentValue) {\n      if (pointInRegion(currentValue, region)) {\n        return accumulator + Number(currentValue.epochs);\n      }\n\n      return accumulator;\n    }, 0);\n    return {\n      value: count,\n      percentage: count !== 0 ? (count / total * 100).toFixed(1) : 0\n    };\n  };\n\n  var getRegionArea = function getRegionArea(points) {\n    // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\n    var area = 0,\n        i,\n        j,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      area += point1.x * point2.y;\n      area -= point1.y * point2.x;\n    }\n\n    area /= 2;\n    return area;\n  };\n\n  var pointInRegion = function pointInRegion(point, region) {\n    // thanks to: http://bl.ocks.org/bycoffe/5575904\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    var xi,\n        yi,\n        yj,\n        xj,\n        intersect,\n        x = point.x,\n        y = point.value,\n        inside = false;\n\n    for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\n      xi = region[i].x;\n      yi = region[i].y;\n      xj = region[j].x;\n      yj = region[j].y;\n      intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  };\n\n  var compareEpochs = function compareEpochs(a, b) {\n    if (a.epochs < b.epochs) {\n      return -1;\n    }\n\n    if (a.epochs > b.epochs) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\n    var $$ = this; // Avoid blocking eventRect\n\n    $$.stanfordElements = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.stanfordElements);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\n  };\n\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        stanfordLine,\n        stanfordLineEnter,\n        stanfordRegion,\n        stanfordRegionEnter,\n        stanfordText,\n        stanfordTextEnter,\n        xvCustom = $$.xvCustom.bind($$),\n        yvCustom = $$.yvCustom.bind($$),\n        countPointsInRegion = $$.countEpochsInRegion.bind($$); // Stanford-Lines\n\n    stanfordLine = main.select('.' + CLASS.stanfordLines).style('shape-rendering', 'geometricprecision').selectAll('.' + CLASS.stanfordLine).data(config.stanford_lines); // enter\n\n    stanfordLineEnter = stanfordLine.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordLineEnter.append('line').attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 0); // update\n\n    $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\n    $$.stanfordLines.select('line').transition().duration(duration).attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 1); // exit\n\n    stanfordLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Text\n\n    stanfordText = main.select('.' + CLASS.stanfordTexts).selectAll('.' + CLASS.stanfordText).data(config.stanford_texts); // enter\n\n    stanfordTextEnter = stanfordText.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordTextEnter.append('text').attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).style('opacity', 0); // update\n\n    $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\n    $$.stanfordTexts.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).text(function (d) {\n      return d.content;\n    }).style('opacity', 1); // exit\n\n    stanfordText.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Regions\n\n    stanfordRegion = main.select('.' + CLASS.stanfordRegions).selectAll('.' + CLASS.stanfordRegion).data(config.stanford_regions); // enter\n\n    stanfordRegionEnter = stanfordRegion.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordRegionEnter.append('polygon').attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', 0);\n    stanfordRegionEnter.append('text').attr('x', function (d) {\n      return $$.getCentroid(d.points).x;\n    }).attr('y', function (d) {\n      return $$.getCentroid(d.points).y;\n    }).style('opacity', 0); // update\n\n    $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\n    $$.stanfordRegions.select('polygon').transition().duration(duration).attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', function (d) {\n      return d.opacity ? d.opacity : 0.2;\n    });\n    $$.stanfordRegions.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom($$.getCentroid(d.points), 'y') : xvCustom($$.getCentroid(d.points), 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom($$.getCentroid(d.points), 'x') : yvCustom($$.getCentroid(d.points), 'y');\n    }).text(function (d) {\n      if (d.text) {\n        var value, percentage, temp;\n\n        if ($$.isStanfordGraphType()) {\n          temp = countPointsInRegion(d.points);\n          value = temp.value;\n          percentage = temp.percentage;\n        }\n\n        return d.text(value, percentage);\n      }\n\n      return '';\n    }).attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').style('opacity', 1); // exit\n\n    stanfordRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\n    var $$ = this,\n        config = $$.config,\n        i;\n    $$.tooltip = $$.selectChart.style('position', 'relative').append('div').attr('class', CLASS.tooltipContainer).style('position', 'absolute').style('pointer-events', 'none').style('display', 'none'); // Show tooltip if needed\n\n    if (config.tooltip_init_show) {\n      if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n        config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n\n        for (i = 0; i < $$.data.targets[0].values.length; i++) {\n          if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n            break;\n          }\n        }\n\n        config.tooltip_init_x = i;\n      }\n\n      $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n        return $$.addName(d.values[config.tooltip_init_x]);\n      }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n      $$.tooltip.style('top', config.tooltip_init_position.top).style('left', config.tooltip_init_position.left).style('display', 'block');\n    }\n  };\n\n  ChartInternal.prototype.getTooltipSortFunction = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n      // if data are not grouped or if an order is specified\n      // for the tooltip values we sort them by their values\n      var order = config.tooltip_order;\n\n      if (order === undefined) {\n        order = config.data_order;\n      }\n\n      var valueOf = function valueOf(obj) {\n        return obj ? obj.value : null;\n      }; // if data are not grouped, we sort them by their value\n\n\n      if (isString(order) && order.toLowerCase() === 'asc') {\n        return function (a, b) {\n          return valueOf(a) - valueOf(b);\n        };\n      } else if (isString(order) && order.toLowerCase() === 'desc') {\n        return function (a, b) {\n          return valueOf(b) - valueOf(a);\n        };\n      } else if (isFunction(order)) {\n        // if the function is from data_order we need\n        // to wrap the returned function in order to format\n        // the sorted value to the expected format\n        var sortFunction = order;\n\n        if (config.tooltip_order === undefined) {\n          sortFunction = function sortFunction(a, b) {\n            return order(a ? {\n              id: a.id,\n              values: [a]\n            } : null, b ? {\n              id: b.id,\n              values: [b]\n            } : null);\n          };\n        }\n\n        return sortFunction;\n      } else if (isArray(order)) {\n        return function (a, b) {\n          return order.indexOf(a.id) - order.indexOf(b.id);\n        };\n      }\n    } else {\n      // if data are grouped, we follow the order of grouped targets\n      var ids = $$.orderTargets($$.data.targets).map(function (i) {\n        return i.id;\n      }); // if it was either asc or desc we need to invert the order\n      // returned by orderTargets\n\n      if ($$.isOrderAsc() || $$.isOrderDesc()) {\n        ids = ids.reverse();\n      }\n\n      return function (a, b) {\n        return ids.indexOf(a.id) - ids.indexOf(b.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n    var $$ = this,\n        config = $$.config,\n        titleFormat = config.tooltip_format_title || defaultTitleFormat,\n        nameFormat = config.tooltip_format_name || function (name) {\n      return name;\n    },\n        text,\n        i,\n        title,\n        value,\n        name,\n        bgcolor;\n\n    var valueFormat = config.tooltip_format_value;\n\n    if (!valueFormat) {\n      valueFormat = $$.isTargetNormalized(d.id) ? function (v, ratio) {\n        return (ratio * 100).toFixed(2) + \"%\";\n      } : defaultValueFormat;\n    }\n\n    var tooltipSortFunction = this.getTooltipSortFunction();\n\n    if (tooltipSortFunction) {\n      d.sort(tooltipSortFunction);\n    }\n\n    for (i = 0; i < d.length; i++) {\n      if (!(d[i] && (d[i].value || d[i].value === 0))) {\n        continue;\n      }\n\n      if ($$.isStanfordGraphType()) {\n        // Custom tooltip for stanford plots\n        if (!text) {\n          title = $$.getStanfordTooltipTitle(d[i]);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\n        }\n\n        bgcolor = $$.getStanfordPointColor(d[i]);\n        name = sanitise(config.data_epochs); // Epochs key name\n\n        value = d[i].epochs;\n      } else {\n        // Regular tooltip\n        if (!text) {\n          title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + '</th></tr>' : '');\n        }\n\n        value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n\n        if (value !== undefined) {\n          // Skip elements when their name is set to null\n          if (d[i].name === null) {\n            continue;\n          }\n\n          name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n          bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n        }\n      }\n\n      if (value !== undefined) {\n        text += \"<tr class='\" + $$.CLASS.tooltipName + '-' + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n        text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + '</td>';\n        text += \"<td class='value'>\" + value + '</td>';\n        text += '</tr>';\n      }\n    }\n\n    return text + '</table>';\n  };\n\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n    var forArc = $$.hasArcType(),\n        mouse = d3.mouse(element); // Determin tooltip position\n\n    if (forArc) {\n      tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n      tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n    } else {\n      svgLeft = $$.getSvgLeft(true);\n\n      if (config.axis_rotated) {\n        tooltipLeft = svgLeft + mouse[0] + 100;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = $$.x(dataToShow[0].x) + 20;\n      } else {\n        tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = mouse[1] + 15;\n      }\n\n      if (tooltipRight > chartRight) {\n        // 20 is needed for Firefox to keep tooltip width\n        tooltipLeft -= tooltipRight - chartRight + 20;\n      }\n\n      if (tooltipTop + tHeight > $$.currentHeight) {\n        tooltipTop -= tHeight + 30;\n      }\n    }\n\n    if (tooltipTop < 0) {\n      tooltipTop = 0;\n    }\n\n    return {\n      top: tooltipTop,\n      left: tooltipLeft\n    };\n  };\n\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\n    var $$ = this,\n        config = $$.config;\n    var tWidth, tHeight, position;\n    var forArc = $$.hasArcType(),\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\n\n    if (dataToShow.length === 0 || !config.tooltip_show) {\n      $$.hideTooltip();\n      return;\n    }\n\n    $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style('display', 'block'); // Get tooltip dimensions\n\n    tWidth = $$.tooltip.property('offsetWidth');\n    tHeight = $$.tooltip.property('offsetHeight');\n    position = positionFunction.call(this, dataToShow, tWidth, tHeight, element); // Set tooltip\n\n    $$.tooltip.style('top', position.top + 'px').style('left', position.left + 'px');\n  };\n\n  ChartInternal.prototype.hideTooltip = function () {\n    this.tooltip.style('display', 'none');\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\n    var $$ = this,\n        config = $$.config;\n    $$.mapToTargetIds(targetIds).forEach(function (id) {\n      $$.withoutFadeIn[id] = type === config.data_types[id];\n      config.data_types[id] = type;\n    });\n\n    if (!targetIds) {\n      config.data_type = type;\n    }\n  };\n\n  ChartInternal.prototype.hasType = function (type, targets) {\n    var $$ = this,\n        types = $$.config.data_types,\n        has = false;\n    targets = targets || $$.data.targets;\n\n    if (targets && targets.length) {\n      targets.forEach(function (target) {\n        var t = types[target.id];\n\n        if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n          has = true;\n        }\n      });\n    } else if (Object.keys(types).length) {\n      Object.keys(types).forEach(function (id) {\n        if (types[id] === type) {\n          has = true;\n        }\n      });\n    } else {\n      has = $$.config.data_type === type;\n    }\n\n    return has;\n  };\n\n  ChartInternal.prototype.hasArcType = function (targets) {\n    return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n  };\n\n  ChartInternal.prototype.isLineType = function (d) {\n    var config = this.config,\n        id = isString(d) ? d : d.id;\n    return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isStepType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isSplineType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isAreaType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isBarType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'bar';\n  };\n\n  ChartInternal.prototype.isScatterType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'scatter';\n  };\n\n  ChartInternal.prototype.isStanfordType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'stanford';\n  };\n\n  ChartInternal.prototype.isPieType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'pie';\n  };\n\n  ChartInternal.prototype.isGaugeType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'gauge';\n  };\n\n  ChartInternal.prototype.isDonutType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'donut';\n  };\n\n  ChartInternal.prototype.isArcType = function (d) {\n    return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n  };\n\n  ChartInternal.prototype.lineData = function (d) {\n    return this.isLineType(d) ? [d] : [];\n  };\n\n  ChartInternal.prototype.arcData = function (d) {\n    return this.isArcType(d.data) ? [d] : [];\n  };\n  /* not used\r\n   function scatterData(d) {\r\n   return isScatterType(d) ? d.values : [];\r\n   }\r\n   */\n\n\n  ChartInternal.prototype.barData = function (d) {\n    return this.isBarType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\n    return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.barOrLineData = function (d) {\n    return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.isSafari = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n  };\n\n  ChartInternal.prototype.isChrome = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Chrome') >= 0;\n  };\n\n  ChartInternal.prototype.initZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        startEvent;\n    $$.zoom = d3.zoom().on('start', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      startEvent = e;\n      config.zoom_onzoomstart.call($$.api, e);\n    }).on('zoom', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      $$.redrawForZoom();\n      config.zoom_onzoom.call($$.api, $$.x.orgDomain());\n    }).on('end', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      } // if click, do nothing. otherwise, click interaction will be canceled.\n\n\n      if (e && startEvent.clientX === e.clientX && startEvent.clientY === e.clientY) {\n        return;\n      }\n\n      config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n    });\n\n    $$.zoom.updateDomain = function () {\n      if (d3.event && d3.event.transform) {\n        if (config.axis_rotated && config.zoom_type === 'scroll' && d3.event.sourceEvent.type === 'mousemove') {\n          // we're moving the mouse in a rotated chart with zoom = \"scroll\", so we need rescaleY (i.e. vertical)\n          $$.x.domain(d3.event.transform.rescaleY($$.subX).domain());\n        } else {\n          $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\n        }\n      }\n\n      return this;\n    };\n\n    $$.zoom.updateExtent = function () {\n      this.scaleExtent([1, Infinity]).translateExtent([[0, 0], [$$.width, $$.height]]).extent([[0, 0], [$$.width, $$.height]]);\n      return this;\n    };\n\n    $$.zoom.update = function () {\n      return this.updateExtent().updateDomain();\n    };\n\n    return $$.zoom.updateExtent();\n  };\n\n  ChartInternal.prototype.zoomTransform = function (range) {\n    var $$ = this,\n        s = [$$.x(range[0]), $$.x(range[1])];\n    return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\n  };\n\n  ChartInternal.prototype.initDragZoom = function () {\n    var $$ = this;\n    var d3 = $$.d3;\n    var config = $$.config;\n    var context = $$.context = $$.svg;\n    var brushXPos = $$.margin.left + 20.5;\n    var brushYPos = $$.margin.top + 0.5;\n\n    if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\n      return;\n    }\n\n    var getZoomedDomain = function getZoomedDomain(selection) {\n      return selection && selection.map(function (x) {\n        return $$.x.invert(x);\n      });\n    };\n\n    var brush = $$.dragZoomBrush = d3.brushX().on('start', function () {\n      $$.api.unzoom();\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\n      config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n    }).on('brush', function () {\n      config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\n    }).on('end', function () {\n      if (d3.event.selection == null) {\n        return;\n      }\n\n      var zoomedDomain = getZoomedDomain(d3.event.selection);\n\n      if (!config.zoom_disableDefaultBehavior) {\n        $$.api.zoom(zoomedDomain);\n      }\n\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\n      config.zoom_onzoomend.call($$.api, zoomedDomain);\n    });\n    context.append('g').classed(CLASS.dragZoom, true).attr('clip-path', $$.clipPath).attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')').call(brush);\n  };\n\n  ChartInternal.prototype.getZoomDomain = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n        max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n    return [min, max];\n  };\n\n  ChartInternal.prototype.redrawForZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        zoom = $$.zoom,\n        x = $$.x;\n\n    if (!config.zoom_enabled) {\n      return;\n    }\n\n    if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n      return;\n    }\n\n    zoom.update();\n\n    if (config.zoom_disableDefaultBehavior) {\n      return;\n    }\n\n    if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n      x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n    }\n\n    $$.redraw({\n      withTransition: false,\n      withY: config.zoom_rescale,\n      withSubchart: false,\n      withEventRect: false,\n      withDimension: false\n    });\n\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\n      $$.cancelClick = true;\n    }\n  };\n\n  return c3;\n});","map":{"version":3,"sources":["D:/queen-supermarket/Biz1Market_EXE/node_modules/c3/c3.js"],"names":["global","factory","exports","module","define","amd","self","c3","ChartInternal","api","$$","d3","window","require","undefined","config","getDefaultConfig","data","cache","axes","Chart","internal","loadConfig","beforeInit","init","afterInit","bindThis","fn","target","argThis","Object","keys","forEach","key","bind","length","prototype","asHalfPixel","n","Math","ceil","ceil10","v","diffDomain","d","getOption","options","defaultValue","isDefined","getPathBox","path","box","getBBox","items","pathSegList","getItem","minX","x","minY","min","y","width","height","element","ignore","hasValue","dict","value","found","isArray","o","Array","isEmpty","isString","isFunction","isNumber","isUndefined","isValue","notEmpty","sanitise","str","replace","flattenArray","arr","concat","apply","isWithinBox","point","sensitivity","xStart","xEnd","yStart","yEnd","getIEVersion","agent","navigator","userAgent","pos","indexOf","parseInt","substring","isIE","version","ver","AxisInternal","component","params","scale","scaleLinear","range","orient","innerTickSize","outerTickSize","withOuterTick","tickPadding","tickValues","tickFormat","tickArguments","tickOffset","tickCulling","tickCentered","tickTextCharSize","tickTextRotate","tickLength","axis","generateAxis","axisX","selection","attr","axisY","scaleExtent","domain","start","stop","generateTicks","i","ticks","push","unshift","copyScale","newScale","copy","isCategory","textFormatted","formatted","updateRange","rangeExtent","updateTickTextCharSize","tick","size","h","w","select","text","each","isVertical","tspanData","splitted","tickMultiline","splitTickText","tickMultilineMax","ellipsify","map","s","index","tickText","maxWidth","tickWidth","subtext","spaceIndex","textWidth","toString","call","split","charAt","substr","slice","max","ellipsified","remaining","available","padEnd","updateTickLength","lineY2","tickPosition","textY","rotate","textTransform","textTextAnchor","tspanDx","sin","PI","tspanDy","dy","g","transition","scale0","__chart__","scale1","ticksValues","selectAll","tickEnter","enter","insert","style","tickExit","exit","remove","tickUpdate","merge","tickTransform","tickX","tickY","lineUpdate","append","textUpdate","tspans","tspanEnter","tspanUpdate","pathUpdate","rangeBand","dx","arguments","top","right","bottom","left","format","isCentered","tickInterval","interval","node","getTotalLength","Infinity","culling","CLASS","chart","chartLine","chartLines","chartBar","chartBars","chartText","chartTexts","chartArc","chartArcs","chartArcsTitle","chartArcsBackground","chartArcsGaugeUnit","chartArcsGaugeMax","chartArcsGaugeMin","selectedCircle","selectedCircles","eventRect","eventRects","eventRectsSingle","eventRectsMultiple","zoomRect","brush","dragZoom","focused","defocused","region","regions","title","tooltipContainer","tooltip","tooltipName","shape","shapes","line","lines","bar","bars","circle","circles","arc","arcLabelLine","arcs","area","areas","empty","texts","gaugeValue","grid","gridLines","xgrid","xgrids","xgridLine","xgridLines","xgridFocus","ygrid","ygrids","ygridLine","ygridLines","colorScale","stanfordElements","stanfordLine","stanfordLines","stanfordRegion","stanfordRegions","stanfordText","stanfordTexts","axisXLabel","axisYLabel","axisY2","axisY2Label","legendBackground","legendItem","legendItemEvent","legendItemTile","legendItemHidden","legendItemFocused","dragarea","EXPANDED","SELECTED","INCLUDED","AxisClass","owner","Axis","main","axis_x_inner","clipPathForXAxis","getTranslate","axis_x_show","axis_rotated","textAnchorForXAxisLabel","axis_y_inner","clipPathForYAxis","axis_y_show","textAnchorForYAxisLabel","y2","axis_y2_show","textAnchorForY2AxisLabel","getXAxis","withoutTransition","withoutRotateTickText","axisParams","isCategorized","axis_x_tick_multiline","Number","axis_x_tick_multilineMax","axis_x_tick_width","axis_x_tick_rotate","isTimeSeries","parseDate","axis_x_tick_centered","axis_x_tick_culling","updateXAxisTickValues","targets","axis_x_tick_fit","axis_x_tick_count","generateTickValues","mapTargetsToUniqueXs","xAxis","subXAxis","getYAxis","axisId","isAxisNormalized","axis_y_tick_rotate","isTimeSeriesY","axis_y_tick_time_type","axis_y_tick_time_interval","getId","id","data_axes","getXAxisTickFormat","defaultAxisTimeFormat","categoryName","axis_x_tick_format","date","axisTimeFormat","getTickValues","getXAxisTickValues","axis_x_tick_values","getYAxisTickValues","axis_y_tick_values","yAxis","getY2AxisTickValues","axis_y2_tick_values","y2Axis","getLabelOptionByAxisId","option","axis_y_label","axis_y2_label","axis_x_label","getLabelText","setLabelText","getLabelPosition","defaultPosition","position","isInner","isOuter","isLeft","isCenter","isRight","isTop","isMiddle","isBottom","getXAxisLabelPosition","getYAxisLabelPosition","getY2AxisLabelPosition","getLabelPositionById","textForXAxisLabel","textForYAxisLabel","textForY2AxisLabel","xForAxisLabel","forHorizontal","dxForAxisLabel","textAnchorForAxisLabel","xForXAxisLabel","xForYAxisLabel","xForY2AxisLabel","dxForXAxisLabel","dxForYAxisLabel","dxForY2AxisLabel","dyForXAxisLabel","getMaxTickWidth","getHorizontalAxisHeight","dyForYAxisLabel","dyForY2AxisLabel","axis_y2_inner","withoutRecompute","targetsToShow","dummy","svg","currentMaxTickWidths","filterTargetsToShow","getYDomain","yOrient","yAxisTickValues","y2Orient","y2AxisTickValues","getXDomain","xOrient","xAxisTickFormat","xAxisTickValues","classed","updateLabels","withTransition","getPadding","padding","domainLength","p","unit","convertPixelsToAxisPadding","pixels","values","tickCount","forTimeSeries","targetCount","end","count","tickValue","Date","sort","a","b","generateTransitions","duration","axisSubX","subx","redraw","isHidden","generate","initParams","data_url","convertUrlToData","data_mimeType","data_headers","data_keys","initWithData","data_json","convertJsonToData","data_rows","convertRowsToData","data_columns","convertColumnsToData","Error","clipId","valueOf","clipIdForXAxis","clipIdForYAxis","clipIdForGrid","clipIdForSubchart","clipPath","getClipPath","clipPathForGrid","clipPathForSubchart","dragStart","dragging","flowing","cancelClick","mouseover","transiting","color","generateColor","levelColor","generateLevelColor","dataTimeParse","data_xLocaltime","timeParse","utcParse","data_xFormat","axis_x_localtime","timeFormat","utcFormat","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","hiddenTargetIds","hiddenLegendIds","focusedTargetIds","defocusedTargetIds","subXOrient","isLegendRight","legend_position","isLegendInset","isLegendTop","legend_inset_anchor","isLegendLeft","legendStep","legendItemWidth","legendItemHeight","rotated_padding_left","rotated_padding_right","rotated_padding_top","withoutFadeIn","intervalForObserveInserted","initChartElements","initBar","initLine","initArc","initGauge","initText","defs","binding","bindto","selectChart","document","createElement","observeInserted","html","xs","convertDataToTargets","data_filter","filter","data_hide","addHiddenTargetIds","mapToIds","legend_hide","addHiddenLegendIds","isStanfordGraphType","initStanfordData","updateSizes","updateScales","extent","subX","subY","subY2","orgXDomain","on","onmouseover","onmouseout","svg_classname","clipChart","appendClip","clipXAxis","clipYAxis","clipGrid","clipSubchart","updateSvgSize","initPie","initDragZoom","subchart_show","initSubchart","initTooltip","initLegend","initTitle","initZoom","drawColorScale","initSubchartBrush","initRegion","initGrid","grid_lines_front","initGridLines","initStanfordElements","initEventRect","updateTargets","axis_x_selection","selectionAsValue","getDefaultSelection","updateDimension","oninit","withTransform","withUpdateXDomain","withUpdateOrgXDomain","withTransitionForAxis","bindResize","bindWindowFocus","smoothLines","el","type","x1","x2","y1","legendHeight","legend","getLegendHeight","legendWidth","getLegendWidth","legendHeightForBottom","hasArc","hasArcType","xAxisHeight","subchartXAxisHeight","subchartHeight","subchart_size_height","currentWidth","getCurrentWidth","currentHeight","getCurrentHeight","margin","getCurrentPaddingTop","getCurrentPaddingRight","getCurrentPaddingBottom","getCurrentPaddingLeft","margin2","NaN","margin3","updateSizeForLegend","width2","height2","arcWidth","arcHeight","hasType","gauge_fullCircle","getGaugeLabelHeight","updateRadius","radiusExpanded","updateTargetsForText","updateTargetsForBar","updateTargetsForLine","updateTargetsForArc","updateTargetsForSubchart","showTargets","isTargetToShow","transition_duration","transitions","areaIndices","getShapeIndices","isAreaType","barIndices","isBarType","lineIndices","isLineType","withY","withSubchart","withTransitionForExit","withTrimXDomain","withLegend","withEventRect","withDimension","withUpdateXAxis","hideAxis","drawArea","drawBar","drawLine","xForText","yForText","durationForExit","durationForAxis","transitionsToWait","waitForDraw","flow","intervalForCulling","xDomainForZoom","xv","cx","cy","legend_show","updateLegend","updateXDomain","zoom_rescale","orgDomain","axis_y_tick_count","axis_y2_tick_count","axis_x_tick_culling_max","e","generateDrawArea","generateDrawBar","generateDrawLine","generateXYForText","updateCircleY","circleY","circleX","updateXgridFocus","data_empty_label_text","redrawEventRect","updateGrid","updateStanfordElements","updateRegion","updateBar","updateLine","updateArea","updateCircle","hasDataLabel","updateText","redrawTitle","redrawArc","redrawSubchart","generateFlow","isTabVisible","redrawBar","redrawLine","redrawArea","redrawCircle","redrawText","redrawRegion","redrawGrid","generateWait","t","add","onrendered","updateAndRedraw","withTransitionForTransform","transformAll","redrawWithoutRescale","axis_x_type","isCustomX","data_x","data_xs","axis_y_type","initialOpacity","initialOpacityForCircle","opacityForCircle","isPointShouldBeShown","point_show","opacity","isStanfordType","isScatterType","opacityForText","xx","xvCustom","xyValue","axis_x_categories","yvCustom","yScale","yv","subxx","transformMain","transformContext","transformLegend","getXAxisClipX","getXAxisClipY","getXAxisClipWidth","getXAxisClipHeight","getYAxisClipX","getYAxisClipY","getYAxisClipWidth","getYAxisClipHeight","withoutAxis","observer","MutationObserver","console","error","mutations","mutation","previousSibling","disconnect","setInterval","parentNode","clearInterval","update","observe","attributes","childList","characterData","resizeFunction","generateResize","onresize","resize_auto","resizeTimeout","clearTimeout","setTimeout","onresized","resizeIfElementDisplayed","offsetParent","addEventListener","_this","windowFocusHandler","unbindWindowFocus","removeEventListener","resizeFunctions","callResizeFunctions","f","splice","endall","callback","timer","done","parsedDate","isNaN","hidden","SVGPathSeg","typeAsLetter","owningPathSegList","pathSegType","pathSegTypeAsLetter","_owningPathSegList","classname","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_REL","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","_segmentChanged","segmentChanged","SVGPathSegClosePath","create","_asPathString","clone","SVGPathSegMovetoAbs","_x","_y","defineProperty","get","set","enumerable","SVGPathSegMovetoRel","SVGPathSegLinetoAbs","SVGPathSegLinetoRel","SVGPathSegCurvetoCubicAbs","_x1","_y1","_x2","_y2","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegArcAbs","r1","r2","angle","largeArcFlag","sweepFlag","_r1","_r2","_angle","_largeArcFlag","_sweepFlag","SVGPathSegArcRel","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathElement","createSVGPathSegClosePath","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoRel","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","getPathSegAtLength","distance","isFinite","measurementElement","createElementNS","setAttribute","getAttribute","lastPathSegment","numberOfItems","removeItem","SVGPathSegList","pathElement","_pathElement","_list","_parsePath","_mutationObserverConfig","attributeFilter","_pathElementMutationObserver","_updateListFromPathMutations","_checkPathSynchronizedToList","_pathSegList","takeRecords","mutationRecords","hasPathMutations","record","attributeName","_writeListToPath","_pathSegArrayAsString","pathSeg","clear","initialize","newItem","_checkValidIndex","insertItemBefore","replaceItem","item","appendItem","pathSegArray","string","first","Builder","appendSegment","Source","_string","_currentIndex","_endIndex","_previousCommand","_skipOptionalSpaces","_isCurrentSpace","character","_skipOptionalSpacesOrDelimiter","hasMoreData","peekSegmentType","lookahead","_pathSegTypeFromChar","_nextCommandHelper","previousCommand","initialCommandIsMoveTo","command","_parseNumber","exponent","integer","frac","decimal","sign","expsign","startIndex","startIntPartIndex","scanIntPartIndex","multiplier","number","pow","_parseArcFlag","flag","flagChar","parseSegment","points","arcAngle","arcLarge","arcSweep","builder","source","String","targetLength","padString","repeat","assign","varArgs","TypeError","to","nextSource","nextKey","hasOwnProperty","writable","configurable","labels","axis_x_max","axis_y_max","axis_y2_max","axis_x_min","axis_y_min","axis_y2_min","types","axis_y2_type","category","categories","resize","size_width","size_height","flush","destroy","targetIds","shown","targetId","flat","reduce","ret","dataValue","names","clearLegendItemTextBoxCache","updateDataAttributes","colors","stackNormalized","normalized","isStackNormalized","data_stack_normalize","donut","padAngle","donut_padAngle","args","notfoundIds","orgDataCount","getMaxDataCount","dataCount","baseTarget","baseValue","tail","diff","json","rows","columns","j","getOtherTargetX","missing","translateX","scaleX","transform","flowIndex","flowLength","flowStart","getValueOnIndex","flowEnd","durationForFlow","wait","mainRegion","mainText","mainBar","mainLine","mainArea","mainCircle","updateXGrid","hideXGridFocus","flowTransition","ease","easeLinear","isRegionOnX","xgridAttr","regionX","regionWidth","focus","candidates","mapToTargetIds","selectorTargets","revert","defocus","expandArc","toggleFocusLegend","unexpandArc","showLegend","isLegendToShow","selectorLegends","grids","grid_x_lines","removeGridLines","grid_y_lines","groups","data_groups","show","hide","hideLegend","load","addXs","classes","data_classes","data_colors","hasCaches","cacheIds","getCaches","unload","loadFromArgs","ids","pie","pie_padAngle","c","selected","getTargetSelectorSuffix","nodes","__data__","indices","resetOther","data_selection_enabled","toggle","getToggle","isTargetId","data_selection_grouped","isTargetIndex","isSelected","data_selection_isselectable","unselect","removeHiddenTargetIds","that","subchart","isShown","getTargets","removeSubchart","mouse","filterByX","getMousePosition","dispatchEvent","tooltip_onshow","tooltip_onhide","transformTo","optionsForRedraw","setTargetType","updateTargetX","updateTargetXs","zoom","zoom_onzoom","enable","enabled","zoom_enabled","unzoom","zoom_x_max","zoom_x_min","getPadAngle","orderFct","getOrderFunction","isOrderAsc","isOrderDesc","defaultSort_1","t1","t2","gauge_width","donut_width","gaugeArcWidth","gauge_arcs_minWidth","radius","innerRadiusRatio","innerRadius","updateArc","svgArc","getSvgArc","svgArcExpanded","getSvgArcExpanded","svgArcExpandedSub","updateAngle","gMin","gMax","gTic","gValue","startAngle","endAngle","isGaugeType","gauge_min","gauge_max","gauge_startingAngle","hasGaugeType","singleArcWidth","outerRadius","newArc","withoutUpdate","updated","centroid","rate","expandWidth","getArc","force","isArcType","transformForArcLabel","ratio","translate","hasGauge","sqrt","donut_label_ratio","pie_label_ratio","cos","abs","getArcRatio","getRatio","convertToArcData","addName","textForArcLabel","shouldShowArcLabel","meetsArcLabelThreshold","getArcLabelFormat","defaultArcValueFormat","textForGaugeMinMax","isMax","getGaugeLabelExtents","shouldExpand","expandDuration","isDonutType","donut_expand_duration","gauge_expand_duration","isPieType","pie_expand_duration","donut_expand","gauge_expand","pie_expand","shouldShow","donut_label_show","pie_label_show","threshold","donut_label_threshold","pie_label_threshold","pie_label_format","gauge_label_format","donut_label_format","gauge_label_extents","getArcTitle","donut_title","mainPies","mainPieEnter","classChartArc","classArcs","classFocus","mainArc","arcLabelLines","mainArcLabelLine","arcData","classArc","interaction_enabled","_current","total","gauge_labelLine_show","lineLength","lineThickness","innerLineLength","lineAngle","arcInnerRadius","linePositioningAngle","data_onmouseover","selectedData","showTooltip","revertLegend","hideTooltip","data_onmouseout","toggleShape","data_onclick","attrTween","interpolate","interpolated","round","index_1","backgroundArc","d1","gauge_label_show","gauge_units","addToCache","getFromCache","resetCache","test","addCache","cloneTarget","generateTargetClass","generateClass","prefix","classText","classTexts","classShape","classShapes","classLine","classLines","classCircle","classCircles","classBar","classBars","classArea","classAreas","classRegion","classEvent","classTarget","additionalClassSuffix","additionalClass","classFocused","classDefocused","classChartText","classChartLine","classChartBar","targetClass","CSS","escape","selectorTarget","selectorLegend","URL","parent","getAxisClipX","getAxisClipY","getAxisClipWidth","getAxisClipHeight","pattern","color_pattern","schemeCategory10","data_color","Function","color_threshold","asValue","padding_left","padding_right","padding_top","padding_bottom","zoom_initialRange","zoom_type","zoom_disableDefaultBehavior","zoom_privileged","zoom_onzoomstart","zoom_onzoomend","interaction_brighten","data_epochs","data_xSort","data_idConverter","data_names","data_type","data_types","data_labels","data_order","data_regions","data_selection_multiple","data_selection_draggable","data_onselected","data_onunselected","subchart_axis_x_show","subchart_onbrush","legend_inset_x","legend_inset_y","legend_inset_step","legend_item_onclick","legend_item_onmouseover","legend_item_onmouseout","legend_equally","legend_padding","legend_item_tile_width","legend_item_tile_height","axis_x_tick_outer","axis_x_padding","axis_x_height","axis_y_inverted","axis_y_center","axis_y_tick_format","axis_y_tick_outer","axis_y_padding","axis_y_default","axis_y2_inverted","axis_y2_center","axis_y2_tick_format","axis_y2_tick_outer","axis_y2_padding","axis_y2_default","grid_x_show","grid_x_type","grid_y_show","grid_y_ticks","grid_focus_show","point_r","point_sensitivity","point_focus_expand_enabled","point_focus_expand_r","point_select_r","line_connectNull","line_step_type","bar_width","bar_width_ratio","bar_width_max","bar_zerobased","bar_space","area_zerobased","area_above","spline_interpolation_type","stanford_lines","stanford_regions","stanford_texts","stanford_scaleMin","stanford_scaleMax","stanford_scaleWidth","stanford_scaleFormat","stanford_scaleValues","stanford_colors","stanford_padding","tooltip_show","tooltip_grouped","tooltip_order","tooltip_format_title","tooltip_format_name","tooltip_format_value","tooltip_horizontal","tooltip_position","tooltip_contents","defaultTitleFormat","defaultValueFormat","getTooltipContent","tooltip_init_show","tooltip_init_x","tooltip_init_position","title_text","title_padding","title_position","additionalConfig","this_config","read","find","shift","url","mimeType","headers","converter","tsv","convertXsvToData","csv","then","catch","xsv","row","_a","new_rows","targetKeys","new_row","findValueInJson","object","pathArray","k","newRows","newRow","appendXs","epochs","isX","isNotX","isEpochs","isNotXAndNotEpochs","xKey","getXKey","rawX","generateTargetX","getOtherTargetXs","getXValuesOfXKey","convertedId","id_org","returnData","v1","v2","hasNegativeValue","hasNegativeValueInTargets","hasPositiveValue","hasPositiveValueInTargets","some","isTargetNormalized","group","includes","getTotalPerIndex","cached","sum","sumByAxis","getTotalDataSum","totalDataSum","xValues","getXValue","idsForX","name","valueOnIndex","hasTarget","getTargetsToShow","removeHiddenLegendIds","getValuesAsIdKeyed","ys","checkValueInTargets","checker","toLowerCase","orderAsc","orderDesc","reducer","t1Sum","t2Sum","order","orderTargets","fct","filterByIndex","filterRemoveNull","filterByXDomain","xDomain","getDataLabelLength","lengths","paddingCoef","dataLabelFormat","isNoneArc","isArc","findClosestFromTargets","findClosest","horizontalDistance","dist","findClosestFromTargetsByX","closest","newDiff","dataPoints","computeDist","minDist","isWithinBar","xIndex","yIndex","convertValuesToStep","converted","asPercent","attrs","current","getYDomainMin","baseId","idsInGroup","getYDomainMax","targetsByAxisId","yTargets","yMin","yMax","yDomainMin","yDomainMax","center","yDomainAbs","isAllPositive","isAllNegative","isZeroBased","isInverted","showHorizontalDataLabel","showVerticalDataLabel","pixelsToAxisPadding","getY","reverse","getXDomainMin","getXDomainMax","getXDomainPadding","maxDataCount","paddingLeft","paddingRight","firstX","lastX","getTime","withTrim","updateScale","trimXDomain","zoomDomain","getZoomDomain","drag","sx","sy","mx","my","maxX","maxY","isIncluded","_w","_h","isWithin","togglePoint","togglePath","dragstart","dragend","getYFormat","forArc","formatForY","yFormat","formatForY2","y2Format","toFixed","defaultFormat","xgridData","generateGridData","xgridEnter","updateYGrid","gridValues","ygridEnter","gridTextAnchor","gridTextDx","xGridTextX","yGridTextX","xgridLineEnter","ygridLineEnter","showXGridFocus","dataToShow","focusEl","gridData","firstYear","lastYear","tickNum","getFullYear","getGridFilterToRemove","param","forX","toRemove","toShow","zoomTransform","mouseout","unexpandCircles","unexpandBars","isHoveringDataPoint","withName","isMouseCloseToDataPoint","showSingleDataPoint","closestByX","mouseX","invert","expandCircles","expandBars","sameXData","isWithinShape","getYScale","selector","getBoundingClientRect","event","createEvent","initMouseEvent","legendItemTextBox","legendHasRendered","updateLegendWithDefaults","insetLegendPosition","updateLegendStep","step","updateLegendItemWidth","updateLegendItemHeight","opacityForLegend","opacityForUnfocusedLegend","xForLegend","xForLegendText","xForLegendRect","yForLegend","yForLegendText","yForLegendRect","x1ForLegendTile","x2ForLegendTile","yForLegendTile","paddingTop","maxHeight","posMin","tileWidth","l","totalLength","offsets","widths","heights","margins","steps","rects","tiles","background","getTextBox","textElement","getTextRect","textContent","updatePositions","reset","isLast","itemWidth","itemHeight","itemLength","areaLength","maxLength","updateValues","withoutStep","altKey","regionY","regionHeight","labelRegion","regionLabels","labelOffsetX","labelOffsetY","labelTransform","xPos","yPos","label","vertical","paddingX","paddingY","c3LogScale","linearScale","logScale","PROJECTION","scaleLog","nice","logspace","len","tmp","m","getScale","forTimeseries","scaleTime","getX","offset","_scale","raw","getSubYScale","forInit","xMin","xMax","subXMin","subXMax","subYMin","subYMax","selectPoint","r","pointSelectR","unselectPoint","selectPath","rgb","brighter","unselectPath","nodeName","isStepType","mainBars","mainBarEnter","barData","getBarW","barTargetsNum","getBars","isSub","getPoints","generateGetBarPoints","indexX","indexY","__max__","barW","barX","getShapeX","barY","getShapeY","barOffset","getShapeOffset","barSpaceOffset","y0","posX","posY","barShape","typeFilter","targetsNum","rowValues","constructor","isWithinStep","isWithinCircle","getInterpolate","linear","curveLinear","curveLinearClosed","basis","curveBasis","curveBasisOpen","curveBasisClosed","bundle","curveBundle","cardinal","curveCardinal","curveCardinalOpen","curveCardinalClosed","monotone","curveMonotoneX","curveStep","curveStepBefore","curveStepAfter","isSplineType","mainLines","mainLineEnter","lineData","generateGetLinePoints","yScaleGetter","xValue","yValue","defined","x0","lineWithRegions","curve","lineTargetsNum","lineOffset","_regions","prev","sWithRegion","xp","yp","dd","diffx2","xOffset","isWithinRegions","generateM","d0","x_diff","xv0","xv1","mainAreaEnter","orgAreaOpacity","generateGetAreaPoints","value0","getAreaBaseValue","value1","areaTargetsNum","areaOffset","lineOrScatterOrStanfordData","mainCircleEnter","pointR","getStanfordPointColor","getCircles","pointExpandedR","d3_this","getParentWidth","getParentHeight","getTitlePadding","getAxisWidthByAxisId","defaultPadding","legendWidthOnRight","getColorScalePadding","getParentRectValue","tagName","offsetWidth","getSvgLeft","hasLeftAxisRect","leftAxisClass","leftAxis","svgRect","chartRect","svgLeft","isSubchart","initBrush","brushY","brushX","sourceEvent","redrawForBrush","updateExtent","context","move","brushSelection","contextLineEnter","contextLine","contextBarEnter","contextBar","updateBarForSubchart","redrawBarForSubchart","drawBarOnSub","random","updateLineForSubchart","redrawLineForSubchart","drawLineOnSub","updateAreaForSubchart","contextArea","contextAreaEnter","redrawAreaForSubchart","drawAreaOnSub","zoomIdentity","mainTextEnter","barOrLineData","forFlow","cls","font","rect","getAreaPoints","getBarPoints","getLinePoints","getter","getXForText","getYForText","isSafari","isChrome","xForTitle","yForTitle","powerOfTen","log","LN10","barWidth","barHeight","legendAxis","axisScale","inverseScale","scaleSequential","minEpochs","maxEpochs","axisRight","xForColorScale","compareEpochs","interpolateHslLong","hsl","colorscale","scaleSequentialLog","getCentroid","getRegionArea","point1","point2","getStanfordTooltipTitle","labelX","labelY","countEpochsInRegion","accumulator","currentValue","pointInRegion","percentage","xi","yi","yj","xj","intersect","inside","stanfordLineEnter","stanfordRegionEnter","stanfordTextEnter","countPointsInRegion","content","join","temp","getTooltipSortFunction","obj","sortFunction","titleFormat","nameFormat","bgcolor","valueFormat","tooltipSortFunction","tooltipPosition","tWidth","tHeight","tooltipLeft","tooltipRight","tooltipTop","chartRight","positionFunction","property","has","ua","startEvent","redrawForZoom","clientX","clientY","updateDomain","rescaleY","rescaleX","translateExtent","brushXPos","brushYPos","getZoomedDomain","dragZoomBrush","zoomedDomain"],"mappings":"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","sourcesContent":["/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.c3 = factory());\n}(this, (function () { 'use strict';\n\n  function ChartInternal(api) {\r\n      var $$ = this;\r\n      // Note: This part will be replaced by rollup-plugin-modify\r\n      // When bundling esm output. Beware of changing this line.\r\n      // TODO: Maybe we should check that the modification by rollup-plugin-modify\r\n      // is valid during unit tests.\r\n      $$.d3 = window.d3\r\n          ? window.d3\r\n          : typeof require !== 'undefined'\r\n              ? require('d3')\r\n              : undefined;\r\n      $$.api = api;\r\n      $$.config = $$.getDefaultConfig();\r\n      $$.data = {};\r\n      $$.cache = {};\r\n      $$.axes = {};\r\n  }\n\n  /**\r\n   * The Chart class\r\n   *\r\n   * The methods of this class is the public APIs of the chart object.\r\n   */\r\n  function Chart(config) {\r\n      this.internal = new ChartInternal(this);\r\n      this.internal.loadConfig(config);\r\n      this.internal.beforeInit(config);\r\n      this.internal.init();\r\n      this.internal.afterInit(config);\r\n      (function bindThis(fn, target, argThis) {\r\n          Object.keys(fn).forEach(function (key) {\r\n              target[key] = fn[key].bind(argThis);\r\n              if (Object.keys(fn[key]).length > 0) {\r\n                  bindThis(fn[key], target[key], argThis);\r\n              }\r\n          });\r\n      })(Chart.prototype, this, this);\r\n  }\n\n  var asHalfPixel = function (n) {\r\n      return Math.ceil(n) + 0.5;\r\n  };\r\n  var ceil10 = function (v) {\r\n      return Math.ceil(v / 10) * 10;\r\n  };\r\n  var diffDomain = function (d) {\r\n      return d[1] - d[0];\r\n  };\r\n  var getOption = function (options, key, defaultValue) {\r\n      return isDefined(options[key]) ? options[key] : defaultValue;\r\n  };\r\n  var getPathBox = function (path) {\r\n      var box = getBBox(path), items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)], minX = items[0].x, minY = Math.min(items[0].y, items[1].y);\r\n      return { x: minX, y: minY, width: box.width, height: box.height };\r\n  };\r\n  var getBBox = function (element) {\r\n      try {\r\n          return element.getBBox();\r\n      }\r\n      catch (ignore) {\r\n          // Firefox will throw an exception if getBBox() is called whereas the\r\n          // element is rendered with display:none\r\n          // See https://github.com/c3js/c3/issues/2692\r\n          // The previous code was using `getBoundingClientRect` which was returning\r\n          // everything at 0 in this case so let's reproduce this behavior here.\r\n          return { x: 0, y: 0, width: 0, height: 0 };\r\n      }\r\n  };\r\n  var hasValue = function (dict, value) {\r\n      var found = false;\r\n      Object.keys(dict).forEach(function (key) {\r\n          if (dict[key] === value) {\r\n              found = true;\r\n          }\r\n      });\r\n      return found;\r\n  };\r\n  var isArray = function (o) {\r\n      return Array.isArray(o);\r\n  };\r\n  var isDefined = function (v) {\r\n      return typeof v !== 'undefined';\r\n  };\r\n  var isEmpty = function (o) {\r\n      return (typeof o === 'undefined' ||\r\n          o === null ||\r\n          (isString(o) && o.length === 0) ||\r\n          (typeof o === 'object' && Object.keys(o).length === 0));\r\n  };\r\n  var isFunction = function (o) {\r\n      return typeof o === 'function';\r\n  };\r\n  var isNumber = function (o) {\r\n      return typeof o === 'number';\r\n  };\r\n  var isString = function (o) {\r\n      return typeof o === 'string';\r\n  };\r\n  var isUndefined = function (v) {\r\n      return typeof v === 'undefined';\r\n  };\r\n  var isValue = function (v) {\r\n      return v || v === 0;\r\n  };\r\n  var notEmpty = function (o) {\r\n      return !isEmpty(o);\r\n  };\r\n  var sanitise = function (str) {\r\n      return typeof str === 'string'\r\n          ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n          : str;\r\n  };\r\n  var flattenArray = function (arr) {\r\n      return Array.isArray(arr) ? [].concat.apply([], arr) : [];\r\n  };\r\n  /**\r\n   * Returns whether the point is within the given box.\r\n   *\r\n   * @param {Array} point An [x,y] coordinate\r\n   * @param {Object} box An object with {x, y, width, height} keys\r\n   * @param {Number} sensitivity An offset to ease check on very small boxes\r\n   */\r\n  var isWithinBox = function (point, box, sensitivity) {\r\n      if (sensitivity === void 0) { sensitivity = 0; }\r\n      var xStart = box.x - sensitivity;\r\n      var xEnd = box.x + box.width + sensitivity;\r\n      var yStart = box.y + box.height + sensitivity;\r\n      var yEnd = box.y - sensitivity;\r\n      return (xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart);\r\n  };\r\n  /**\r\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\r\n   *\r\n   * @param string agent Optional parameter to specify user agent\r\n   */\r\n  var getIEVersion = function (agent) {\r\n      // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\r\n      if (typeof agent === 'undefined') {\r\n          agent = window.navigator.userAgent;\r\n      }\r\n      var pos = agent.indexOf('MSIE '); // up to IE10\r\n      if (pos > 0) {\r\n          return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\r\n      }\r\n      pos = agent.indexOf('Trident/'); // IE11\r\n      if (pos > 0) {\r\n          pos = agent.indexOf('rv:');\r\n          return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\r\n      }\r\n      return false;\r\n  };\r\n  /**\r\n   * Returns whether the used browser is Internet Explorer.\r\n   *\r\n   * @param version Optional parameter to specify IE version\r\n   */\r\n  var isIE = function (version) {\r\n      var ver = getIEVersion();\r\n      if (typeof version === 'undefined') {\r\n          return !!ver;\r\n      }\r\n      return version === ver;\r\n  };\n\n  function AxisInternal(component, params) {\r\n      var internal = this;\r\n      internal.component = component;\r\n      internal.params = params || {};\r\n      internal.d3 = component.d3;\r\n      internal.scale = internal.d3.scaleLinear();\r\n      internal.range;\r\n      internal.orient = 'bottom';\r\n      internal.innerTickSize = 6;\r\n      internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\r\n      internal.tickPadding = 3;\r\n      internal.tickValues = null;\r\n      internal.tickFormat;\r\n      internal.tickArguments;\r\n      internal.tickOffset = 0;\r\n      internal.tickCulling = true;\r\n      internal.tickCentered;\r\n      internal.tickTextCharSize;\r\n      internal.tickTextRotate = internal.params.tickTextRotate;\r\n      internal.tickLength;\r\n      internal.axis = internal.generateAxis();\r\n  }\r\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\r\n      });\r\n  };\r\n  AxisInternal.prototype.axisY = function (selection, y) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(0,' + Math.ceil(y(d)) + ')';\r\n      });\r\n  };\r\n  AxisInternal.prototype.scaleExtent = function (domain) {\r\n      var start = domain[0], stop = domain[domain.length - 1];\r\n      return start < stop ? [start, stop] : [stop, start];\r\n  };\r\n  AxisInternal.prototype.generateTicks = function (scale) {\r\n      var internal = this;\r\n      var i, domain, ticks = [];\r\n      if (scale.ticks) {\r\n          return scale.ticks.apply(scale, internal.tickArguments);\r\n      }\r\n      domain = scale.domain();\r\n      for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\r\n          ticks.push(i);\r\n      }\r\n      if (ticks.length > 0 && ticks[0] > 0) {\r\n          ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\r\n      }\r\n      return ticks;\r\n  };\r\n  AxisInternal.prototype.copyScale = function () {\r\n      var internal = this;\r\n      var newScale = internal.scale.copy(), domain;\r\n      if (internal.params.isCategory) {\r\n          domain = internal.scale.domain();\r\n          newScale.domain([domain[0], domain[1] - 1]);\r\n      }\r\n      return newScale;\r\n  };\r\n  AxisInternal.prototype.textFormatted = function (v) {\r\n      var internal = this, formatted = internal.tickFormat ? internal.tickFormat(v) : v;\r\n      return typeof formatted !== 'undefined' ? formatted : '';\r\n  };\r\n  AxisInternal.prototype.updateRange = function () {\r\n      var internal = this;\r\n      internal.range = internal.scale.rangeExtent\r\n          ? internal.scale.rangeExtent()\r\n          : internal.scaleExtent(internal.scale.range());\r\n      return internal.range;\r\n  };\r\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\r\n      var internal = this;\r\n      if (internal.tickTextCharSize) {\r\n          return internal.tickTextCharSize;\r\n      }\r\n      var size = {\r\n          h: 11.5,\r\n          w: 5.5\r\n      };\r\n      tick\r\n          .select('text')\r\n          .text(function (d) {\r\n          return internal.textFormatted(d);\r\n      })\r\n          .each(function (d) {\r\n          var box = getBBox(this), text = internal.textFormatted(d), h = box.height, w = text ? box.width / text.length : undefined;\r\n          if (h && w) {\r\n              size.h = h;\r\n              size.w = w;\r\n          }\r\n      })\r\n          .text('');\r\n      internal.tickTextCharSize = size;\r\n      return size;\r\n  };\r\n  AxisInternal.prototype.isVertical = function () {\r\n      return this.orient === 'left' || this.orient === 'right';\r\n  };\r\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\r\n      var internal = this;\r\n      var splitted = internal.params.tickMultiline\r\n          ? internal.splitTickText(d, scale)\r\n          : [].concat(internal.textFormatted(d));\r\n      if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\r\n          splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\r\n      }\r\n      return splitted.map(function (s) {\r\n          return { index: i, splitted: s, length: splitted.length };\r\n      });\r\n  };\r\n  AxisInternal.prototype.splitTickText = function (d, scale) {\r\n      var internal = this, tickText = internal.textFormatted(d), maxWidth = internal.params.tickWidth, subtext, spaceIndex, textWidth, splitted = [];\r\n      if (Object.prototype.toString.call(tickText) === '[object Array]') {\r\n          return tickText;\r\n      }\r\n      if (!maxWidth || maxWidth <= 0) {\r\n          maxWidth = internal.isVertical()\r\n              ? 95\r\n              : internal.params.isCategory\r\n                  ? Math.ceil(scale(1) - scale(0)) - 12\r\n                  : 110;\r\n      }\r\n      function split(splitted, text) {\r\n          spaceIndex = undefined;\r\n          for (var i = 1; i < text.length; i++) {\r\n              if (text.charAt(i) === ' ') {\r\n                  spaceIndex = i;\r\n              }\r\n              subtext = text.substr(0, i + 1);\r\n              textWidth = internal.tickTextCharSize.w * subtext.length;\r\n              // if text width gets over tick width, split by space index or crrent index\r\n              if (maxWidth < textWidth) {\r\n                  return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\r\n              }\r\n          }\r\n          return splitted.concat(text);\r\n      }\r\n      return split(splitted, tickText + '');\r\n  };\r\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\r\n      if (splitted.length <= max) {\r\n          return splitted;\r\n      }\r\n      var ellipsified = splitted.slice(0, max);\r\n      var remaining = 3;\r\n      for (var i = max - 1; i >= 0; i--) {\r\n          var available = ellipsified[i].length;\r\n          ellipsified[i] = ellipsified[i]\r\n              .substr(0, available - remaining)\r\n              .padEnd(available, '.');\r\n          remaining -= available;\r\n          if (remaining <= 0) {\r\n              break;\r\n          }\r\n      }\r\n      return ellipsified;\r\n  };\r\n  AxisInternal.prototype.updateTickLength = function () {\r\n      var internal = this;\r\n      internal.tickLength =\r\n          Math.max(internal.innerTickSize, 0) + internal.tickPadding;\r\n  };\r\n  AxisInternal.prototype.lineY2 = function (d) {\r\n      var internal = this, tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\r\n      return internal.range[0] < tickPosition && tickPosition < internal.range[1]\r\n          ? internal.innerTickSize\r\n          : 0;\r\n  };\r\n  AxisInternal.prototype.textY = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate\r\n          ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1)\r\n          : internal.tickLength;\r\n  };\r\n  AxisInternal.prototype.textTransform = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 'rotate(' + rotate + ')' : '';\r\n  };\r\n  AxisInternal.prototype.textTextAnchor = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? (rotate > 0 ? 'start' : 'end') : 'middle';\r\n  };\r\n  AxisInternal.prototype.tspanDx = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\r\n  };\r\n  AxisInternal.prototype.tspanDy = function (d, i) {\r\n      var internal = this, dy = internal.tickTextCharSize.h;\r\n      if (i === 0) {\r\n          if (internal.isVertical()) {\r\n              dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\r\n          }\r\n          else {\r\n              dy = '.71em';\r\n          }\r\n      }\r\n      return dy;\r\n  };\r\n  AxisInternal.prototype.generateAxis = function () {\r\n      var internal = this, d3 = internal.d3, params = internal.params;\r\n      function axis(g, transition) {\r\n          var self;\r\n          g.each(function () {\r\n              var g = (axis.g = d3.select(this));\r\n              var scale0 = this.__chart__ || internal.scale, scale1 = (this.__chart__ = internal.copyScale());\r\n              var ticksValues = internal.tickValues\r\n                  ? internal.tickValues\r\n                  : internal.generateTicks(scale1), ticks = g.selectAll('.tick').data(ticksValues, scale1), tickEnter = ticks\r\n                  .enter()\r\n                  .insert('g', '.domain')\r\n                  .attr('class', 'tick')\r\n                  .style('opacity', 1e-6), \r\n              // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\r\n              tickExit = ticks.exit().remove(), tickUpdate = ticks.merge(tickEnter), tickTransform, tickX, tickY;\r\n              if (params.isCategory) {\r\n                  internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\r\n                  tickX = internal.tickCentered ? 0 : internal.tickOffset;\r\n                  tickY = internal.tickCentered ? internal.tickOffset : 0;\r\n              }\r\n              else {\r\n                  internal.tickOffset = tickX = 0;\r\n              }\r\n              internal.updateRange();\r\n              internal.updateTickLength();\r\n              internal.updateTickTextCharSize(g.select('.tick'));\r\n              var lineUpdate = tickUpdate\r\n                  .select('line')\r\n                  .merge(tickEnter.append('line')), textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\r\n              var tspans = tickUpdate\r\n                  .selectAll('text')\r\n                  .selectAll('tspan')\r\n                  .data(function (d, i) {\r\n                  return internal.tspanData(d, i, scale1);\r\n              }), tspanEnter = tspans.enter().append('tspan'), tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\r\n                  return d.splitted;\r\n              });\r\n              tspans.exit().remove();\r\n              var path = g.selectAll('.domain').data([0]), pathUpdate = path\r\n                  .enter()\r\n                  .append('path')\r\n                  .merge(path)\r\n                  .attr('class', 'domain');\r\n              // TODO: each attr should be one function and change its behavior by internal.orient, probably\r\n              switch (internal.orient) {\r\n                  case 'bottom': {\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return internal.textY(d, i);\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'top': {\r\n                      // TODO: rotated tick text\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return -1 * internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return (-1 * internal.textY(d, i) -\r\n                              (params.isCategory ? 2 : internal.tickLength - 2));\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          -internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'left': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', -internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'end');\r\n                      tspanUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          -internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'right': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'start');\r\n                      tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n              }\r\n              if (scale1.rangeBand) {\r\n                  var x = scale1, dx = x.rangeBand() / 2;\r\n                  scale0 = scale1 = function (d) {\r\n                      return x(d) + dx;\r\n                  };\r\n              }\r\n              else if (scale0.rangeBand) {\r\n                  scale0 = scale1;\r\n              }\r\n              else {\r\n                  tickExit.call(tickTransform, scale1, internal.tickOffset);\r\n              }\r\n              tickEnter.call(tickTransform, scale0, internal.tickOffset);\r\n              self = (transition ? tickUpdate.transition(transition) : tickUpdate)\r\n                  .style('opacity', 1)\r\n                  .call(tickTransform, scale1, internal.tickOffset);\r\n          });\r\n          return self;\r\n      }\r\n      axis.scale = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.scale;\r\n          }\r\n          internal.scale = x;\r\n          return axis;\r\n      };\r\n      axis.orient = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.orient;\r\n          }\r\n          internal.orient =\r\n              x in { top: 1, right: 1, bottom: 1, left: 1 } ? x + '' : 'bottom';\r\n          return axis;\r\n      };\r\n      axis.tickFormat = function (format) {\r\n          if (!arguments.length) {\r\n              return internal.tickFormat;\r\n          }\r\n          internal.tickFormat = format;\r\n          return axis;\r\n      };\r\n      axis.tickCentered = function (isCentered) {\r\n          if (!arguments.length) {\r\n              return internal.tickCentered;\r\n          }\r\n          internal.tickCentered = isCentered;\r\n          return axis;\r\n      };\r\n      axis.tickOffset = function () {\r\n          return internal.tickOffset;\r\n      };\r\n      axis.tickInterval = function () {\r\n          var interval, length;\r\n          if (params.isCategory) {\r\n              interval = internal.tickOffset * 2;\r\n          }\r\n          else {\r\n              length =\r\n                  axis.g\r\n                      .select('path.domain')\r\n                      .node()\r\n                      .getTotalLength() -\r\n                      internal.outerTickSize * 2;\r\n              interval = length / axis.g.selectAll('line').size();\r\n          }\r\n          return interval === Infinity ? 0 : interval;\r\n      };\r\n      axis.ticks = function () {\r\n          if (!arguments.length) {\r\n              return internal.tickArguments;\r\n          }\r\n          internal.tickArguments = arguments;\r\n          return axis;\r\n      };\r\n      axis.tickCulling = function (culling) {\r\n          if (!arguments.length) {\r\n              return internal.tickCulling;\r\n          }\r\n          internal.tickCulling = culling;\r\n          return axis;\r\n      };\r\n      axis.tickValues = function (x) {\r\n          if (typeof x === 'function') {\r\n              internal.tickValues = function () {\r\n                  return x(internal.scale.domain());\r\n              };\r\n          }\r\n          else {\r\n              if (!arguments.length) {\r\n                  return internal.tickValues;\r\n              }\r\n              internal.tickValues = x;\r\n          }\r\n          return axis;\r\n      };\r\n      return axis;\r\n  };\n\n  var CLASS = {\r\n      target: 'c3-target',\r\n      chart: 'c3-chart',\r\n      chartLine: 'c3-chart-line',\r\n      chartLines: 'c3-chart-lines',\r\n      chartBar: 'c3-chart-bar',\r\n      chartBars: 'c3-chart-bars',\r\n      chartText: 'c3-chart-text',\r\n      chartTexts: 'c3-chart-texts',\r\n      chartArc: 'c3-chart-arc',\r\n      chartArcs: 'c3-chart-arcs',\r\n      chartArcsTitle: 'c3-chart-arcs-title',\r\n      chartArcsBackground: 'c3-chart-arcs-background',\r\n      chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\r\n      chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\r\n      chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\r\n      selectedCircle: 'c3-selected-circle',\r\n      selectedCircles: 'c3-selected-circles',\r\n      eventRect: 'c3-event-rect',\r\n      eventRects: 'c3-event-rects',\r\n      eventRectsSingle: 'c3-event-rects-single',\r\n      eventRectsMultiple: 'c3-event-rects-multiple',\r\n      zoomRect: 'c3-zoom-rect',\r\n      brush: 'c3-brush',\r\n      dragZoom: 'c3-drag-zoom',\r\n      focused: 'c3-focused',\r\n      defocused: 'c3-defocused',\r\n      region: 'c3-region',\r\n      regions: 'c3-regions',\r\n      title: 'c3-title',\r\n      tooltipContainer: 'c3-tooltip-container',\r\n      tooltip: 'c3-tooltip',\r\n      tooltipName: 'c3-tooltip-name',\r\n      shape: 'c3-shape',\r\n      shapes: 'c3-shapes',\r\n      line: 'c3-line',\r\n      lines: 'c3-lines',\r\n      bar: 'c3-bar',\r\n      bars: 'c3-bars',\r\n      circle: 'c3-circle',\r\n      circles: 'c3-circles',\r\n      arc: 'c3-arc',\r\n      arcLabelLine: 'c3-arc-label-line',\r\n      arcs: 'c3-arcs',\r\n      area: 'c3-area',\r\n      areas: 'c3-areas',\r\n      empty: 'c3-empty',\r\n      text: 'c3-text',\r\n      texts: 'c3-texts',\r\n      gaugeValue: 'c3-gauge-value',\r\n      grid: 'c3-grid',\r\n      gridLines: 'c3-grid-lines',\r\n      xgrid: 'c3-xgrid',\r\n      xgrids: 'c3-xgrids',\r\n      xgridLine: 'c3-xgrid-line',\r\n      xgridLines: 'c3-xgrid-lines',\r\n      xgridFocus: 'c3-xgrid-focus',\r\n      ygrid: 'c3-ygrid',\r\n      ygrids: 'c3-ygrids',\r\n      ygridLine: 'c3-ygrid-line',\r\n      ygridLines: 'c3-ygrid-lines',\r\n      colorScale: 'c3-colorscale',\r\n      stanfordElements: 'c3-stanford-elements',\r\n      stanfordLine: 'c3-stanford-line',\r\n      stanfordLines: 'c3-stanford-lines',\r\n      stanfordRegion: 'c3-stanford-region',\r\n      stanfordRegions: 'c3-stanford-regions',\r\n      stanfordText: 'c3-stanford-text',\r\n      stanfordTexts: 'c3-stanford-texts',\r\n      axis: 'c3-axis',\r\n      axisX: 'c3-axis-x',\r\n      axisXLabel: 'c3-axis-x-label',\r\n      axisY: 'c3-axis-y',\r\n      axisYLabel: 'c3-axis-y-label',\r\n      axisY2: 'c3-axis-y2',\r\n      axisY2Label: 'c3-axis-y2-label',\r\n      legendBackground: 'c3-legend-background',\r\n      legendItem: 'c3-legend-item',\r\n      legendItemEvent: 'c3-legend-item-event',\r\n      legendItemTile: 'c3-legend-item-tile',\r\n      legendItemHidden: 'c3-legend-item-hidden',\r\n      legendItemFocused: 'c3-legend-item-focused',\r\n      dragarea: 'c3-dragarea',\r\n      EXPANDED: '_expanded_',\r\n      SELECTED: '_selected_',\r\n      INCLUDED: '_included_'\r\n  };\n\n  var AxisClass = /** @class */ (function () {\r\n      function AxisClass(owner) {\r\n          this.owner = owner;\r\n          this.d3 = owner.d3;\r\n          this.internal = AxisInternal;\r\n      }\r\n      return AxisClass;\r\n  }());\r\n  var Axis = AxisClass;\r\n  Axis.prototype.init = function init() {\r\n      var $$ = this.owner, config = $$.config, main = $$.main;\r\n      $$.axes.x = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisX)\r\n          .attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis)\r\n          .attr('transform', $$.getTranslate('x'))\r\n          .style('visibility', config.axis_x_show ? 'visible' : 'hidden');\r\n      $$.axes.x\r\n          .append('text')\r\n          .attr('class', CLASS.axisXLabel)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\r\n      $$.axes.y = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY)\r\n          .attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis)\r\n          .attr('transform', $$.getTranslate('y'))\r\n          .style('visibility', config.axis_y_show ? 'visible' : 'hidden');\r\n      $$.axes.y\r\n          .append('text')\r\n          .attr('class', CLASS.axisYLabel)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\r\n      $$.axes.y2 = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY2)\r\n          // clip-path?\r\n          .attr('transform', $$.getTranslate('y2'))\r\n          .style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\r\n      $$.axes.y2\r\n          .append('text')\r\n          .attr('class', CLASS.axisY2Label)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner, config = $$.config, axisParams = {\r\n          isCategory: $$.isCategorized(),\r\n          withOuterTick: withOuterTick,\r\n          tickMultiline: config.axis_x_tick_multiline,\r\n          tickMultilineMax: config.axis_x_tick_multiline\r\n              ? Number(config.axis_x_tick_multilineMax)\r\n              : 0,\r\n          tickWidth: config.axis_x_tick_width,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\r\n          withoutTransition: withoutTransition\r\n      }, axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\r\n      if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\r\n          tickValues = tickValues.map(function (v) {\r\n              return $$.parseDate(v);\r\n          });\r\n      }\r\n      // Set tick\r\n      axis.tickFormat(tickFormat).tickValues(tickValues);\r\n      if ($$.isCategorized()) {\r\n          axis.tickCentered(config.axis_x_tick_centered);\r\n          if (isEmpty(config.axis_x_tick_culling)) {\r\n              config.axis_x_tick_culling = false;\r\n          }\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\r\n      var $$ = this.owner, config = $$.config, tickValues;\r\n      if (config.axis_x_tick_fit || config.axis_x_tick_count) {\r\n          tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\r\n      }\r\n      if (axis) {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues(tickValues);\r\n          $$.subXAxis.tickValues(tickValues);\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner;\r\n      var config = $$.config;\r\n      var tickFormat = config[\"axis_\" + axisId + \"_tick_format\"];\r\n      if (!tickFormat && $$.isAxisNormalized(axisId)) {\r\n          tickFormat = function (x) { return x + \"%\"; };\r\n      }\r\n      var axis = new this.internal(this, {\r\n          withOuterTick: withOuterTick,\r\n          withoutTransition: withoutTransition,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\r\n      }).axis\r\n          .scale(scale)\r\n          .orient(orient);\r\n      if (tickFormat) {\r\n          axis.tickFormat(tickFormat);\r\n      }\r\n      if ($$.isTimeSeriesY()) {\r\n          axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\r\n      }\r\n      else {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.getId = function getId(id) {\r\n      var config = this.owner.config;\r\n      return id in config.data_axes ? config.data_axes[id] : 'y';\r\n  };\r\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\r\n      // #2251 previously set any negative values to a whole number,\r\n      // however both should be truncated according to the users format specification\r\n      var $$ = this.owner, config = $$.config;\r\n      var format = $$.isTimeSeries()\r\n          ? $$.defaultAxisTimeFormat\r\n          : $$.isCategorized()\r\n              ? $$.categoryName\r\n              : function (v) {\r\n                  return v;\r\n              };\r\n      if (config.axis_x_tick_format) {\r\n          if (isFunction(config.axis_x_tick_format)) {\r\n              format = config.axis_x_tick_format;\r\n          }\r\n          else if ($$.isTimeSeries()) {\r\n              format = function (date) {\r\n                  return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\r\n              };\r\n          }\r\n      }\r\n      return isFunction(format)\r\n          ? function (v) {\r\n              return format.call($$, v);\r\n          }\r\n          : format;\r\n  };\r\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\r\n      return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\r\n  };\r\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\r\n  };\r\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\r\n  };\r\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\r\n  };\r\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\r\n      var $$ = this.owner, config = $$.config, option;\r\n      if (axisId === 'y') {\r\n          option = config.axis_y_label;\r\n      }\r\n      else if (axisId === 'y2') {\r\n          option = config.axis_y2_label;\r\n      }\r\n      else if (axisId === 'x') {\r\n          option = config.axis_x_label;\r\n      }\r\n      return option;\r\n  };\r\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\r\n      var option = this.getLabelOptionByAxisId(axisId);\r\n      return isString(option) ? option : option ? option.text : null;\r\n  };\r\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\r\n      var $$ = this.owner, config = $$.config, option = this.getLabelOptionByAxisId(axisId);\r\n      if (isString(option)) {\r\n          if (axisId === 'y') {\r\n              config.axis_y_label = text;\r\n          }\r\n          else if (axisId === 'y2') {\r\n              config.axis_y2_label = text;\r\n          }\r\n          else if (axisId === 'x') {\r\n              config.axis_x_label = text;\r\n          }\r\n      }\r\n      else if (option) {\r\n          option.text = text;\r\n      }\r\n  };\r\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\r\n      var option = this.getLabelOptionByAxisId(axisId), position = option && typeof option === 'object' && option.position\r\n          ? option.position\r\n          : defaultPosition;\r\n      return {\r\n          isInner: position.indexOf('inner') >= 0,\r\n          isOuter: position.indexOf('outer') >= 0,\r\n          isLeft: position.indexOf('left') >= 0,\r\n          isCenter: position.indexOf('center') >= 0,\r\n          isRight: position.indexOf('right') >= 0,\r\n          isTop: position.indexOf('top') >= 0,\r\n          isMiddle: position.indexOf('middle') >= 0,\r\n          isBottom: position.indexOf('bottom') >= 0\r\n      };\r\n  };\r\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\r\n      return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\r\n  };\r\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\r\n      return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\r\n      return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\r\n      return id === 'y2'\r\n          ? this.getY2AxisLabelPosition()\r\n          : id === 'y'\r\n              ? this.getYAxisLabelPosition()\r\n              : this.getXAxisLabelPosition();\r\n  };\r\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\r\n      return this.getLabelText('x');\r\n  };\r\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\r\n      return this.getLabelText('y');\r\n  };\r\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\r\n      return this.getLabelText('y2');\r\n  };\r\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\r\n      var $$ = this.owner;\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\r\n      }\r\n      else {\r\n          return position.isBottom\r\n              ? -$$.height\r\n              : position.isMiddle\r\n                  ? -$$.height / 2\r\n                  : 0;\r\n      }\r\n  };\r\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\r\n      }\r\n      else {\r\n          return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\r\n      }\r\n      else {\r\n          return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\r\n      }\r\n  };\r\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\r\n      return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\r\n      return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\r\n      var $$ = this.owner, config = $$.config, position = this.getXAxisLabelPosition();\r\n      if (config.axis_rotated) {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\r\n      }\r\n      else {\r\n          return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\r\n      }\r\n  };\r\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\r\n      var $$ = this.owner, position = this.getYAxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '-0.5em' : '3em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\r\n      }\r\n  };\r\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\r\n      var $$ = this.owner, position = this.getY2AxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '1.2em' : '-2.2em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '-0.5em'\r\n              : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\r\n      var $$ = this.owner, maxWidth = 0, targetsToShow, scale, axis, dummy, svg;\r\n      if (withoutRecompute && $$.currentMaxTickWidths[id]) {\r\n          return $$.currentMaxTickWidths[id];\r\n      }\r\n      if ($$.svg) {\r\n          targetsToShow = $$.filterTargetsToShow($$.data.targets);\r\n          if (id === 'y') {\r\n              scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\r\n              axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\r\n          }\r\n          else if (id === 'y2') {\r\n              scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\r\n              axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\r\n          }\r\n          else {\r\n              scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\r\n              axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\r\n              this.updateXAxisTickValues(targetsToShow, axis);\r\n          }\r\n          dummy = $$.d3\r\n              .select('body')\r\n              .append('div')\r\n              .classed('c3', true);\r\n          (svg = dummy\r\n              .append('svg')\r\n              .style('visibility', 'hidden')\r\n              .style('position', 'fixed')\r\n              .style('top', 0)\r\n              .style('left', 0)),\r\n              svg\r\n                  .append('g')\r\n                  .call(axis)\r\n                  .each(function () {\r\n                  $$.d3\r\n                      .select(this)\r\n                      .selectAll('text')\r\n                      .each(function () {\r\n                      var box = getBBox(this);\r\n                      if (maxWidth < box.width) {\r\n                          maxWidth = box.width;\r\n                      }\r\n                  });\r\n                  dummy.remove();\r\n              });\r\n      }\r\n      $$.currentMaxTickWidths[id] =\r\n          maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\r\n      return $$.currentMaxTickWidths[id];\r\n  };\r\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\r\n      var $$ = this.owner;\r\n      var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel), axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel), axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\r\n      (withTransition ? axisXLabel.transition() : axisXLabel)\r\n          .attr('x', this.xForXAxisLabel.bind(this))\r\n          .attr('dx', this.dxForXAxisLabel.bind(this))\r\n          .attr('dy', this.dyForXAxisLabel.bind(this))\r\n          .text(this.textForXAxisLabel.bind(this));\r\n      (withTransition ? axisYLabel.transition() : axisYLabel)\r\n          .attr('x', this.xForYAxisLabel.bind(this))\r\n          .attr('dx', this.dxForYAxisLabel.bind(this))\r\n          .attr('dy', this.dyForYAxisLabel.bind(this))\r\n          .text(this.textForYAxisLabel.bind(this));\r\n      (withTransition ? axisY2Label.transition() : axisY2Label)\r\n          .attr('x', this.xForY2AxisLabel.bind(this))\r\n          .attr('dx', this.dxForY2AxisLabel.bind(this))\r\n          .attr('dy', this.dyForY2AxisLabel.bind(this))\r\n          .text(this.textForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\r\n      var p = typeof padding === 'number' ? padding : padding[key];\r\n      if (!isValue(p)) {\r\n          return defaultValue;\r\n      }\r\n      if (padding.unit === 'ratio') {\r\n          return padding[key] * domainLength;\r\n      }\r\n      // assume padding is pixels if unit is not specified\r\n      return this.convertPixelsToAxisPadding(p, domainLength);\r\n  };\r\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\r\n      var $$ = this.owner, length = $$.config.axis_rotated ? $$.width : $$.height;\r\n      return domainLength * (pixels / length);\r\n  };\r\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\r\n      var tickValues = values, targetCount, start, end, count, interval, i, tickValue;\r\n      if (tickCount) {\r\n          targetCount = isFunction(tickCount) ? tickCount() : tickCount;\r\n          // compute ticks according to tickCount\r\n          if (targetCount === 1) {\r\n              tickValues = [values[0]];\r\n          }\r\n          else if (targetCount === 2) {\r\n              tickValues = [values[0], values[values.length - 1]];\r\n          }\r\n          else if (targetCount > 2) {\r\n              count = targetCount - 2;\r\n              start = values[0];\r\n              end = values[values.length - 1];\r\n              interval = (end - start) / (count + 1);\r\n              // re-construct unique values\r\n              tickValues = [start];\r\n              for (i = 0; i < count; i++) {\r\n                  tickValue = +start + interval * (i + 1);\r\n                  tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\r\n              }\r\n              tickValues.push(end);\r\n          }\r\n      }\r\n      if (!forTimeSeries) {\r\n          tickValues = tickValues.sort(function (a, b) {\r\n              return a - b;\r\n          });\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\r\n      var $$ = this.owner, axes = $$.axes;\r\n      return {\r\n          axisX: duration ? axes.x.transition().duration(duration) : axes.x,\r\n          axisY: duration ? axes.y.transition().duration(duration) : axes.y,\r\n          axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\r\n          axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\r\n      };\r\n  };\r\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\r\n      var $$ = this.owner, transition = duration ? $$.d3.transition().duration(duration) : null;\r\n      $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\r\n      $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\r\n      $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\r\n      $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\r\n  };\n\n  var c3 = {\r\n      version: '0.7.20',\r\n      chart: {\r\n          fn: Chart.prototype,\r\n          internal: {\r\n              fn: ChartInternal.prototype,\r\n              axis: {\r\n                  fn: AxisClass.prototype,\r\n                  internal: {\r\n                      fn: AxisInternal.prototype\r\n                  }\r\n              }\r\n          }\r\n      },\r\n      generate: function (config) {\r\n          return new Chart(config);\r\n      }\r\n  };\r\n  ChartInternal.prototype.beforeInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.afterInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.init = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.initParams();\r\n      if (config.data_url) {\r\n          $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\r\n      }\r\n      else if (config.data_json) {\r\n          $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\r\n      }\r\n      else if (config.data_rows) {\r\n          $$.initWithData($$.convertRowsToData(config.data_rows));\r\n      }\r\n      else if (config.data_columns) {\r\n          $$.initWithData($$.convertColumnsToData(config.data_columns));\r\n      }\r\n      else {\r\n          throw Error('url or json or rows or columns is required.');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initParams = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\r\n      $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\r\n      $$.clipIdForXAxis = $$.clipId + '-xaxis';\r\n      $$.clipIdForYAxis = $$.clipId + '-yaxis';\r\n      $$.clipIdForGrid = $$.clipId + '-grid';\r\n      $$.clipIdForSubchart = $$.clipId + '-subchart';\r\n      $$.clipPath = $$.getClipPath($$.clipId);\r\n      $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\r\n      $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\r\n      $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\r\n      $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\r\n      $$.dragStart = null;\r\n      $$.dragging = false;\r\n      $$.flowing = false;\r\n      $$.cancelClick = false;\r\n      $$.mouseover = undefined;\r\n      $$.transiting = false;\r\n      $$.color = $$.generateColor();\r\n      $$.levelColor = $$.generateLevelColor();\r\n      $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\r\n      $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\r\n      $$.defaultAxisTimeFormat = function (date) {\r\n          if (date.getMilliseconds()) {\r\n              return d3.timeFormat('.%L')(date);\r\n          }\r\n          if (date.getSeconds()) {\r\n              return d3.timeFormat(':%S')(date);\r\n          }\r\n          if (date.getMinutes()) {\r\n              return d3.timeFormat('%I:%M')(date);\r\n          }\r\n          if (date.getHours()) {\r\n              return d3.timeFormat('%I %p')(date);\r\n          }\r\n          if (date.getDay() && date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getMonth()) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          return d3.timeFormat('%Y/%-m/%-d')(date);\r\n      };\r\n      $$.hiddenTargetIds = [];\r\n      $$.hiddenLegendIds = [];\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n      $$.xOrient = config.axis_rotated\r\n          ? config.axis_x_inner\r\n              ? 'right'\r\n              : 'left'\r\n          : config.axis_x_inner\r\n              ? 'top'\r\n              : 'bottom';\r\n      $$.yOrient = config.axis_rotated\r\n          ? config.axis_y_inner\r\n              ? 'top'\r\n              : 'bottom'\r\n          : config.axis_y_inner\r\n              ? 'right'\r\n              : 'left';\r\n      $$.y2Orient = config.axis_rotated\r\n          ? config.axis_y2_inner\r\n              ? 'bottom'\r\n              : 'top'\r\n          : config.axis_y2_inner\r\n              ? 'left'\r\n              : 'right';\r\n      $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\r\n      $$.isLegendRight = config.legend_position === 'right';\r\n      $$.isLegendInset = config.legend_position === 'inset';\r\n      $$.isLegendTop =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'top-right';\r\n      $$.isLegendLeft =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'bottom-left';\r\n      $$.legendStep = 0;\r\n      $$.legendItemWidth = 0;\r\n      $$.legendItemHeight = 0;\r\n      $$.currentMaxTickWidths = {\r\n          x: 0,\r\n          y: 0,\r\n          y2: 0\r\n      };\r\n      $$.rotated_padding_left = 30;\r\n      $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\r\n      $$.rotated_padding_top = 5;\r\n      $$.withoutFadeIn = {};\r\n      $$.intervalForObserveInserted = undefined;\r\n      $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\r\n  };\r\n  ChartInternal.prototype.initChartElements = function () {\r\n      if (this.initBar) {\r\n          this.initBar();\r\n      }\r\n      if (this.initLine) {\r\n          this.initLine();\r\n      }\r\n      if (this.initArc) {\r\n          this.initArc();\r\n      }\r\n      if (this.initGauge) {\r\n          this.initGauge();\r\n      }\r\n      if (this.initText) {\r\n          this.initText();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initWithData = function (data) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      var defs, main, binding = true;\r\n      $$.axis = new AxisClass($$);\r\n      if (!config.bindto) {\r\n          $$.selectChart = d3.selectAll([]);\r\n      }\r\n      else if (typeof config.bindto.node === 'function') {\r\n          $$.selectChart = config.bindto;\r\n      }\r\n      else {\r\n          $$.selectChart = d3.select(config.bindto);\r\n      }\r\n      if ($$.selectChart.empty()) {\r\n          $$.selectChart = d3\r\n              .select(document.createElement('div'))\r\n              .style('opacity', 0);\r\n          $$.observeInserted($$.selectChart);\r\n          binding = false;\r\n      }\r\n      $$.selectChart.html('').classed('c3', true);\r\n      // Init data as targets\r\n      $$.data.xs = {};\r\n      $$.data.targets = $$.convertDataToTargets(data);\r\n      if (config.data_filter) {\r\n          $$.data.targets = $$.data.targets.filter(config.data_filter);\r\n      }\r\n      // Set targets to hide if needed\r\n      if (config.data_hide) {\r\n          $$.addHiddenTargetIds(config.data_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.data_hide);\r\n      }\r\n      if (config.legend_hide) {\r\n          $$.addHiddenLegendIds(config.legend_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.legend_hide);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.initStanfordData();\r\n      }\r\n      // Init sizes and scales\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      // Set domains for each scale\r\n      $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\r\n      $$.y.domain($$.getYDomain($$.data.targets, 'y'));\r\n      $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\r\n      $$.subX.domain($$.x.domain());\r\n      $$.subY.domain($$.y.domain());\r\n      $$.subY2.domain($$.y2.domain());\r\n      // Save original x domain for zoom update\r\n      $$.orgXDomain = $$.x.domain();\r\n      /*-- Basic Elements --*/\r\n      // Define svgs\r\n      $$.svg = $$.selectChart\r\n          .append('svg')\r\n          .style('overflow', 'hidden')\r\n          .on('mouseenter', function () {\r\n          return config.onmouseover.call($$);\r\n      })\r\n          .on('mouseleave', function () {\r\n          return config.onmouseout.call($$);\r\n      });\r\n      if ($$.config.svg_classname) {\r\n          $$.svg.attr('class', $$.config.svg_classname);\r\n      }\r\n      // Define defs\r\n      defs = $$.svg.append('defs');\r\n      $$.clipChart = $$.appendClip(defs, $$.clipId);\r\n      $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\r\n      $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\r\n      $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\r\n      $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\r\n      $$.updateSvgSize();\r\n      // Define regions\r\n      main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\r\n      if ($$.initPie) {\r\n          $$.initPie();\r\n      }\r\n      if ($$.initDragZoom) {\r\n          $$.initDragZoom();\r\n      }\r\n      if (config.subchart_show && $$.initSubchart) {\r\n          $$.initSubchart();\r\n      }\r\n      if ($$.initTooltip) {\r\n          $$.initTooltip();\r\n      }\r\n      if ($$.initLegend) {\r\n          $$.initLegend();\r\n      }\r\n      if ($$.initTitle) {\r\n          $$.initTitle();\r\n      }\r\n      if ($$.initZoom) {\r\n          $$.initZoom();\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // Update selection based on size and scale\r\n      // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\r\n      if (config.subchart_show && $$.initSubchartBrush) {\r\n          $$.initSubchartBrush();\r\n      }\r\n      /*-- Main Region --*/\r\n      // text when empty\r\n      main\r\n          .append('text')\r\n          .attr('class', CLASS.text + ' ' + CLASS.empty)\r\n          .attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\r\n          .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\r\n      // Regions\r\n      $$.initRegion();\r\n      // Grids\r\n      $$.initGrid();\r\n      // Define g for chart area\r\n      main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.chart);\r\n      // Grid lines\r\n      if (config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n      $$.initStanfordElements();\r\n      // Cover whole with rects for events\r\n      $$.initEventRect();\r\n      // Define g for chart\r\n      $$.initChartElements();\r\n      // Add Axis\r\n      $$.axis.init();\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Set default extent if defined\r\n      if (config.axis_x_selection) {\r\n          $$.brush.selectionAsValue($$.getDefaultSelection());\r\n      }\r\n      // Draw with targets\r\n      if (binding) {\r\n          $$.updateDimension();\r\n          $$.config.oninit.call($$);\r\n          $$.redraw({\r\n              withTransition: false,\r\n              withTransform: true,\r\n              withUpdateXDomain: true,\r\n              withUpdateOrgXDomain: true,\r\n              withTransitionForAxis: false\r\n          });\r\n      }\r\n      // Bind to resize event\r\n      $$.bindResize();\r\n      // Bind to window focus event\r\n      $$.bindWindowFocus();\r\n      // export element of the chart\r\n      $$.api.element = $$.selectChart.node();\r\n  };\r\n  ChartInternal.prototype.smoothLines = function (el, type) {\r\n      var $$ = this;\r\n      if (type === 'grid') {\r\n          el.each(function () {\r\n              var g = $$.d3.select(this), x1 = g.attr('x1'), x2 = g.attr('x2'), y1 = g.attr('y1'), y2 = g.attr('y2');\r\n              g.attr({\r\n                  x1: Math.ceil(x1),\r\n                  x2: Math.ceil(x2),\r\n                  y1: Math.ceil(y1),\r\n                  y2: Math.ceil(y2)\r\n              });\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSizes = function () {\r\n      var $$ = this, config = $$.config;\r\n      var legendHeight = $$.legend ? $$.getLegendHeight() : 0, legendWidth = $$.legend ? $$.getLegendWidth() : 0, legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight, hasArc = $$.hasArcType(), xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'), subchartXAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x', true), subchartHeight = config.subchart_show && !hasArc\r\n          ? config.subchart_size_height + subchartXAxisHeight\r\n          : 0;\r\n      $$.currentWidth = $$.getCurrentWidth();\r\n      $$.currentHeight = $$.getCurrentHeight();\r\n      // for main\r\n      $$.margin = config.axis_rotated\r\n          ? {\r\n              top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: $$.getHorizontalAxisHeight('y') +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\r\n          }\r\n          : {\r\n              top: 4 + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: xAxisHeight +\r\n                  subchartHeight +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: hasArc ? 0 : $$.getCurrentPaddingLeft()\r\n          };\r\n      // for subchart\r\n      $$.margin2 = config.axis_rotated\r\n          ? {\r\n              top: $$.margin.top,\r\n              right: NaN,\r\n              bottom: 20 + legendHeightForBottom,\r\n              left: $$.rotated_padding_left\r\n          }\r\n          : {\r\n              top: $$.currentHeight - subchartHeight - legendHeightForBottom,\r\n              right: NaN,\r\n              bottom: subchartXAxisHeight + legendHeightForBottom,\r\n              left: $$.margin.left\r\n          };\r\n      // for legend\r\n      $$.margin3 = {\r\n          top: 0,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: 0\r\n      };\r\n      if ($$.updateSizeForLegend) {\r\n          $$.updateSizeForLegend(legendHeight, legendWidth);\r\n      }\r\n      $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\r\n      $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\r\n      if ($$.width < 0) {\r\n          $$.width = 0;\r\n      }\r\n      if ($$.height < 0) {\r\n          $$.height = 0;\r\n      }\r\n      $$.width2 = config.axis_rotated\r\n          ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right\r\n          : $$.width;\r\n      $$.height2 = config.axis_rotated\r\n          ? $$.height\r\n          : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\r\n      if ($$.width2 < 0) {\r\n          $$.width2 = 0;\r\n      }\r\n      if ($$.height2 < 0) {\r\n          $$.height2 = 0;\r\n      }\r\n      // for arc\r\n      $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\r\n      $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\r\n      if ($$.hasType('gauge') && !config.gauge_fullCircle) {\r\n          $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\r\n      }\r\n      if ($$.updateRadius) {\r\n          $$.updateRadius();\r\n      }\r\n      if ($$.isLegendRight && hasArc) {\r\n          $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateTargets = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      /*-- Main --*/\r\n      //-- Text --//\r\n      $$.updateTargetsForText(targets);\r\n      //-- Bar --//\r\n      $$.updateTargetsForBar(targets);\r\n      //-- Line --//\r\n      $$.updateTargetsForLine(targets);\r\n      //-- Arc --//\r\n      if ($$.hasArcType() && $$.updateTargetsForArc) {\r\n          $$.updateTargetsForArc(targets);\r\n      }\r\n      /*-- Sub --*/\r\n      if (config.subchart_show && $$.updateTargetsForSubchart) {\r\n          $$.updateTargetsForSubchart(targets);\r\n      }\r\n      // Fade-in each chart\r\n      $$.showTargets();\r\n  };\r\n  ChartInternal.prototype.showTargets = function () {\r\n      var $$ = this;\r\n      $$.svg\r\n          .selectAll('.' + CLASS.target)\r\n          .filter(function (d) {\r\n          return $$.isTargetToShow(d.id);\r\n      })\r\n          .transition()\r\n          .duration($$.config.transition_duration)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.redraw = function (options, transitions) {\r\n      var $$ = this, main = $$.main, d3 = $$.d3, config = $$.config;\r\n      var areaIndices = $$.getShapeIndices($$.isAreaType), barIndices = $$.getShapeIndices($$.isBarType), lineIndices = $$.getShapeIndices($$.isLineType);\r\n      var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\r\n      var hideAxis = $$.hasArcType();\r\n      var drawArea, drawBar, drawLine, xForText, yForText;\r\n      var duration, durationForExit, durationForAxis;\r\n      var transitionsToWait, waitForDraw, flow, transition;\r\n      var targetsToShow = $$.filterTargetsToShow($$.data.targets), tickValues, i, intervalForCulling, xDomainForZoom;\r\n      var xv = $$.xv.bind($$), cx, cy;\r\n      options = options || {};\r\n      withY = getOption(options, 'withY', true);\r\n      withSubchart = getOption(options, 'withSubchart', true);\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransform = getOption(options, 'withTransform', false);\r\n      withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\r\n      withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\r\n      withTrimXDomain = getOption(options, 'withTrimXDomain', true);\r\n      withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\r\n      withLegend = getOption(options, 'withLegend', false);\r\n      withEventRect = getOption(options, 'withEventRect', true);\r\n      withDimension = getOption(options, 'withDimension', true);\r\n      withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\r\n      withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\r\n      duration = withTransition ? config.transition_duration : 0;\r\n      durationForExit = withTransitionForExit ? duration : 0;\r\n      durationForAxis = withTransitionForAxis ? duration : 0;\r\n      transitions = transitions || $$.axis.generateTransitions(durationForAxis);\r\n      // update legend and transform each g\r\n      if (withLegend && config.legend_show) {\r\n          $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\r\n      }\r\n      else if (withDimension) {\r\n          // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\r\n          // no need to update axis in it because they will be updated in redraw()\r\n          $$.updateDimension(true);\r\n      }\r\n      // MEMO: needed for grids calculation\r\n      if ($$.isCategorized() && targetsToShow.length === 0) {\r\n          $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\r\n      }\r\n      if (targetsToShow.length) {\r\n          $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\r\n          if (!config.axis_x_tick_values) {\r\n              tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\r\n          }\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues([]);\r\n          $$.subXAxis.tickValues([]);\r\n      }\r\n      if (config.zoom_rescale && !options.flow) {\r\n          xDomainForZoom = $$.x.orgDomain();\r\n      }\r\n      $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\r\n      $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\r\n      if (!config.axis_y_tick_values && config.axis_y_tick_count) {\r\n          $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\r\n      }\r\n      if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\r\n          $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\r\n      }\r\n      // axes\r\n      $$.axis.redraw(durationForAxis, hideAxis);\r\n      // Update axis label\r\n      $$.axis.updateLabels(withTransition);\r\n      // show/hide if manual culling needed\r\n      if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\r\n          if (config.axis_x_tick_culling && tickValues) {\r\n              for (i = 1; i < tickValues.length; i++) {\r\n                  if (tickValues.length / i < config.axis_x_tick_culling_max) {\r\n                      intervalForCulling = i;\r\n                      break;\r\n                  }\r\n              }\r\n              $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\r\n                  var index = tickValues.indexOf(e);\r\n                  if (index >= 0) {\r\n                      d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\r\n                  }\r\n              });\r\n          }\r\n          else {\r\n              $$.svg\r\n                  .selectAll('.' + CLASS.axisX + ' .tick text')\r\n                  .style('display', 'block');\r\n          }\r\n      }\r\n      // setup drawer - MEMO: these must be called after axis updated\r\n      drawArea = $$.generateDrawArea\r\n          ? $$.generateDrawArea(areaIndices, false)\r\n          : undefined;\r\n      drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\r\n      drawLine = $$.generateDrawLine\r\n          ? $$.generateDrawLine(lineIndices, false)\r\n          : undefined;\r\n      xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\r\n      yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false);\r\n      // update circleY based on updated parameters\r\n      $$.updateCircleY();\r\n      // generate circle x/y functions depending on updated params\r\n      cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\r\n      cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\r\n      // Update sub domain\r\n      if (withY) {\r\n          $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\r\n          $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\r\n      }\r\n      // xgrid focus\r\n      $$.updateXgridFocus();\r\n      // Data empty label positioning and text.\r\n      main\r\n          .select('text.' + CLASS.text + '.' + CLASS.empty)\r\n          .attr('x', $$.width / 2)\r\n          .attr('y', $$.height / 2)\r\n          .text(config.data_empty_label_text)\r\n          .transition()\r\n          .style('opacity', targetsToShow.length ? 0 : 1);\r\n      // event rect\r\n      if (withEventRect) {\r\n          $$.redrawEventRect();\r\n      }\r\n      // grid\r\n      $$.updateGrid(duration);\r\n      $$.updateStanfordElements(duration);\r\n      // rect for regions\r\n      $$.updateRegion(duration);\r\n      // bars\r\n      $$.updateBar(durationForExit);\r\n      // lines, areas and circles\r\n      $$.updateLine(durationForExit);\r\n      $$.updateArea(durationForExit);\r\n      $$.updateCircle(cx, cy);\r\n      // text\r\n      if ($$.hasDataLabel()) {\r\n          $$.updateText(xForText, yForText, durationForExit);\r\n      }\r\n      // title\r\n      if ($$.redrawTitle) {\r\n          $$.redrawTitle();\r\n      }\r\n      // arc\r\n      if ($$.redrawArc) {\r\n          $$.redrawArc(duration, durationForExit, withTransform);\r\n      }\r\n      // subchart\r\n      if (config.subchart_show && $$.redrawSubchart) {\r\n          $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // circles for select\r\n      main\r\n          .selectAll('.' + CLASS.selectedCircles)\r\n          .filter($$.isBarType.bind($$))\r\n          .selectAll('circle')\r\n          .remove();\r\n      if (options.flow) {\r\n          flow = $$.generateFlow({\r\n              targets: targetsToShow,\r\n              flow: options.flow,\r\n              duration: options.flow.duration,\r\n              drawBar: drawBar,\r\n              drawLine: drawLine,\r\n              drawArea: drawArea,\r\n              cx: cx,\r\n              cy: cy,\r\n              xv: xv,\r\n              xForText: xForText,\r\n              yForText: yForText\r\n          });\r\n      }\r\n      if (duration && $$.isTabVisible()) {\r\n          // Only use transition if tab visible. See #938.\r\n          // transition should be derived from one transition\r\n          transition = d3.transition().duration(duration);\r\n          transitionsToWait = [];\r\n          [\r\n              $$.redrawBar(drawBar, true, transition),\r\n              $$.redrawLine(drawLine, true, transition),\r\n              $$.redrawArea(drawArea, true, transition),\r\n              $$.redrawCircle(cx, cy, true, transition),\r\n              $$.redrawText(xForText, yForText, options.flow, true, transition),\r\n              $$.redrawRegion(true, transition),\r\n              $$.redrawGrid(true, transition)\r\n          ].forEach(function (transitions) {\r\n              transitions.forEach(function (transition) {\r\n                  transitionsToWait.push(transition);\r\n              });\r\n          });\r\n          // Wait for end of transitions to call flow and onrendered callback\r\n          waitForDraw = $$.generateWait();\r\n          transitionsToWait.forEach(function (t) {\r\n              waitForDraw.add(t);\r\n          });\r\n          waitForDraw(function () {\r\n              if (flow) {\r\n                  flow();\r\n              }\r\n              if (config.onrendered) {\r\n                  config.onrendered.call($$);\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          $$.redrawBar(drawBar);\r\n          $$.redrawLine(drawLine);\r\n          $$.redrawArea(drawArea);\r\n          $$.redrawCircle(cx, cy);\r\n          $$.redrawText(xForText, yForText, options.flow);\r\n          $$.redrawRegion();\r\n          $$.redrawGrid();\r\n          if (flow) {\r\n              flow();\r\n          }\r\n          if (config.onrendered) {\r\n              config.onrendered.call($$);\r\n          }\r\n      }\r\n      // update fadein condition\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = true;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateAndRedraw = function (options) {\r\n      var $$ = this, config = $$.config, transitions;\r\n      options = options || {};\r\n      // same with redraw\r\n      options.withTransition = getOption(options, 'withTransition', true);\r\n      options.withTransform = getOption(options, 'withTransform', false);\r\n      options.withLegend = getOption(options, 'withLegend', false);\r\n      // NOT same with redraw\r\n      options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\r\n      options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\r\n      options.withTransitionForExit = false;\r\n      options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition);\r\n      // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\r\n      $$.updateSizes();\r\n      // MEMO: called in updateLegend in redraw if withLegend\r\n      if (!(options.withLegend && config.legend_show)) {\r\n          transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0);\r\n          // Update scales\r\n          $$.updateScales();\r\n          $$.updateSvgSize();\r\n          // Update g positions\r\n          $$.transformAll(options.withTransitionForTransform, transitions);\r\n      }\r\n      // Draw with new sizes & scales\r\n      $$.redraw(options, transitions);\r\n  };\r\n  ChartInternal.prototype.redrawWithoutRescale = function () {\r\n      this.redraw({\r\n          withY: false,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withTransitionForAxis: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.isTimeSeries = function () {\r\n      return this.config.axis_x_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.isCategorized = function () {\r\n      return this.config.axis_x_type.indexOf('categor') >= 0;\r\n  };\r\n  ChartInternal.prototype.isCustomX = function () {\r\n      var $$ = this, config = $$.config;\r\n      return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\r\n  };\r\n  ChartInternal.prototype.isTimeSeriesY = function () {\r\n      return this.config.axis_y_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.getTranslate = function (target) {\r\n      var $$ = this, config = $$.config, x, y;\r\n      if (target === 'main') {\r\n          x = asHalfPixel($$.margin.left);\r\n          y = asHalfPixel($$.margin.top);\r\n      }\r\n      else if (target === 'context') {\r\n          x = asHalfPixel($$.margin2.left);\r\n          y = asHalfPixel($$.margin2.top);\r\n      }\r\n      else if (target === 'legend') {\r\n          x = $$.margin3.left;\r\n          y = $$.margin3.top;\r\n      }\r\n      else if (target === 'x') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height;\r\n      }\r\n      else if (target === 'y') {\r\n          x = 0;\r\n          y = config.axis_rotated ? $$.height : 0;\r\n      }\r\n      else if (target === 'y2') {\r\n          x = config.axis_rotated ? 0 : $$.width;\r\n          y = config.axis_rotated ? 1 : 0;\r\n      }\r\n      else if (target === 'subx') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height2;\r\n      }\r\n      else if (target === 'arc') {\r\n          x = $$.arcWidth / 2;\r\n          y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\r\n      }\r\n      return 'translate(' + x + ',' + y + ')';\r\n  };\r\n  ChartInternal.prototype.initialOpacity = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id]\r\n          ? this.opacityForCircle(d)\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForCircle = function (d) {\r\n      var isPointShouldBeShown = isFunction(this.config.point_show)\r\n          ? this.config.point_show(d)\r\n          : this.config.point_show;\r\n      var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\r\n      return isValue(d.value) ? (this.isScatterType(d) ? 0.5 : opacity) : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForText = function () {\r\n      return this.hasDataLabel() ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.xx = function (d) {\r\n      return d ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\r\n      var $$ = this, value = xyValue ? d[xyValue] : d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y, value = xyValue ? d[xyValue] : d.value;\r\n      return Math.ceil(yScale(value));\r\n  };\r\n  ChartInternal.prototype.xv = function (d) {\r\n      var $$ = this, value = d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yv = function (d) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\r\n      return Math.ceil(yScale(d.value));\r\n  };\r\n  ChartInternal.prototype.subxx = function (d) {\r\n      return d ? this.subX(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\r\n      var $$ = this, xAxis, yAxis, y2Axis;\r\n      if (transitions && transitions.axisX) {\r\n          xAxis = transitions.axisX;\r\n      }\r\n      else {\r\n          xAxis = $$.main.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              xAxis = xAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY) {\r\n          yAxis = transitions.axisY;\r\n      }\r\n      else {\r\n          yAxis = $$.main.select('.' + CLASS.axisY);\r\n          if (withTransition) {\r\n              yAxis = yAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY2) {\r\n          y2Axis = transitions.axisY2;\r\n      }\r\n      else {\r\n          y2Axis = $$.main.select('.' + CLASS.axisY2);\r\n          if (withTransition) {\r\n              y2Axis = y2Axis.transition();\r\n          }\r\n      }\r\n      (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\r\n      xAxis.attr('transform', $$.getTranslate('x'));\r\n      yAxis.attr('transform', $$.getTranslate('y'));\r\n      y2Axis.attr('transform', $$.getTranslate('y2'));\r\n      $$.main\r\n          .select('.' + CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n  };\r\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\r\n      var $$ = this;\r\n      $$.transformMain(withTransition, transitions);\r\n      if ($$.config.subchart_show) {\r\n          $$.transformContext(withTransition, transitions);\r\n      }\r\n      if ($$.legend) {\r\n          $$.transformLegend(withTransition);\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSvgSize = function () {\r\n      var $$ = this, brush = $$.svg.select(\".\" + CLASS.brush + \" .overlay\");\r\n      $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\r\n      $$.svg\r\n          .selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid])\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height);\r\n      $$.svg\r\n          .select('#' + $$.clipIdForXAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getXAxisClipX.bind($$))\r\n          .attr('y', $$.getXAxisClipY.bind($$))\r\n          .attr('width', $$.getXAxisClipWidth.bind($$))\r\n          .attr('height', $$.getXAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForYAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getYAxisClipX.bind($$))\r\n          .attr('y', $$.getYAxisClipY.bind($$))\r\n          .attr('width', $$.getYAxisClipWidth.bind($$))\r\n          .attr('height', $$.getYAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForSubchart)\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', (brush.size() && brush.attr('height')) || 0);\r\n      // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\r\n      $$.selectChart.style('max-height', $$.currentHeight + 'px');\r\n  };\r\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\r\n      var $$ = this;\r\n      if (!withoutAxis) {\r\n          if ($$.config.axis_rotated) {\r\n              $$.axes.x.call($$.xAxis);\r\n              $$.axes.subx.call($$.subXAxis);\r\n          }\r\n          else {\r\n              $$.axes.y.call($$.yAxis);\r\n              $$.axes.y2.call($$.y2Axis);\r\n          }\r\n      }\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      $$.transformAll(false);\r\n  };\r\n  ChartInternal.prototype.observeInserted = function (selection) {\r\n      var $$ = this, observer;\r\n      if (typeof MutationObserver === 'undefined') {\r\n          window.console.error('MutationObserver not defined.');\r\n          return;\r\n      }\r\n      observer = new MutationObserver(function (mutations) {\r\n          mutations.forEach(function (mutation) {\r\n              if (mutation.type === 'childList' && mutation.previousSibling) {\r\n                  observer.disconnect();\r\n                  // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\r\n                  $$.intervalForObserveInserted = window.setInterval(function () {\r\n                      // parentNode will NOT be null when completed\r\n                      if (selection.node().parentNode) {\r\n                          window.clearInterval($$.intervalForObserveInserted);\r\n                          $$.updateDimension();\r\n                          if ($$.brush) {\r\n                              $$.brush.update();\r\n                          }\r\n                          $$.config.oninit.call($$);\r\n                          $$.redraw({\r\n                              withTransform: true,\r\n                              withUpdateXDomain: true,\r\n                              withUpdateOrgXDomain: true,\r\n                              withTransition: false,\r\n                              withTransitionForTransform: false,\r\n                              withLegend: true\r\n                          });\r\n                          selection.transition().style('opacity', 1);\r\n                      }\r\n                  }, 10);\r\n              }\r\n          });\r\n      });\r\n      observer.observe(selection.node(), {\r\n          attributes: true,\r\n          childList: true,\r\n          characterData: true\r\n      });\r\n  };\r\n  /**\r\n   * Binds handlers to the window resize event.\r\n   */\r\n  ChartInternal.prototype.bindResize = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.resizeFunction = $$.generateResize(); // need to call .remove\r\n      $$.resizeFunction.add(function () {\r\n          config.onresize.call($$);\r\n      });\r\n      if (config.resize_auto) {\r\n          $$.resizeFunction.add(function () {\r\n              if ($$.resizeTimeout !== undefined) {\r\n                  window.clearTimeout($$.resizeTimeout);\r\n              }\r\n              $$.resizeTimeout = window.setTimeout(function () {\r\n                  delete $$.resizeTimeout;\r\n                  $$.updateAndRedraw({\r\n                      withUpdateXDomain: false,\r\n                      withUpdateOrgXDomain: false,\r\n                      withTransition: false,\r\n                      withTransitionForTransform: false,\r\n                      withLegend: true\r\n                  });\r\n                  if ($$.brush) {\r\n                      $$.brush.update();\r\n                  }\r\n              }, 100);\r\n          });\r\n      }\r\n      $$.resizeFunction.add(function () {\r\n          config.onresized.call($$);\r\n      });\r\n      $$.resizeIfElementDisplayed = function () {\r\n          // if element not displayed skip it\r\n          if ($$.api == null || !$$.api.element.offsetParent) {\r\n              return;\r\n          }\r\n          $$.resizeFunction();\r\n      };\r\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\r\n  };\r\n  /**\r\n   * Binds handlers to the window focus event.\r\n   */\r\n  ChartInternal.prototype.bindWindowFocus = function () {\r\n      var _this = this;\r\n      if (this.windowFocusHandler) {\r\n          // The handler is already set\r\n          return;\r\n      }\r\n      this.windowFocusHandler = function () {\r\n          _this.redraw();\r\n      };\r\n      window.addEventListener('focus', this.windowFocusHandler);\r\n  };\r\n  /**\r\n   * Unbinds from the window focus event.\r\n   */\r\n  ChartInternal.prototype.unbindWindowFocus = function () {\r\n      window.removeEventListener('focus', this.windowFocusHandler);\r\n      delete this.windowFocusHandler;\r\n  };\r\n  ChartInternal.prototype.generateResize = function () {\r\n      var resizeFunctions = [];\r\n      function callResizeFunctions() {\r\n          resizeFunctions.forEach(function (f) {\r\n              f();\r\n          });\r\n      }\r\n      callResizeFunctions.add = function (f) {\r\n          resizeFunctions.push(f);\r\n      };\r\n      callResizeFunctions.remove = function (f) {\r\n          for (var i = 0; i < resizeFunctions.length; i++) {\r\n              if (resizeFunctions[i] === f) {\r\n                  resizeFunctions.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n      };\r\n      return callResizeFunctions;\r\n  };\r\n  ChartInternal.prototype.endall = function (transition, callback) {\r\n      var n = 0;\r\n      transition\r\n          .each(function () {\r\n          ++n;\r\n      })\r\n          .on('end', function () {\r\n          if (!--n) {\r\n              callback.apply(this, arguments);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateWait = function () {\r\n      var $$ = this;\r\n      var transitionsToWait = [], f = function (callback) {\r\n          var timer = setInterval(function () {\r\n              if (!$$.isTabVisible()) {\r\n                  return;\r\n              }\r\n              var done = 0;\r\n              transitionsToWait.forEach(function (t) {\r\n                  if (t.empty()) {\r\n                      done += 1;\r\n                      return;\r\n                  }\r\n                  try {\r\n                      t.transition();\r\n                  }\r\n                  catch (e) {\r\n                      done += 1;\r\n                  }\r\n              });\r\n              if (done === transitionsToWait.length) {\r\n                  clearInterval(timer);\r\n                  if (callback) {\r\n                      callback();\r\n                  }\r\n              }\r\n          }, 50);\r\n      };\r\n      f.add = function (transition) {\r\n          transitionsToWait.push(transition);\r\n      };\r\n      return f;\r\n  };\r\n  ChartInternal.prototype.parseDate = function (date) {\r\n      var $$ = this, parsedDate;\r\n      if (date instanceof Date) {\r\n          parsedDate = date;\r\n      }\r\n      else if (typeof date === 'string') {\r\n          parsedDate = $$.dataTimeParse(date);\r\n      }\r\n      else if (typeof date === 'object') {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      else if (typeof date === 'number' && !isNaN(date)) {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      if (!parsedDate || isNaN(+parsedDate)) {\r\n          window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\r\n      }\r\n      return parsedDate;\r\n  };\r\n  ChartInternal.prototype.isTabVisible = function () {\r\n      return !document.hidden;\r\n  };\r\n  ChartInternal.prototype.getPathBox = getPathBox;\r\n  ChartInternal.prototype.CLASS = CLASS;\n\n  /* jshint ignore:start */\r\n  (function () {\r\n      if (!('SVGPathSeg' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\r\n          window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\r\n              this.pathSegType = type;\r\n              this.pathSegTypeAsLetter = typeAsLetter;\r\n              this._owningPathSegList = owningPathSegList;\r\n          };\r\n          window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\r\n          window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\r\n          window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\r\n          window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\r\n          window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\r\n          window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\r\n          window.SVGPathSeg.PATHSEG_ARC_REL = 11;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;\r\n          // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\r\n          window.SVGPathSeg.prototype._segmentChanged = function () {\r\n              if (this._owningPathSegList)\r\n                  this._owningPathSegList.segmentChanged(this);\r\n          };\r\n          window.SVGPathSegClosePath = function (owningPathSegList) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\r\n          };\r\n          window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegClosePath.prototype.toString = function () {\r\n              return '[object SVGPathSegClosePath]';\r\n          };\r\n          window.SVGPathSegClosePath.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter;\r\n          };\r\n          window.SVGPathSegClosePath.prototype.clone = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoAbs]';\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoRel]';\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoAbs]';\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoRel]';\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegArcAbs]';\r\n          };\r\n          window.SVGPathSegArcAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcRel.prototype.toString = function () {\r\n              return '[object SVGPathSegArcRel]';\r\n          };\r\n          window.SVGPathSegArcRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcRel.prototype.clone = function () {\r\n              return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalRel]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalRel]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add createSVGPathSeg* functions to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\r\n          window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\r\n              return new window.SVGPathSegMovetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\r\n              return new window.SVGPathSegMovetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\r\n              return new window.SVGPathSegLinetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\r\n              return new window.SVGPathSegLinetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\r\n          };\r\n          if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\r\n              // Add getPathSegAtLength to SVGPathElement.\r\n              // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\r\n              // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\r\n              window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\r\n                  if (distance === undefined || !isFinite(distance))\r\n                      throw 'Invalid arguments.';\r\n                  var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n                  measurementElement.setAttribute('d', this.getAttribute('d'));\r\n                  var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;\r\n                  // If the path is empty, return 0.\r\n                  if (lastPathSegment <= 0)\r\n                      return 0;\r\n                  do {\r\n                      measurementElement.pathSegList.removeItem(lastPathSegment);\r\n                      if (distance > measurementElement.getTotalLength())\r\n                          break;\r\n                      lastPathSegment--;\r\n                  } while (lastPathSegment > 0);\r\n                  return lastPathSegment;\r\n              };\r\n          }\r\n      }\r\n      if (!('SVGPathSegList' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\r\n          window.SVGPathSegList = function (pathElement) {\r\n              this._pathElement = pathElement;\r\n              this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n              // Use a MutationObserver to catch changes to the path's \"d\" attribute.\r\n              this._mutationObserverConfig = {\r\n                  attributes: true,\r\n                  attributeFilter: ['d']\r\n              };\r\n              this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\r\n          Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\r\n              get: function () {\r\n                  this._checkPathSynchronizedToList();\r\n                  return this._list.length;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add the pathSegList accessors to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\r\n              get: function () {\r\n                  if (!this._pathSegList)\r\n                      this._pathSegList = new window.SVGPathSegList(this);\r\n                  return this._pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Process any pending mutations to the path element and update the list as needed.\r\n          // This should be the first call of all public functions and is needed because\r\n          // MutationObservers are not synchronous so we can have pending asynchronous mutations.\r\n          window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\r\n              this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\r\n          };\r\n          window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\r\n              if (!this._pathElement)\r\n                  return;\r\n              var hasPathMutations = false;\r\n              mutationRecords.forEach(function (record) {\r\n                  if (record.attributeName == 'd')\r\n                      hasPathMutations = true;\r\n              });\r\n              if (hasPathMutations)\r\n                  this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n          };\r\n          // Serialize the list and update the path's 'd' attribute.\r\n          window.SVGPathSegList.prototype._writeListToPath = function () {\r\n              this._pathElementMutationObserver.disconnect();\r\n              this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          // When a path segment changes the list needs to be synchronized back to the path element.\r\n          window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.clear = function () {\r\n              this._checkPathSynchronizedToList();\r\n              this._list.forEach(function (pathSeg) {\r\n                  pathSeg._owningPathSegList = null;\r\n              });\r\n              this._list = [];\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.initialize = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              this._list = [newItem];\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype._checkValidIndex = function (index) {\r\n              if (isNaN(index) || index < 0 || index >= this.numberOfItems)\r\n                  throw 'INDEX_SIZE_ERR';\r\n          };\r\n          window.SVGPathSegList.prototype.getItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              return this._list[index];\r\n          };\r\n          window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\r\n              if (index > this.numberOfItems)\r\n                  index = this.numberOfItems;\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.splice(index, 0, newItem);\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._checkValidIndex(index);\r\n              this._list[index] = newItem;\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.removeItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              var item = this._list[index];\r\n              this._list.splice(index, 1);\r\n              this._writeListToPath();\r\n              return item;\r\n          };\r\n          window.SVGPathSegList.prototype.appendItem = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.push(newItem);\r\n              newItem._owningPathSegList = this;\r\n              // TODO: Optimize this to just append to the existing attribute.\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\r\n              var string = '';\r\n              var first = true;\r\n              pathSegArray.forEach(function (pathSeg) {\r\n                  if (first) {\r\n                      first = false;\r\n                      string += pathSeg._asPathString();\r\n                  }\r\n                  else {\r\n                      string += ' ' + pathSeg._asPathString();\r\n                  }\r\n              });\r\n              return string;\r\n          };\r\n          // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\r\n          window.SVGPathSegList.prototype._parsePath = function (string) {\r\n              if (!string || string.length == 0)\r\n                  return [];\r\n              var owningPathSegList = this;\r\n              var Builder = function () {\r\n                  this.pathSegList = [];\r\n              };\r\n              Builder.prototype.appendSegment = function (pathSeg) {\r\n                  this.pathSegList.push(pathSeg);\r\n              };\r\n              var Source = function (string) {\r\n                  this._string = string;\r\n                  this._currentIndex = 0;\r\n                  this._endIndex = this._string.length;\r\n                  this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  this._skipOptionalSpaces();\r\n              };\r\n              Source.prototype._isCurrentSpace = function () {\r\n                  var character = this._string[this._currentIndex];\r\n                  return (character <= ' ' &&\r\n                      (character == ' ' ||\r\n                          character == '\\n' ||\r\n                          character == '\\t' ||\r\n                          character == '\\r' ||\r\n                          character == '\\f'));\r\n              };\r\n              Source.prototype._skipOptionalSpaces = function () {\r\n                  while (this._currentIndex < this._endIndex && this._isCurrentSpace())\r\n                      this._currentIndex++;\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype._skipOptionalSpacesOrDelimiter = function () {\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      !this._isCurrentSpace() &&\r\n                      this._string.charAt(this._currentIndex) != ',')\r\n                      return false;\r\n                  if (this._skipOptionalSpaces()) {\r\n                      if (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) == ',') {\r\n                          this._currentIndex++;\r\n                          this._skipOptionalSpaces();\r\n                      }\r\n                  }\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.hasMoreData = function () {\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.peekSegmentType = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  return this._pathSegTypeFromChar(lookahead);\r\n              };\r\n              Source.prototype._pathSegTypeFromChar = function (lookahead) {\r\n                  switch (lookahead) {\r\n                      case 'Z':\r\n                      case 'z':\r\n                          return window.SVGPathSeg.PATHSEG_CLOSEPATH;\r\n                      case 'M':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\r\n                      case 'm':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_REL;\r\n                      case 'L':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      case 'l':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      case 'C':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\r\n                      case 'c':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\r\n                      case 'Q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\r\n                      case 'q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\r\n                      case 'A':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_ABS;\r\n                      case 'a':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_REL;\r\n                      case 'H':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\r\n                      case 'h':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\r\n                      case 'V':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\r\n                      case 'v':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\r\n                      case 'S':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\r\n                      case 's':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\r\n                      case 'T':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\r\n                      case 't':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\r\n                      default:\r\n                          return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  }\r\n              };\r\n              Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\r\n                  // Check for remaining coordinates in the current command.\r\n                  if ((lookahead == '+' ||\r\n                      lookahead == '-' ||\r\n                      lookahead == '.' ||\r\n                      (lookahead >= '0' && lookahead <= '9')) &&\r\n                      previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      return previousCommand;\r\n                  }\r\n                  return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n              };\r\n              Source.prototype.initialCommandIsMoveTo = function () {\r\n                  // If the path is empty it is still valid, so return true.\r\n                  if (!this.hasMoreData())\r\n                      return true;\r\n                  var command = this.peekSegmentType();\r\n                  // Path must start with moveTo.\r\n                  return (command == window.SVGPathSeg.PATHSEG_MOVETO_ABS ||\r\n                      command == window.SVGPathSeg.PATHSEG_MOVETO_REL);\r\n              };\r\n              // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\r\n              // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\r\n              Source.prototype._parseNumber = function () {\r\n                  var exponent = 0;\r\n                  var integer = 0;\r\n                  var frac = 1;\r\n                  var decimal = 0;\r\n                  var sign = 1;\r\n                  var expsign = 1;\r\n                  var startIndex = this._currentIndex;\r\n                  this._skipOptionalSpaces();\r\n                  // Read the sign.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '+')\r\n                      this._currentIndex++;\r\n                  else if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '-') {\r\n                      this._currentIndex++;\r\n                      sign = -1;\r\n                  }\r\n                  if (this._currentIndex == this._endIndex ||\r\n                      ((this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9') &&\r\n                          this._string.charAt(this._currentIndex) != '.'))\r\n                      // The first character of a number must be one of [0-9+-.].\r\n                      return undefined;\r\n                  // Read the integer part, build right-to-left.\r\n                  var startIntPartIndex = this._currentIndex;\r\n                  while (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) >= '0' &&\r\n                      this._string.charAt(this._currentIndex) <= '9')\r\n                      this._currentIndex++; // Advance to first non-digit.\r\n                  if (this._currentIndex != startIntPartIndex) {\r\n                      var scanIntPartIndex = this._currentIndex - 1;\r\n                      var multiplier = 1;\r\n                      while (scanIntPartIndex >= startIntPartIndex) {\r\n                          integer +=\r\n                              multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\r\n                          multiplier *= 10;\r\n                      }\r\n                  }\r\n                  // Read the decimals.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '.') {\r\n                      this._currentIndex++;\r\n                      // There must be a least one digit following the .\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          frac *= 10;\r\n                          decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\r\n                          this._currentIndex += 1;\r\n                      }\r\n                  }\r\n                  // Read the exponent part.\r\n                  if (this._currentIndex != startIndex &&\r\n                      this._currentIndex + 1 < this._endIndex &&\r\n                      (this._string.charAt(this._currentIndex) == 'e' ||\r\n                          this._string.charAt(this._currentIndex) == 'E') &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'x' &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'm') {\r\n                      this._currentIndex++;\r\n                      // Read the sign of the exponent.\r\n                      if (this._string.charAt(this._currentIndex) == '+') {\r\n                          this._currentIndex++;\r\n                      }\r\n                      else if (this._string.charAt(this._currentIndex) == '-') {\r\n                          this._currentIndex++;\r\n                          expsign = -1;\r\n                      }\r\n                      // There must be an exponent.\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          exponent *= 10;\r\n                          exponent += this._string.charAt(this._currentIndex) - '0';\r\n                          this._currentIndex++;\r\n                      }\r\n                  }\r\n                  var number = integer + decimal;\r\n                  number *= sign;\r\n                  if (exponent)\r\n                      number *= Math.pow(10, expsign * exponent);\r\n                  if (startIndex == this._currentIndex)\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return number;\r\n              };\r\n              Source.prototype._parseArcFlag = function () {\r\n                  if (this._currentIndex >= this._endIndex)\r\n                      return undefined;\r\n                  var flag = false;\r\n                  var flagChar = this._string.charAt(this._currentIndex++);\r\n                  if (flagChar == '0')\r\n                      flag = false;\r\n                  else if (flagChar == '1')\r\n                      flag = true;\r\n                  else\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return flag;\r\n              };\r\n              Source.prototype.parseSegment = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  var command = this._pathSegTypeFromChar(lookahead);\r\n                  if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\r\n                      // Possibly an implicit command. Not allowed if this is the first command.\r\n                      if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                      command = this._nextCommandHelper(lookahead, this._previousCommand);\r\n                      if (command == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                  }\r\n                  else {\r\n                      this._currentIndex++;\r\n                  }\r\n                  this._previousCommand = command;\r\n                  switch (command) {\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_REL:\r\n                          return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\r\n                          return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_REL:\r\n                          return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_ABS:\r\n                          return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\r\n                          return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\r\n                          return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\r\n                          return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\r\n                          return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CLOSEPATH:\r\n                          this._skipOptionalSpaces();\r\n                          return new window.SVGPathSegClosePath(owningPathSegList);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_ARC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      case window.SVGPathSeg.PATHSEG_ARC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      default:\r\n                          throw 'Unknown path seg type.';\r\n                  }\r\n              };\r\n              var builder = new Builder();\r\n              var source = new Source(string);\r\n              if (!source.initialCommandIsMoveTo())\r\n                  return [];\r\n              while (source.hasMoreData()) {\r\n                  var pathSeg = source.parseSegment();\r\n                  if (!pathSeg)\r\n                      return [];\r\n                  builder.appendSegment(pathSeg);\r\n              }\r\n              return builder.pathSegList;\r\n          };\r\n      }\r\n  })();\r\n  // String.padEnd polyfill for IE11\r\n  //\r\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\r\n  if (!String.prototype.padEnd) {\r\n      String.prototype.padEnd = function padEnd(targetLength, padString) {\r\n          targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\r\n          padString = String(typeof padString !== 'undefined' ? padString : ' ');\r\n          if (this.length > targetLength) {\r\n              return String(this);\r\n          }\r\n          else {\r\n              targetLength = targetLength - this.length;\r\n              if (targetLength > padString.length) {\r\n                  padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\r\n              }\r\n              return String(this) + padString.slice(0, targetLength);\r\n          }\r\n      };\r\n  }\r\n  // Object.assign polyfill for IE11\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\r\n  if (typeof Object.assign !== 'function') {\r\n      // Must be writable: true, enumerable: false, configurable: true\r\n      Object.defineProperty(Object, 'assign', {\r\n          value: function assign(target, varArgs) {\r\n              if (target === null || target === undefined) {\r\n                  throw new TypeError('Cannot convert undefined or null to object');\r\n              }\r\n              var to = Object(target);\r\n              for (var index = 1; index < arguments.length; index++) {\r\n                  var nextSource = arguments[index];\r\n                  if (nextSource !== null && nextSource !== undefined) {\r\n                      for (var nextKey in nextSource) {\r\n                          // Avoid bugs when hasOwnProperty is shadowed\r\n                          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                              to[nextKey] = nextSource[nextKey];\r\n                          }\r\n                      }\r\n                  }\r\n              }\r\n              return to;\r\n          },\r\n          writable: true,\r\n          configurable: true\r\n      });\r\n  }\r\n  /* jshint ignore:end */\n\n  Chart.prototype.axis = function () { };\r\n  Chart.prototype.axis.labels = function (labels) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          Object.keys(labels).forEach(function (axisId) {\r\n              $$.axis.setLabelText(axisId, labels[axisId]);\r\n          });\r\n          $$.axis.updateLabels();\r\n      }\r\n      // TODO: return some values?\r\n  };\r\n  Chart.prototype.axis.max = function (max) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof max === 'object') {\r\n              if (isValue(max.x)) {\r\n                  config.axis_x_max = max.x;\r\n              }\r\n              if (isValue(max.y)) {\r\n                  config.axis_y_max = max.y;\r\n              }\r\n              if (isValue(max.y2)) {\r\n                  config.axis_y2_max = max.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_max = config.axis_y2_max = max;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_max,\r\n              y: config.axis_y_max,\r\n              y2: config.axis_y2_max\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.min = function (min) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof min === 'object') {\r\n              if (isValue(min.x)) {\r\n                  config.axis_x_min = min.x;\r\n              }\r\n              if (isValue(min.y)) {\r\n                  config.axis_y_min = min.y;\r\n              }\r\n              if (isValue(min.y2)) {\r\n                  config.axis_y2_min = min.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_min = config.axis_y2_min = min;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_min,\r\n              y: config.axis_y_min,\r\n              y2: config.axis_y2_min\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.axis.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.axis.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.axis.max(),\r\n              min: this.axis.min()\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.types = function (types) {\r\n      var $$ = this.internal;\r\n      if (types === undefined) {\r\n          return {\r\n              y: $$.config.axis_y_type,\r\n              y2: $$.config.axis_y2_type\r\n          };\r\n      }\r\n      else {\r\n          if (isDefined(types.y)) {\r\n              $$.config.axis_y_type = types.y;\r\n          }\r\n          if (isDefined(types.y2)) {\r\n              $$.config.axis_y2_type = types.y2;\r\n          }\r\n          $$.updateScales();\r\n          $$.redraw();\r\n      }\r\n  };\n\n  Chart.prototype.category = function (i, category) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length > 1) {\r\n          config.axis_x_categories[i] = category;\r\n          $$.redraw();\r\n      }\r\n      return config.axis_x_categories[i];\r\n  };\r\n  Chart.prototype.categories = function (categories) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!arguments.length) {\r\n          return config.axis_x_categories;\r\n      }\r\n      config.axis_x_categories = categories;\r\n      $$.redraw();\r\n      return config.axis_x_categories;\r\n  };\n\n  Chart.prototype.resize = function (size) {\r\n      var $$ = this.internal, config = $$.config;\r\n      config.size_width = size ? size.width : null;\r\n      config.size_height = size ? size.height : null;\r\n      this.flush();\r\n  };\r\n  Chart.prototype.flush = function () {\r\n      var $$ = this.internal;\r\n      $$.updateAndRedraw({\r\n          withLegend: true,\r\n          withTransition: false,\r\n          withTransitionForTransform: false\r\n      });\r\n  };\r\n  Chart.prototype.destroy = function () {\r\n      var $$ = this.internal;\r\n      window.clearInterval($$.intervalForObserveInserted);\r\n      if ($$.resizeTimeout !== undefined) {\r\n          window.clearTimeout($$.resizeTimeout);\r\n      }\r\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\r\n      // Removes the inner resize functions\r\n      $$.resizeFunction.remove();\r\n      // Unbinds from the window focus event\r\n      $$.unbindWindowFocus();\r\n      $$.selectChart.classed('c3', false).html('');\r\n      // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\r\n      Object.keys($$).forEach(function (key) {\r\n          $$[key] = null;\r\n      });\r\n      return null;\r\n  };\n\n  // TODO: fix\r\n  Chart.prototype.color = function (id) {\r\n      var $$ = this.internal;\r\n      return $$.color(id); // more patterns\r\n  };\n\n  Chart.prototype.data = function (targetIds) {\r\n      var targets = this.internal.data.targets;\r\n      return typeof targetIds === 'undefined'\r\n          ? targets\r\n          : targets.filter(function (t) {\r\n              return [].concat(targetIds).indexOf(t.id) >= 0;\r\n          });\r\n  };\r\n  Chart.prototype.data.shown = function (targetIds) {\r\n      return this.internal.filterTargetsToShow(this.data(targetIds));\r\n  };\r\n  /**\r\n   * Get values of the data loaded in the chart.\r\n   *\r\n   * @param {String|Array} targetId This API returns the value of specified target.\r\n   * @param flat\r\n   * @return {Array} Data values\r\n   */\r\n  Chart.prototype.data.values = function (targetId, flat) {\r\n      if (flat === void 0) { flat = true; }\r\n      var values = null;\r\n      if (targetId) {\r\n          var targets = this.data(targetId);\r\n          if (targets && isArray(targets)) {\r\n              values = targets.reduce(function (ret, v) {\r\n                  var dataValue = v.values.map(function (d) { return d.value; });\r\n                  if (flat) {\r\n                      ret = ret.concat(dataValue);\r\n                  }\r\n                  else {\r\n                      ret.push(dataValue);\r\n                  }\r\n                  return ret;\r\n              }, []);\r\n          }\r\n      }\r\n      return values;\r\n  };\r\n  Chart.prototype.data.names = function (names) {\r\n      this.internal.clearLegendItemTextBoxCache();\r\n      return this.internal.updateDataAttributes('names', names);\r\n  };\r\n  Chart.prototype.data.colors = function (colors) {\r\n      return this.internal.updateDataAttributes('colors', colors);\r\n  };\r\n  Chart.prototype.data.axes = function (axes) {\r\n      return this.internal.updateDataAttributes('axes', axes);\r\n  };\r\n  Chart.prototype.data.stackNormalized = function (normalized) {\r\n      if (normalized === undefined) {\r\n          return this.internal.isStackNormalized();\r\n      }\r\n      this.internal.config.data_stack_normalize = !!normalized;\r\n      this.internal.redraw();\r\n  };\n\n  Chart.prototype.donut = function () { };\r\n  Chart.prototype.donut.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.donut_padAngle;\r\n      }\r\n      this.internal.config.donut_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.flow = function (args) {\r\n      var $$ = this.internal, targets, data, notfoundIds = [], orgDataCount = $$.getMaxDataCount(), dataCount, domain, baseTarget, baseValue, length = 0, tail = 0, diff, to;\r\n      if (args.json) {\r\n          data = $$.convertJsonToData(args.json, args.keys);\r\n      }\r\n      else if (args.rows) {\r\n          data = $$.convertRowsToData(args.rows);\r\n      }\r\n      else if (args.columns) {\r\n          data = $$.convertColumnsToData(args.columns);\r\n      }\r\n      else {\r\n          return;\r\n      }\r\n      targets = $$.convertDataToTargets(data, true);\r\n      // Update/Add data\r\n      $$.data.targets.forEach(function (t) {\r\n          var found = false, i, j;\r\n          for (i = 0; i < targets.length; i++) {\r\n              if (t.id === targets[i].id) {\r\n                  found = true;\r\n                  if (t.values[t.values.length - 1]) {\r\n                      tail = t.values[t.values.length - 1].index + 1;\r\n                  }\r\n                  length = targets[i].values.length;\r\n                  for (j = 0; j < length; j++) {\r\n                      targets[i].values[j].index = tail + j;\r\n                      if (!$$.isTimeSeries()) {\r\n                          targets[i].values[j].x = tail + j;\r\n                      }\r\n                  }\r\n                  t.values = t.values.concat(targets[i].values);\r\n                  targets.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n          if (!found) {\r\n              notfoundIds.push(t.id);\r\n          }\r\n      });\r\n      // Append null for not found targets\r\n      $$.data.targets.forEach(function (t) {\r\n          var i, j;\r\n          for (i = 0; i < notfoundIds.length; i++) {\r\n              if (t.id === notfoundIds[i]) {\r\n                  tail = t.values[t.values.length - 1].index + 1;\r\n                  for (j = 0; j < length; j++) {\r\n                      t.values.push({\r\n                          id: t.id,\r\n                          index: tail + j,\r\n                          x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\r\n                          value: null\r\n                      });\r\n                  }\r\n              }\r\n          }\r\n      });\r\n      // Generate null values for new target\r\n      if ($$.data.targets.length) {\r\n          targets.forEach(function (t) {\r\n              var i, missing = [];\r\n              for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\r\n                  missing.push({\r\n                      id: t.id,\r\n                      index: i,\r\n                      x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\r\n                      value: null\r\n                  });\r\n              }\r\n              t.values.forEach(function (v) {\r\n                  v.index += tail;\r\n                  if (!$$.isTimeSeries()) {\r\n                      v.x += tail;\r\n                  }\r\n              });\r\n              t.values = missing.concat(t.values);\r\n          });\r\n      }\r\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      // check data count because behavior needs to change when it's only one\r\n      dataCount = $$.getMaxDataCount();\r\n      baseTarget = $$.data.targets[0];\r\n      baseValue = baseTarget.values[0];\r\n      // Update length to flow if needed\r\n      if (isDefined(args.to)) {\r\n          length = 0;\r\n          to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\r\n          baseTarget.values.forEach(function (v) {\r\n              if (v.x < to) {\r\n                  length++;\r\n              }\r\n          });\r\n      }\r\n      else if (isDefined(args.length)) {\r\n          length = args.length;\r\n      }\r\n      // If only one data, update the domain to flow from left edge of the chart\r\n      if (!orgDataCount) {\r\n          if ($$.isTimeSeries()) {\r\n              if (baseTarget.values.length > 1) {\r\n                  diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\r\n              }\r\n              else {\r\n                  diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\r\n              }\r\n          }\r\n          else {\r\n              diff = 1;\r\n          }\r\n          domain = [baseValue.x - diff, baseValue.x];\r\n          $$.updateXDomain(null, true, true, false, domain);\r\n      }\r\n      else if (orgDataCount === 1) {\r\n          if ($$.isTimeSeries()) {\r\n              diff =\r\n                  (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\r\n              domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\r\n              $$.updateXDomain(null, true, true, false, domain);\r\n          }\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          flow: {\r\n              index: baseValue.index,\r\n              length: length,\r\n              duration: isValue(args.duration)\r\n                  ? args.duration\r\n                  : $$.config.transition_duration,\r\n              done: args.done,\r\n              orgDataCount: orgDataCount\r\n          },\r\n          withLegend: true,\r\n          withTransition: orgDataCount > 1,\r\n          withTrimXDomain: false,\r\n          withUpdateXAxis: true\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateFlow = function (args) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      return function () {\r\n          var targets = args.targets, flow = args.flow, drawBar = args.drawBar, drawLine = args.drawLine, drawArea = args.drawArea, cx = args.cx, cy = args.cy, xv = args.xv, xForText = args.xForText, yForText = args.yForText, duration = args.duration;\r\n          var translateX, scaleX = 1, transform, flowIndex = flow.index, flowLength = flow.length, flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex), flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength), orgDomain = $$.x.domain(), domain, durationForFlow = flow.duration || duration, done = flow.done || function () { }, wait = $$.generateWait();\r\n          var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle;\r\n          // set flag\r\n          $$.flowing = true;\r\n          // remove head data after rendered\r\n          $$.data.targets.forEach(function (d) {\r\n              d.values.splice(0, flowLength);\r\n          });\r\n          // update x domain to generate axis elements for flow\r\n          domain = $$.updateXDomain(targets, true, true);\r\n          // update elements related to x scale\r\n          if ($$.updateXGrid) {\r\n              $$.updateXGrid(true);\r\n          }\r\n          xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\r\n          xgridLines = $$.xgridLines || d3.selectAll([]);\r\n          mainRegion = $$.mainRegion || d3.selectAll([]);\r\n          mainText = $$.mainText || d3.selectAll([]);\r\n          mainBar = $$.mainBar || d3.selectAll([]);\r\n          mainLine = $$.mainLine || d3.selectAll([]);\r\n          mainArea = $$.mainArea || d3.selectAll([]);\r\n          mainCircle = $$.mainCircle || d3.selectAll([]);\r\n          // generate transform to flow\r\n          if (!flow.orgDataCount) {\r\n              // if empty\r\n              if ($$.data.targets[0].values.length !== 1) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  if ($$.isTimeSeries()) {\r\n                      flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\r\n                      flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\r\n                      translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n                  }\r\n                  else {\r\n                      translateX = diffDomain(domain) / 2;\r\n                  }\r\n              }\r\n          }\r\n          else if (flow.orgDataCount === 1 ||\r\n              (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\r\n              translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n          }\r\n          else {\r\n              if ($$.isTimeSeries()) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n              }\r\n          }\r\n          scaleX = diffDomain(orgDomain) / diffDomain(domain);\r\n          transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\r\n          $$.hideXGridFocus();\r\n          var flowTransition = d3\r\n              .transition()\r\n              .ease(d3.easeLinear)\r\n              .duration(durationForFlow);\r\n          wait.add($$.xAxis($$.axes.x, flowTransition));\r\n          wait.add(mainBar.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainLine.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainArea.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainText.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainRegion\r\n              .filter($$.isRegionOnX)\r\n              .transition(flowTransition)\r\n              .attr('transform', transform));\r\n          wait.add(xgrid.transition(flowTransition).attr('transform', transform));\r\n          wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\r\n          wait(function () {\r\n              var i, shapes = [], texts = [];\r\n              // remove flowed elements\r\n              if (flowLength) {\r\n                  for (i = 0; i < flowLength; i++) {\r\n                      shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\r\n                      texts.push('.' + CLASS.text + '-' + (flowIndex + i));\r\n                  }\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.shapes)\r\n                      .selectAll(shapes)\r\n                      .remove();\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.texts)\r\n                      .selectAll(texts)\r\n                      .remove();\r\n                  $$.svg.select('.' + CLASS.xgrid).remove();\r\n              }\r\n              // draw again for removing flowed elements and reverting attr\r\n              xgrid\r\n                  .attr('transform', null)\r\n                  .attr('x1', $$.xgridAttr.x1)\r\n                  .attr('x2', $$.xgridAttr.x2)\r\n                  .attr('y1', $$.xgridAttr.y1)\r\n                  .attr('y2', $$.xgridAttr.y2)\r\n                  .style('opacity', $$.xgridAttr.opacity);\r\n              xgridLines.attr('transform', null);\r\n              xgridLines\r\n                  .select('line')\r\n                  .attr('x1', config.axis_rotated ? 0 : xv)\r\n                  .attr('x2', config.axis_rotated ? $$.width : xv);\r\n              xgridLines\r\n                  .select('text')\r\n                  .attr('x', config.axis_rotated ? $$.width : 0)\r\n                  .attr('y', xv);\r\n              mainBar.attr('transform', null).attr('d', drawBar);\r\n              mainLine.attr('transform', null).attr('d', drawLine);\r\n              mainArea.attr('transform', null).attr('d', drawArea);\r\n              mainCircle\r\n                  .attr('transform', null)\r\n                  .attr('cx', cx)\r\n                  .attr('cy', cy);\r\n              mainText\r\n                  .attr('transform', null)\r\n                  .attr('x', xForText)\r\n                  .attr('y', yForText)\r\n                  .style('fill-opacity', $$.opacityForText.bind($$));\r\n              mainRegion.attr('transform', null);\r\n              mainRegion\r\n                  .filter($$.isRegionOnX)\r\n                  .attr('x', $$.regionX.bind($$))\r\n                  .attr('width', $$.regionWidth.bind($$));\r\n              // callback for end of flow\r\n              done();\r\n              $$.flowing = false;\r\n          });\r\n      };\r\n  };\n\n  Chart.prototype.focus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          this.revert();\r\n      this.defocus();\r\n      candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.expandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, true);\r\n      $$.focusedTargetIds = targetIds;\r\n      $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  Chart.prototype.defocus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, false);\r\n      $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      $$.defocusedTargetIds = targetIds;\r\n  };\r\n  Chart.prototype.revert = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\r\n      candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      if ($$.config.legend_show) {\r\n          $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\r\n          $$.legend\r\n              .selectAll($$.selectorLegends(targetIds))\r\n              .filter(function () {\r\n              return $$.d3.select(this).classed(CLASS.legendItemFocused);\r\n          })\r\n              .classed(CLASS.legendItemFocused, false);\r\n      }\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n  };\n\n  Chart.prototype.xgrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_x_lines;\r\n      }\r\n      config.grid_x_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_x_lines;\r\n  };\r\n  Chart.prototype.xgrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.xgrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, true);\r\n  };\r\n  Chart.prototype.ygrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_y_lines;\r\n      }\r\n      config.grid_y_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_y_lines;\r\n  };\r\n  Chart.prototype.ygrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.ygrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, false);\r\n  };\n\n  Chart.prototype.groups = function (groups) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (isUndefined(groups)) {\r\n          return config.data_groups;\r\n      }\r\n      config.data_groups = groups;\r\n      $$.redraw();\r\n      return config.data_groups;\r\n  };\n\n  Chart.prototype.legend = function () { };\r\n  Chart.prototype.legend.show = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.showLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: true });\r\n  };\r\n  Chart.prototype.legend.hide = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.hideLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: false });\r\n  };\n\n  Chart.prototype.load = function (args) {\r\n      var $$ = this.internal, config = $$.config;\r\n      // update xs if specified\r\n      if (args.xs) {\r\n          $$.addXs(args.xs);\r\n      }\r\n      // update names if exists\r\n      if ('names' in args) {\r\n          Chart.prototype.data.names.bind(this)(args.names);\r\n      }\r\n      // update classes if exists\r\n      if ('classes' in args) {\r\n          Object.keys(args.classes).forEach(function (id) {\r\n              config.data_classes[id] = args.classes[id];\r\n          });\r\n      }\r\n      // update categories if exists\r\n      if ('categories' in args && $$.isCategorized()) {\r\n          config.axis_x_categories = args.categories;\r\n      }\r\n      // update axes if exists\r\n      if ('axes' in args) {\r\n          Object.keys(args.axes).forEach(function (id) {\r\n              config.data_axes[id] = args.axes[id];\r\n          });\r\n      }\r\n      // update colors if exists\r\n      if ('colors' in args) {\r\n          Object.keys(args.colors).forEach(function (id) {\r\n              config.data_colors[id] = args.colors[id];\r\n          });\r\n      }\r\n      // use cache if exists\r\n      if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\r\n          $$.load($$.getCaches(args.cacheIds), args.done);\r\n          return;\r\n      }\r\n      // unload if needed\r\n      if (args.unload) {\r\n          // TODO: do not unload if target will load (included in url/rows/columns)\r\n          $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\r\n              $$.loadFromArgs(args);\r\n          });\r\n      }\r\n      else {\r\n          $$.loadFromArgs(args);\r\n      }\r\n  };\r\n  Chart.prototype.unload = function (args) {\r\n      var $$ = this.internal;\r\n      args = args || {};\r\n      if (args instanceof Array) {\r\n          args = { ids: args };\r\n      }\r\n      else if (typeof args === 'string') {\r\n          args = { ids: [args] };\r\n      }\r\n      $$.unload($$.mapToTargetIds(args.ids), function () {\r\n          $$.redraw({\r\n              withUpdateOrgXDomain: true,\r\n              withUpdateXDomain: true,\r\n              withLegend: true\r\n          });\r\n          if (args.done) {\r\n              args.done();\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.pie = function () { };\r\n  Chart.prototype.pie.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.pie_padAngle;\r\n      }\r\n      this.internal.config.pie_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.regions = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = regions;\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.add = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = config.regions.concat(regions);\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.remove = function (options) {\r\n      var $$ = this.internal, config = $$.config, duration, classes, regions;\r\n      options = options || {};\r\n      duration = getOption(options, 'duration', config.transition_duration);\r\n      classes = getOption(options, 'classes', [CLASS.region]);\r\n      regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\r\n          return '.' + c;\r\n      }));\r\n      (duration ? regions.transition().duration(duration) : regions)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      config.regions = config.regions.filter(function (region) {\r\n          var found = false;\r\n          if (!region['class']) {\r\n              return true;\r\n          }\r\n          region['class'].split(' ').forEach(function (c) {\r\n              if (classes.indexOf(c) >= 0) {\r\n                  found = true;\r\n              }\r\n          });\r\n          return !found;\r\n      });\r\n      return config.regions;\r\n  };\n\n  Chart.prototype.selected = function (targetId) {\r\n      var $$ = this.internal, d3 = $$.d3;\r\n      return $$.main\r\n          .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId))\r\n          .selectAll('.' + CLASS.shape)\r\n          .filter(function () {\r\n          return d3.select(this).classed(CLASS.SELECTED);\r\n      })\r\n          .nodes()\r\n          .map(function (d) {\r\n          var data = d.__data__;\r\n          return data.data ? data.data : data;\r\n      });\r\n  };\r\n  Chart.prototype.select = function (ids, indices, resetOther) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d) && !isSelected) {\r\n                  toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\r\n              }\r\n          }\r\n          else if (isDefined(resetOther) && resetOther) {\r\n              if (isSelected) {\r\n                  toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n              }\r\n          }\r\n      });\r\n  };\r\n  Chart.prototype.unselect = function (ids, indices) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d)) {\r\n                  if (isSelected) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              }\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.removeHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('display', isIE() ? 'block' : 'initial', 'important')\r\n          .style('opacity', 1, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 1);\r\n      });\r\n      if (options.withLegend) {\r\n          $$.showLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.hide = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.addHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('opacity', 0, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 0);\r\n          targets.style('display', 'none');\r\n      });\r\n      if (options.withLegend) {\r\n          $$.hideLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.toggle = function (targetIds, options) {\r\n      var that = this, $$ = this.internal;\r\n      $$.mapToTargetIds(targetIds).forEach(function (targetId) {\r\n          $$.isTargetToShow(targetId)\r\n              ? that.hide(targetId, options)\r\n              : that.show(targetId, options);\r\n      });\r\n  };\n\n  Chart.prototype.subchart = function () { };\r\n  Chart.prototype.subchart.isShown = function () {\r\n      var $$ = this.internal;\r\n      return $$.config.subchart_show;\r\n  };\r\n  Chart.prototype.subchart.show = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = true;\r\n      // insert DOM\r\n      $$.initSubchart();\r\n      // update dimensions with sub chart now visible\r\n      $$.updateDimension();\r\n      // insert brush (depends on sizes previously updated)\r\n      $$.initSubchartBrush();\r\n      // attach data\r\n      $$.updateTargetsForSubchart($$.getTargets());\r\n      // reset fade-in state\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = false;\r\n      });\r\n      // redraw chart !\r\n      $$.updateAndRedraw();\r\n      // update visible targets !\r\n      $$.showTargets();\r\n  };\r\n  Chart.prototype.subchart.hide = function () {\r\n      var $$ = this.internal;\r\n      if (!$$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = false;\r\n      // remove DOM\r\n      $$.removeSubchart();\r\n      // re-render chart\r\n      $$.redraw();\r\n  };\n\n  Chart.prototype.tooltip = function () { };\r\n  Chart.prototype.tooltip.show = function (args) {\r\n      var $$ = this.internal, targets, data, mouse = {};\r\n      // determine mouse position on the chart\r\n      if (args.mouse) {\r\n          mouse = args.mouse;\r\n      }\r\n      else {\r\n          // determine focus data\r\n          if (args.data) {\r\n              data = args.data;\r\n          }\r\n          else if (typeof args.x !== 'undefined') {\r\n              if (args.id) {\r\n                  targets = $$.data.targets.filter(function (t) {\r\n                      return t.id === args.id;\r\n                  });\r\n              }\r\n              else {\r\n                  targets = $$.data.targets;\r\n              }\r\n              data = $$.filterByX(targets, args.x).slice(0, 1)[0];\r\n          }\r\n          mouse = data ? $$.getMousePosition(data) : null;\r\n      }\r\n      // emulate mouse events to show\r\n      $$.dispatchEvent('mousemove', mouse);\r\n      $$.config.tooltip_onshow.call($$, data);\r\n  };\r\n  Chart.prototype.tooltip.hide = function () {\r\n      // TODO: get target data by checking the state of focus\r\n      this.internal.dispatchEvent('mouseout', 0);\r\n      this.internal.config.tooltip_onhide.call(this);\r\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\r\n      var $$ = this.internal, options = ['pie', 'donut'].indexOf(type) >= 0 ? { withTransform: true } : null;\r\n      $$.transformTo(targetIds, type, options);\r\n  };\r\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\r\n      var $$ = this, withTransitionForAxis = !$$.hasArcType(), options = optionsForRedraw || {\r\n          withTransitionForAxis: withTransitionForAxis\r\n      };\r\n      options.withTransitionForTransform = false;\r\n      $$.transiting = false;\r\n      $$.setTargetType(targetIds, type);\r\n      $$.updateTargets($$.data.targets); // this is needed when transforming to arc\r\n      $$.updateAndRedraw(options);\r\n  };\n\n  Chart.prototype.x = function (x) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetX($$.data.targets, x);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\r\n  Chart.prototype.xs = function (xs) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetXs($$.data.targets, xs);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\n\n  Chart.prototype.zoom = function (domain) {\r\n      var $$ = this.internal;\r\n      if (domain) {\r\n          if ($$.isTimeSeries()) {\r\n              domain = domain.map(function (x) {\r\n                  return $$.parseDate(x);\r\n              });\r\n          }\r\n          if ($$.config.subchart_show) {\r\n              $$.brush.selectionAsValue(domain, true);\r\n          }\r\n          else {\r\n              $$.updateXDomain(null, true, false, false, domain);\r\n              $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n          }\r\n          $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\r\n          return domain;\r\n      }\r\n      else {\r\n          return $$.x.domain();\r\n      }\r\n  };\r\n  Chart.prototype.zoom.enable = function (enabled) {\r\n      var $$ = this.internal;\r\n      $$.config.zoom_enabled = enabled;\r\n      $$.updateAndRedraw();\r\n  };\r\n  Chart.prototype.unzoom = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          $$.brush.clear();\r\n      }\r\n      else {\r\n          $$.updateXDomain(null, true, false, false, $$.subX.domain());\r\n          $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n      }\r\n  };\r\n  Chart.prototype.zoom.max = function (max) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (max === 0 || max) {\r\n          config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\r\n      }\r\n      else {\r\n          return config.zoom_x_max;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.min = function (min) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (min === 0 || min) {\r\n          config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\r\n      }\r\n      else {\r\n          return config.zoom_x_min;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.domain.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.domain.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.domain.max(),\r\n              min: this.domain.min()\r\n          };\r\n      }\r\n  };\n\n  ChartInternal.prototype.initPie = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.pie = d3\r\n          .pie()\r\n          .padAngle(this.getPadAngle.bind(this))\r\n          .value(function (d) {\r\n          return d.values.reduce(function (a, b) {\r\n              return a + b.value;\r\n          }, 0);\r\n      });\r\n      var orderFct = $$.getOrderFunction();\r\n      // we need to reverse the returned order if asc or desc to have the slice in expected order.\r\n      if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\r\n          var defaultSort_1 = orderFct;\r\n          orderFct = function (t1, t2) { return defaultSort_1(t1, t2) * -1; };\r\n      }\r\n      $$.pie.sort(orderFct || null);\r\n  };\r\n  ChartInternal.prototype.updateRadius = function () {\r\n      var $$ = this, config = $$.config, w = config.gauge_width || config.donut_width, gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length *\r\n          $$.config.gauge_arcs_minWidth;\r\n      $$.radiusExpanded =\r\n          (Math.min($$.arcWidth, $$.arcHeight) / 2) * ($$.hasType('gauge') ? 0.85 : 1);\r\n      $$.radius = $$.radiusExpanded * 0.95;\r\n      $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\r\n      $$.innerRadius =\r\n          $$.hasType('donut') || $$.hasType('gauge')\r\n              ? $$.radius * $$.innerRadiusRatio\r\n              : 0;\r\n      $$.gaugeArcWidth = w\r\n          ? w\r\n          : gaugeArcWidth <= $$.radius - $$.innerRadius\r\n              ? $$.radius - $$.innerRadius\r\n              : gaugeArcWidth <= $$.radius\r\n                  ? gaugeArcWidth\r\n                  : $$.radius;\r\n  };\r\n  ChartInternal.prototype.getPadAngle = function () {\r\n      if (this.hasType('pie')) {\r\n          return this.config.pie_padAngle || 0;\r\n      }\r\n      else if (this.hasType('donut')) {\r\n          return this.config.donut_padAngle || 0;\r\n      }\r\n      else {\r\n          return 0;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateArc = function () {\r\n      var $$ = this;\r\n      $$.svgArc = $$.getSvgArc();\r\n      $$.svgArcExpanded = $$.getSvgArcExpanded();\r\n      $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\r\n  };\r\n  ChartInternal.prototype.updateAngle = function (d) {\r\n      var $$ = this, config = $$.config, found = false, index = 0, gMin, gMax, gTic, gValue;\r\n      if (!config) {\r\n          return null;\r\n      }\r\n      $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\r\n          if (!found && t.data.id === d.data.id) {\r\n              found = true;\r\n              d = t;\r\n              d.index = index;\r\n          }\r\n          index++;\r\n      });\r\n      if (isNaN(d.startAngle)) {\r\n          d.startAngle = 0;\r\n      }\r\n      if (isNaN(d.endAngle)) {\r\n          d.endAngle = d.startAngle;\r\n      }\r\n      if ($$.isGaugeType(d.data)) {\r\n          gMin = config.gauge_min;\r\n          gMax = config.gauge_max;\r\n          gTic = (Math.PI * (config.gauge_fullCircle ? 2 : 1)) / (gMax - gMin);\r\n          gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\r\n          d.startAngle = config.gauge_startingAngle;\r\n          d.endAngle = d.startAngle + gTic * gValue;\r\n      }\r\n      return found ? d : null;\r\n  };\r\n  ChartInternal.prototype.getSvgArc = function () {\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      }), newArc = function (d, withoutUpdate) {\r\n          var updated;\r\n          if (withoutUpdate) {\r\n              return arc(d);\r\n          } // for interpolate\r\n          updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n      newArc.centroid = arc.centroid;\r\n      return newArc;\r\n  };\r\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\r\n      rate = rate || 1;\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100), arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * d.index + expandWidth\r\n              : $$.radiusExpanded * rate;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      });\r\n      return function (d) {\r\n          var updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\r\n      return force || this.isArcType(d.data)\r\n          ? this.svgArc(d, withoutUpdate)\r\n          : 'M 0 0';\r\n  };\r\n  ChartInternal.prototype.transformForArcLabel = function (d) {\r\n      var $$ = this, config = $$.config, updated = $$.updateAngle(d), c, x, y, h, ratio, translate = '', hasGauge = $$.hasType('gauge');\r\n      if (updated && !hasGauge) {\r\n          c = this.svgArc.centroid(updated);\r\n          x = isNaN(c[0]) ? 0 : c[0];\r\n          y = isNaN(c[1]) ? 0 : c[1];\r\n          h = Math.sqrt(x * x + y * y);\r\n          if ($$.hasType('donut') && config.donut_label_ratio) {\r\n              ratio = isFunction(config.donut_label_ratio)\r\n                  ? config.donut_label_ratio(d, $$.radius, h)\r\n                  : config.donut_label_ratio;\r\n          }\r\n          else if ($$.hasType('pie') && config.pie_label_ratio) {\r\n              ratio = isFunction(config.pie_label_ratio)\r\n                  ? config.pie_label_ratio(d, $$.radius, h)\r\n                  : config.pie_label_ratio;\r\n          }\r\n          else {\r\n              ratio =\r\n                  $$.radius && h\r\n                      ? ((36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) *\r\n                          $$.radius) /\r\n                          h\r\n                      : 0;\r\n          }\r\n          translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\r\n      }\r\n      else if (updated &&\r\n          hasGauge &&\r\n          $$.filterTargetsToShow($$.data.targets).length > 1) {\r\n          var y1 = Math.sin(updated.endAngle - Math.PI / 2);\r\n          x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\r\n          y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\r\n          translate = 'translate(' + x + ',' + y + ')';\r\n      }\r\n      return translate;\r\n  };\r\n  /**\r\n   * @deprecated Use `getRatio('arc', d)` instead.\r\n   */\r\n  ChartInternal.prototype.getArcRatio = function (d) {\r\n      return this.getRatio('arc', d);\r\n  };\r\n  ChartInternal.prototype.convertToArcData = function (d) {\r\n      return this.addName({\r\n          id: d.data.id,\r\n          value: d.value,\r\n          ratio: this.getRatio('arc', d),\r\n          index: d.index\r\n      });\r\n  };\r\n  ChartInternal.prototype.textForArcLabel = function (d) {\r\n      var $$ = this, updated, value, ratio, id, format;\r\n      if (!$$.shouldShowArcLabel()) {\r\n          return '';\r\n      }\r\n      updated = $$.updateAngle(d);\r\n      value = updated ? updated.value : null;\r\n      ratio = $$.getRatio('arc', updated);\r\n      id = d.data.id;\r\n      if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\r\n          return '';\r\n      }\r\n      format = $$.getArcLabelFormat();\r\n      return format\r\n          ? format(value, ratio, id)\r\n          : $$.defaultArcValueFormat(value, ratio);\r\n  };\r\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\r\n      var $$ = this, format = $$.getGaugeLabelExtents();\r\n      return format ? format(value, isMax) : value;\r\n  };\r\n  ChartInternal.prototype.expandArc = function (targetIds) {\r\n      var $$ = this, interval;\r\n      // MEMO: avoid to cancel transition\r\n      if ($$.transiting) {\r\n          interval = window.setInterval(function () {\r\n              if (!$$.transiting) {\r\n                  window.clearInterval(interval);\r\n                  if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\r\n                      $$.expandArc(targetIds);\r\n                  }\r\n              }\r\n          }, 10);\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .each(function (d) {\r\n          if (!$$.shouldExpand(d.data.id)) {\r\n              return;\r\n          }\r\n          $$.d3\r\n              .select(this)\r\n              .selectAll('path')\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id))\r\n              .attr('d', $$.svgArcExpanded)\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id) * 2)\r\n              .attr('d', $$.svgArcExpandedSub)\r\n              .each(function (d) {\r\n              if ($$.isDonutType(d.data)) ;\r\n          });\r\n      });\r\n  };\r\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\r\n      var $$ = this;\r\n      if ($$.transiting) {\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .selectAll('path')\r\n          .transition()\r\n          .duration(function (d) {\r\n          return $$.expandDuration(d.data.id);\r\n      })\r\n          .attr('d', $$.svgArc);\r\n      $$.svg.selectAll('.' + CLASS.arc);\r\n  };\r\n  ChartInternal.prototype.expandDuration = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isDonutType(id)) {\r\n          return config.donut_expand_duration;\r\n      }\r\n      else if ($$.isGaugeType(id)) {\r\n          return config.gauge_expand_duration;\r\n      }\r\n      else if ($$.isPieType(id)) {\r\n          return config.pie_expand_duration;\r\n      }\r\n      else {\r\n          return 50;\r\n      }\r\n  };\r\n  ChartInternal.prototype.shouldExpand = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return (($$.isDonutType(id) && config.donut_expand) ||\r\n          ($$.isGaugeType(id) && config.gauge_expand) ||\r\n          ($$.isPieType(id) && config.pie_expand));\r\n  };\r\n  ChartInternal.prototype.shouldShowArcLabel = function () {\r\n      var $$ = this, config = $$.config, shouldShow = true;\r\n      if ($$.hasType('donut')) {\r\n          shouldShow = config.donut_label_show;\r\n      }\r\n      else if ($$.hasType('pie')) {\r\n          shouldShow = config.pie_label_show;\r\n      }\r\n      // when gauge, always true\r\n      return shouldShow;\r\n  };\r\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\r\n      var $$ = this, config = $$.config, threshold = $$.hasType('donut')\r\n          ? config.donut_label_threshold\r\n          : config.pie_label_threshold;\r\n      return ratio >= threshold;\r\n  };\r\n  ChartInternal.prototype.getArcLabelFormat = function () {\r\n      var $$ = this, config = $$.config, format = config.pie_label_format;\r\n      if ($$.hasType('gauge')) {\r\n          format = config.gauge_label_format;\r\n      }\r\n      else if ($$.hasType('donut')) {\r\n          format = config.donut_label_format;\r\n      }\r\n      return format;\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.gauge_label_extents;\r\n  };\r\n  ChartInternal.prototype.getArcTitle = function () {\r\n      var $$ = this;\r\n      return $$.hasType('donut') ? $$.config.donut_title : '';\r\n  };\r\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\r\n      var $$ = this, main = $$.main, mainPies, mainPieEnter, classChartArc = $$.classChartArc.bind($$), classArcs = $$.classArcs.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainPies = main\r\n          .select('.' + CLASS.chartArcs)\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .data($$.pie(targets))\r\n          .attr('class', function (d) {\r\n          return classChartArc(d) + classFocus(d.data);\r\n      });\r\n      mainPieEnter = mainPies\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartArc);\r\n      mainPieEnter.append('g').attr('class', classArcs);\r\n      mainPieEnter\r\n          .append('text')\r\n          .attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em')\r\n          .style('opacity', 0)\r\n          .style('text-anchor', 'middle')\r\n          .style('pointer-events', 'none');\r\n      // MEMO: can not keep same color..., but not bad to update color in redraw\r\n      //mainPieUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.initArc = function () {\r\n      var $$ = this;\r\n      $$.arcs = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n      $$.arcs\r\n          .append('text')\r\n          .attr('class', CLASS.chartArcsTitle)\r\n          .style('text-anchor', 'middle')\r\n          .text($$.getArcTitle());\r\n  };\r\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, main = $$.main, arcs, mainArc, arcLabelLines, mainArcLabelLine, hasGaugeType = $$.hasType('gauge');\r\n      arcs = main\r\n          .selectAll('.' + CLASS.arcs)\r\n          .selectAll('.' + CLASS.arc)\r\n          .data($$.arcData.bind($$));\r\n      mainArc = arcs\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArc.bind($$))\r\n          .style('fill', function (d) {\r\n          return $$.color(d.data);\r\n      })\r\n          .style('cursor', function (d) {\r\n          return config.interaction_enabled && config.data_selection_isselectable(d)\r\n              ? 'pointer'\r\n              : null;\r\n      })\r\n          .each(function (d) {\r\n          if ($$.isGaugeType(d.data)) {\r\n              d.startAngle = d.endAngle = config.gauge_startingAngle;\r\n          }\r\n          this._current = d;\r\n      })\r\n          .merge(arcs);\r\n      if (hasGaugeType) {\r\n          arcLabelLines = main\r\n              .selectAll('.' + CLASS.arcs)\r\n              .selectAll('.' + CLASS.arcLabelLine)\r\n              .data($$.arcData.bind($$));\r\n          mainArcLabelLine = arcLabelLines\r\n              .enter()\r\n              .append('rect')\r\n              .attr('class', function (d) {\r\n              return (CLASS.arcLabelLine +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  '-' +\r\n                  d.data.id);\r\n          })\r\n              .merge(arcLabelLines);\r\n          if ($$.filterTargetsToShow($$.data.targets).length === 1) {\r\n              mainArcLabelLine.style('display', 'none');\r\n          }\r\n          else {\r\n              mainArcLabelLine\r\n                  .style('fill', function (d) {\r\n                  return $$.levelColor\r\n                      ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                          return total + item.value;\r\n                      }, 0))\r\n                      : $$.color(d.data);\r\n              })\r\n                  .style('display', config.gauge_labelLine_show ? '' : 'none')\r\n                  .each(function (d) {\r\n                  var lineLength = 0, lineThickness = 2, x = 0, y = 0, transform = '';\r\n                  if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\r\n                      var updated = $$.updateAngle(d), innerLineLength = ($$.gaugeArcWidth /\r\n                          $$.filterTargetsToShow($$.data.targets).length) *\r\n                          (updated.index + 1), lineAngle = updated.endAngle - Math.PI / 2, arcInnerRadius = $$.radius - innerLineLength, linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\r\n                      lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\r\n                      x = Math.cos(linePositioningAngle) * arcInnerRadius;\r\n                      y = Math.sin(linePositioningAngle) * arcInnerRadius;\r\n                      transform =\r\n                          'rotate(' +\r\n                              (lineAngle * 180) / Math.PI +\r\n                              ', ' +\r\n                              x +\r\n                              ', ' +\r\n                              y +\r\n                              ')';\r\n                  }\r\n                  d3.select(this)\r\n                      .attr('x', x)\r\n                      .attr('y', y)\r\n                      .attr('width', lineLength)\r\n                      .attr('height', lineThickness)\r\n                      .attr('transform', transform)\r\n                      .style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\r\n              });\r\n          }\r\n      }\r\n      mainArc\r\n          .attr('transform', function (d) {\r\n          return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\r\n      })\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.expandArc(updated.data.id);\r\n                  $$.api.focus(updated.data.id);\r\n                  $$.toggleFocusLegend(updated.data.id, true);\r\n                  $$.config.data_onmouseover(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated = $$.updateAngle(d), arcData, selectedData;\r\n              if (updated) {\r\n                  (arcData = $$.convertToArcData(updated)),\r\n                      (selectedData = [arcData]);\r\n                  $$.showTooltip(selectedData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.unexpandArc(updated.data.id);\r\n                  $$.api.revert();\r\n                  $$.revertLegend();\r\n                  $$.hideTooltip();\r\n                  $$.config.data_onmouseout(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function (d, i) {\r\n              var updated = $$.updateAngle(d), arcData;\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  if ($$.toggleShape) {\r\n                      $$.toggleShape(this, arcData, i);\r\n                  }\r\n                  $$.config.data_onclick.call($$.api, arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .each(function () {\r\n          $$.transiting = true;\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .attrTween('d', function (d) {\r\n          var updated = $$.updateAngle(d), interpolate;\r\n          if (!updated) {\r\n              return function () {\r\n                  return 'M 0 0';\r\n              };\r\n          }\r\n          //                if (this._current === d) {\r\n          //                    this._current = {\r\n          //                        startAngle: Math.PI*2,\r\n          //                        endAngle: Math.PI*2,\r\n          //                    };\r\n          //                }\r\n          if (isNaN(this._current.startAngle)) {\r\n              this._current.startAngle = 0;\r\n          }\r\n          if (isNaN(this._current.endAngle)) {\r\n              this._current.endAngle = this._current.startAngle;\r\n          }\r\n          interpolate = d3.interpolate(this._current, updated);\r\n          this._current = interpolate(0);\r\n          return function (t) {\r\n              // prevents crashing the charts once in transition and chart.destroy() has been called\r\n              if ($$.config === null) {\r\n                  return 'M 0 0';\r\n              }\r\n              var interpolated = interpolate(t);\r\n              interpolated.data = d.data; // data.id will be updated by interporator\r\n              return $$.getArc(interpolated, true);\r\n          };\r\n      })\r\n          .attr('transform', withTransform ? 'scale(1)' : '')\r\n          .style('fill', function (d) {\r\n          return $$.levelColor\r\n              ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0))\r\n              : $$.color(d.data.id);\r\n      }) // Where gauge reading color would receive customization.\r\n          .call($$.endall, function () {\r\n          $$.transiting = false;\r\n      });\r\n      arcs\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      main\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .select('text')\r\n          .style('opacity', 0)\r\n          .attr('class', function (d) {\r\n          return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\r\n      })\r\n          .text($$.textForArcLabel.bind($$))\r\n          .attr('transform', $$.transformForArcLabel.bind($$))\r\n          .style('font-size', function (d) {\r\n          return $$.isGaugeType(d.data) &&\r\n              $$.filterTargetsToShow($$.data.targets).length === 1\r\n              ? Math.round($$.radius / 5) + 'px'\r\n              : '';\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', function (d) {\r\n          return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\r\n      });\r\n      main\r\n          .select('.' + CLASS.chartArcsTitle)\r\n          .style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\r\n      if (hasGaugeType) {\r\n          var index_1 = 0;\r\n          var backgroundArc = $$.arcs\r\n              .select('g.' + CLASS.chartArcsBackground)\r\n              .selectAll('path.' + CLASS.chartArcsBackground)\r\n              .data($$.data.targets);\r\n          backgroundArc\r\n              .enter()\r\n              .append('path')\r\n              .attr('class', function (d, i) {\r\n              return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\r\n          })\r\n              .merge(backgroundArc)\r\n              .attr('d', function (d1) {\r\n              if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\r\n                  return 'M 0 0';\r\n              }\r\n              var d = {\r\n                  data: [{ value: config.gauge_max }],\r\n                  startAngle: config.gauge_startingAngle,\r\n                  endAngle: -1 *\r\n                      config.gauge_startingAngle *\r\n                      (config.gauge_fullCircle ? Math.PI : 1),\r\n                  index: index_1++\r\n              };\r\n              return $$.getArc(d, true, true);\r\n          });\r\n          backgroundArc.exit().remove();\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeUnit)\r\n              .attr('dy', '.75em')\r\n              .text(config.gauge_label_show ? config.gauge_units : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMin)\r\n              .attr('dx', -1 *\r\n              ($$.innerRadius +\r\n                  ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_min, false)\r\n              : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMax)\r\n              .attr('dx', $$.innerRadius +\r\n              ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_max, true)\r\n              : '');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGauge = function () {\r\n      var arcs = this.arcs;\r\n      if (this.hasType('gauge')) {\r\n          arcs.append('g').attr('class', CLASS.chartArcsBackground);\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeUnit)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMin)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMax)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\r\n      return this.config.gauge_label_show ? 20 : 0;\r\n  };\n\n  /**\r\n   * Store value into cache\r\n   *\r\n   * @param key\r\n   * @param value\r\n   */\r\n  ChartInternal.prototype.addToCache = function (key, value) {\r\n      this.cache[\"$\" + key] = value;\r\n  };\r\n  /**\r\n   * Returns a cached value or undefined\r\n   *\r\n   * @param key\r\n   * @return {*}\r\n   */\r\n  ChartInternal.prototype.getFromCache = function (key) {\r\n      return this.cache[\"$\" + key];\r\n  };\r\n  /**\r\n   * Reset cached data\r\n   */\r\n  ChartInternal.prototype.resetCache = function () {\r\n      var _this = this;\r\n      Object.keys(this.cache)\r\n          .filter(function (key) { return /^\\$/.test(key); })\r\n          .forEach(function (key) {\r\n          delete _this.cache[key];\r\n      });\r\n  };\r\n  // Old API that stores Targets\r\n  ChartInternal.prototype.hasCaches = function (ids) {\r\n      for (var i = 0; i < ids.length; i++) {\r\n          if (!(ids[i] in this.cache)) {\r\n              return false;\r\n          }\r\n      }\r\n      return true;\r\n  };\r\n  ChartInternal.prototype.addCache = function (id, target) {\r\n      this.cache[id] = this.cloneTarget(target);\r\n  };\r\n  ChartInternal.prototype.getCaches = function (ids) {\r\n      var targets = [], i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] in this.cache) {\r\n              targets.push(this.cloneTarget(this.cache[ids[i]]));\r\n          }\r\n      }\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\r\n      var config = this.config;\r\n      return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\r\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\r\n      return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\r\n  };\r\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\r\n      return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\r\n  };\r\n  ChartInternal.prototype.classText = function (d) {\r\n      return this.generateClass(CLASS.text, d.index);\r\n  };\r\n  ChartInternal.prototype.classTexts = function (d) {\r\n      return this.generateClass(CLASS.texts, d.id);\r\n  };\r\n  ChartInternal.prototype.classShape = function (d) {\r\n      return this.generateClass(CLASS.shape, d.index);\r\n  };\r\n  ChartInternal.prototype.classShapes = function (d) {\r\n      return this.generateClass(CLASS.shapes, d.id);\r\n  };\r\n  ChartInternal.prototype.classLine = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.line, d.id);\r\n  };\r\n  ChartInternal.prototype.classLines = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\r\n  };\r\n  ChartInternal.prototype.classCircle = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\r\n  };\r\n  ChartInternal.prototype.classCircles = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\r\n  };\r\n  ChartInternal.prototype.classBar = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\r\n  };\r\n  ChartInternal.prototype.classBars = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\r\n  };\r\n  ChartInternal.prototype.classArc = function (d) {\r\n      return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArcs = function (d) {\r\n      return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArea = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.area, d.id);\r\n  };\r\n  ChartInternal.prototype.classAreas = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\r\n  };\r\n  ChartInternal.prototype.classRegion = function (d, i) {\r\n      return (this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : ''));\r\n  };\r\n  ChartInternal.prototype.classEvent = function (d) {\r\n      return this.generateClass(CLASS.eventRect, d.index);\r\n  };\r\n  ChartInternal.prototype.classTarget = function (id) {\r\n      var $$ = this;\r\n      var additionalClassSuffix = $$.config.data_classes[id], additionalClass = '';\r\n      if (additionalClassSuffix) {\r\n          additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\r\n      }\r\n      return $$.generateClass(CLASS.target, id) + additionalClass;\r\n  };\r\n  ChartInternal.prototype.classFocus = function (d) {\r\n      return this.classFocused(d) + this.classDefocused(d);\r\n  };\r\n  ChartInternal.prototype.classFocused = function (d) {\r\n      return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\r\n  };\r\n  ChartInternal.prototype.classDefocused = function (d) {\r\n      return (' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : ''));\r\n  };\r\n  ChartInternal.prototype.classChartText = function (d) {\r\n      return CLASS.chartText + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartLine = function (d) {\r\n      return CLASS.chartLine + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartBar = function (d) {\r\n      return CLASS.chartBar + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartArc = function (d) {\r\n      return CLASS.chartArc + this.classTarget(d.data.id);\r\n  };\r\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\r\n      var targetClass = this.generateTargetClass(targetId);\r\n      if (window.CSS && window.CSS.escape) {\r\n          return window.CSS.escape(targetClass);\r\n      }\r\n      // fallback on imperfect method for old browsers (does not handles unicode)\r\n      return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\r\n  };\r\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\r\n      return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\r\n      var $$ = this;\r\n      ids = ids || [];\r\n      return ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorTarget(id, prefix);\r\n          })\r\n          : null;\r\n  };\r\n  ChartInternal.prototype.selectorLegend = function (id) {\r\n      return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorLegends = function (ids) {\r\n      var $$ = this;\r\n      return ids && ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorLegend(id);\r\n          })\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\r\n      return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\r\n  };\r\n  ChartInternal.prototype.appendClip = function (parent, id) {\r\n      return parent\r\n          .append('clipPath')\r\n          .attr('id', id)\r\n          .append('rect');\r\n  };\r\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\r\n      // axis line width + padding for left\r\n      var left = Math.max(30, this.margin.left);\r\n      return forHorizontal ? -(1 + left) : -(left - 1);\r\n  };\r\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\r\n      return forHorizontal ? -20 : -this.margin.top;\r\n  };\r\n  ChartInternal.prototype.getXAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipX(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\r\n      var $$ = this, left = Math.max(30, $$.margin.left), right = Math.max(30, $$.margin.right);\r\n      // width + axis line width + padding for left/right\r\n      return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\r\n  };\r\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\r\n      // less than 20 is not enough to show the axis label 'outer' without legend\r\n      return ((forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipWidth(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return ($$.getAxisClipWidth($$.config.axis_rotated) +\r\n          ($$.config.axis_y_inner ? 20 : 0));\r\n  };\r\n  ChartInternal.prototype.getYAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight($$.config.axis_rotated);\r\n  };\n\n  ChartInternal.prototype.generateColor = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, colors = config.data_colors, pattern = notEmpty(config.color_pattern)\r\n          ? config.color_pattern\r\n          : d3.schemeCategory10, callback = config.data_color, ids = [];\r\n      return function (d) {\r\n          var id = d.id || (d.data && d.data.id) || d, color;\r\n          // if callback function is provided\r\n          if (colors[id] instanceof Function) {\r\n              color = colors[id](d);\r\n          }\r\n          // if specified, choose that color\r\n          else if (colors[id]) {\r\n              color = colors[id];\r\n          }\r\n          // if not specified, choose from pattern\r\n          else {\r\n              if (ids.indexOf(id) < 0) {\r\n                  ids.push(id);\r\n              }\r\n              color = pattern[ids.indexOf(id) % pattern.length];\r\n              colors[id] = color;\r\n          }\r\n          return callback instanceof Function ? callback(color, d) : color;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateLevelColor = function () {\r\n      var $$ = this, config = $$.config, colors = config.color_pattern, threshold = config.color_threshold, asValue = threshold.unit === 'value', values = threshold.values && threshold.values.length ? threshold.values : [], max = threshold.max || 100;\r\n      return notEmpty(threshold) && notEmpty(colors)\r\n          ? function (value) {\r\n              var i, v, color = colors[colors.length - 1];\r\n              for (i = 0; i < values.length; i++) {\r\n                  v = asValue ? value : (value * 100) / max;\r\n                  if (v < values[i]) {\r\n                      color = colors[i];\r\n                      break;\r\n                  }\r\n              }\r\n              return color;\r\n          }\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\r\n      var config = {\r\n          bindto: '#chart',\r\n          svg_classname: undefined,\r\n          size_width: undefined,\r\n          size_height: undefined,\r\n          padding_left: undefined,\r\n          padding_right: undefined,\r\n          padding_top: undefined,\r\n          padding_bottom: undefined,\r\n          resize_auto: true,\r\n          zoom_enabled: false,\r\n          zoom_initialRange: undefined,\r\n          zoom_type: 'scroll',\r\n          zoom_disableDefaultBehavior: false,\r\n          zoom_privileged: false,\r\n          zoom_rescale: false,\r\n          zoom_onzoom: function () { },\r\n          zoom_onzoomstart: function () { },\r\n          zoom_onzoomend: function () { },\r\n          zoom_x_min: undefined,\r\n          zoom_x_max: undefined,\r\n          interaction_brighten: true,\r\n          interaction_enabled: true,\r\n          onmouseover: function () { },\r\n          onmouseout: function () { },\r\n          onresize: function () { },\r\n          onresized: function () { },\r\n          oninit: function () { },\r\n          onrendered: function () { },\r\n          transition_duration: 350,\r\n          data_epochs: 'epochs',\r\n          data_x: undefined,\r\n          data_xs: {},\r\n          data_xFormat: '%Y-%m-%d',\r\n          data_xLocaltime: true,\r\n          data_xSort: true,\r\n          data_idConverter: function (id) {\r\n              return id;\r\n          },\r\n          data_names: {},\r\n          data_classes: {},\r\n          data_groups: [],\r\n          data_axes: {},\r\n          data_type: undefined,\r\n          data_types: {},\r\n          data_labels: {},\r\n          data_order: 'desc',\r\n          data_regions: {},\r\n          data_color: undefined,\r\n          data_colors: {},\r\n          data_hide: false,\r\n          data_filter: undefined,\r\n          data_selection_enabled: false,\r\n          data_selection_grouped: false,\r\n          data_selection_isselectable: function () {\r\n              return true;\r\n          },\r\n          data_selection_multiple: true,\r\n          data_selection_draggable: false,\r\n          data_stack_normalize: false,\r\n          data_onclick: function () { },\r\n          data_onmouseover: function () { },\r\n          data_onmouseout: function () { },\r\n          data_onselected: function () { },\r\n          data_onunselected: function () { },\r\n          data_url: undefined,\r\n          data_headers: undefined,\r\n          data_json: undefined,\r\n          data_rows: undefined,\r\n          data_columns: undefined,\r\n          data_mimeType: undefined,\r\n          data_keys: undefined,\r\n          // configuration for no plot-able data supplied.\r\n          data_empty_label_text: '',\r\n          // subchart\r\n          subchart_show: false,\r\n          subchart_size_height: 60,\r\n          subchart_axis_x_show: true,\r\n          subchart_onbrush: function () { },\r\n          // color\r\n          color_pattern: [],\r\n          color_threshold: {},\r\n          // legend\r\n          legend_show: true,\r\n          legend_hide: false,\r\n          legend_position: 'bottom',\r\n          legend_inset_anchor: 'top-left',\r\n          legend_inset_x: 10,\r\n          legend_inset_y: 0,\r\n          legend_inset_step: undefined,\r\n          legend_item_onclick: undefined,\r\n          legend_item_onmouseover: undefined,\r\n          legend_item_onmouseout: undefined,\r\n          legend_equally: false,\r\n          legend_padding: 0,\r\n          legend_item_tile_width: 10,\r\n          legend_item_tile_height: 10,\r\n          // axis\r\n          axis_rotated: false,\r\n          axis_x_show: true,\r\n          axis_x_type: 'indexed',\r\n          axis_x_localtime: true,\r\n          axis_x_categories: [],\r\n          axis_x_tick_centered: false,\r\n          axis_x_tick_format: undefined,\r\n          axis_x_tick_culling: {},\r\n          axis_x_tick_culling_max: 10,\r\n          axis_x_tick_count: undefined,\r\n          axis_x_tick_fit: true,\r\n          axis_x_tick_values: null,\r\n          axis_x_tick_rotate: 0,\r\n          axis_x_tick_outer: true,\r\n          axis_x_tick_multiline: true,\r\n          axis_x_tick_multilineMax: 0,\r\n          axis_x_tick_width: null,\r\n          axis_x_max: undefined,\r\n          axis_x_min: undefined,\r\n          axis_x_padding: {},\r\n          axis_x_height: undefined,\r\n          axis_x_selection: undefined,\r\n          axis_x_label: {},\r\n          axis_x_inner: undefined,\r\n          axis_y_show: true,\r\n          axis_y_type: 'linear',\r\n          axis_y_max: undefined,\r\n          axis_y_min: undefined,\r\n          axis_y_inverted: false,\r\n          axis_y_center: undefined,\r\n          axis_y_inner: undefined,\r\n          axis_y_label: {},\r\n          axis_y_tick_format: undefined,\r\n          axis_y_tick_outer: true,\r\n          axis_y_tick_values: null,\r\n          axis_y_tick_rotate: 0,\r\n          axis_y_tick_count: undefined,\r\n          axis_y_tick_time_type: undefined,\r\n          axis_y_tick_time_interval: undefined,\r\n          axis_y_padding: {},\r\n          axis_y_default: undefined,\r\n          axis_y2_show: false,\r\n          axis_y2_type: 'linear',\r\n          axis_y2_max: undefined,\r\n          axis_y2_min: undefined,\r\n          axis_y2_inverted: false,\r\n          axis_y2_center: undefined,\r\n          axis_y2_inner: undefined,\r\n          axis_y2_label: {},\r\n          axis_y2_tick_format: undefined,\r\n          axis_y2_tick_outer: true,\r\n          axis_y2_tick_values: null,\r\n          axis_y2_tick_count: undefined,\r\n          axis_y2_padding: {},\r\n          axis_y2_default: undefined,\r\n          // grid\r\n          grid_x_show: false,\r\n          grid_x_type: 'tick',\r\n          grid_x_lines: [],\r\n          grid_y_show: false,\r\n          // not used\r\n          // grid_y_type: 'tick',\r\n          grid_y_lines: [],\r\n          grid_y_ticks: 10,\r\n          grid_focus_show: true,\r\n          grid_lines_front: true,\r\n          // point - point of each data\r\n          point_show: true,\r\n          point_r: 2.5,\r\n          point_sensitivity: 10,\r\n          point_focus_expand_enabled: true,\r\n          point_focus_expand_r: undefined,\r\n          point_select_r: undefined,\r\n          // line\r\n          line_connectNull: false,\r\n          line_step_type: 'step',\r\n          // bar\r\n          bar_width: undefined,\r\n          bar_width_ratio: 0.6,\r\n          bar_width_max: undefined,\r\n          bar_zerobased: true,\r\n          bar_space: 0,\r\n          // area\r\n          area_zerobased: true,\r\n          area_above: false,\r\n          // pie\r\n          pie_label_show: true,\r\n          pie_label_format: undefined,\r\n          pie_label_threshold: 0.05,\r\n          pie_label_ratio: undefined,\r\n          pie_expand: {},\r\n          pie_expand_duration: 50,\r\n          pie_padAngle: 0,\r\n          // gauge\r\n          gauge_fullCircle: false,\r\n          gauge_label_show: true,\r\n          gauge_labelLine_show: true,\r\n          gauge_label_format: undefined,\r\n          gauge_min: 0,\r\n          gauge_max: 100,\r\n          gauge_startingAngle: (-1 * Math.PI) / 2,\r\n          gauge_label_extents: undefined,\r\n          gauge_units: undefined,\r\n          gauge_width: undefined,\r\n          gauge_arcs_minWidth: 5,\r\n          gauge_expand: {},\r\n          gauge_expand_duration: 50,\r\n          // donut\r\n          donut_label_show: true,\r\n          donut_label_format: undefined,\r\n          donut_label_threshold: 0.05,\r\n          donut_label_ratio: undefined,\r\n          donut_width: undefined,\r\n          donut_title: '',\r\n          donut_expand: {},\r\n          donut_expand_duration: 50,\r\n          donut_padAngle: 0,\r\n          // spline\r\n          spline_interpolation_type: 'cardinal',\r\n          // stanford\r\n          stanford_lines: [],\r\n          stanford_regions: [],\r\n          stanford_texts: [],\r\n          stanford_scaleMin: undefined,\r\n          stanford_scaleMax: undefined,\r\n          stanford_scaleWidth: undefined,\r\n          stanford_scaleFormat: undefined,\r\n          stanford_scaleValues: undefined,\r\n          stanford_colors: undefined,\r\n          stanford_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          // region - region to change style\r\n          regions: [],\r\n          // tooltip - show when mouseover on each data\r\n          tooltip_show: true,\r\n          tooltip_grouped: true,\r\n          tooltip_order: undefined,\r\n          tooltip_format_title: undefined,\r\n          tooltip_format_name: undefined,\r\n          tooltip_format_value: undefined,\r\n          tooltip_horizontal: undefined,\r\n          tooltip_position: undefined,\r\n          tooltip_contents: function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n              return this.getTooltipContent\r\n                  ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color)\r\n                  : '';\r\n          },\r\n          tooltip_init_show: false,\r\n          tooltip_init_x: 0,\r\n          tooltip_init_position: { top: '0px', left: '50px' },\r\n          tooltip_onshow: function () { },\r\n          tooltip_onhide: function () { },\r\n          // title\r\n          title_text: undefined,\r\n          title_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          title_position: 'top-center'\r\n      };\r\n      Object.keys(this.additionalConfig).forEach(function (key) {\r\n          config[key] = this.additionalConfig[key];\r\n      }, this);\r\n      return config;\r\n  };\r\n  ChartInternal.prototype.additionalConfig = {};\r\n  ChartInternal.prototype.loadConfig = function (config) {\r\n      var this_config = this.config, target, keys, read;\r\n      function find() {\r\n          var key = keys.shift();\r\n          //        console.log(\"key =>\", key, \", target =>\", target);\r\n          if (key && target && typeof target === 'object' && key in target) {\r\n              target = target[key];\r\n              return find();\r\n          }\r\n          else if (!key) {\r\n              return target;\r\n          }\r\n          else {\r\n              return undefined;\r\n          }\r\n      }\r\n      Object.keys(this_config).forEach(function (key) {\r\n          target = config;\r\n          keys = key.split('_');\r\n          read = find();\r\n          //        console.log(\"CONFIG : \", key, read);\r\n          if (isDefined(read)) {\r\n              this_config[key] = read;\r\n          }\r\n      });\r\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\r\n      var $$ = this, type = mimeType ? mimeType : 'csv', f, converter;\r\n      if (type === 'json') {\r\n          f = $$.d3.json;\r\n          converter = $$.convertJsonToData;\r\n      }\r\n      else if (type === 'tsv') {\r\n          f = $$.d3.tsv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      else {\r\n          f = $$.d3.csv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      f(url, headers)\r\n          .then(function (data) {\r\n          done.call($$, converter.call($$, data, keys));\r\n      })\r\n          .catch(function (error) {\r\n          throw error;\r\n      });\r\n  };\r\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\r\n      var keys = xsv.columns, rows = xsv;\r\n      if (rows.length === 0) {\r\n          return {\r\n              keys: keys,\r\n              rows: [keys.reduce(function (row, key) {\r\n                      var _a;\r\n                      return Object.assign(row, (_a = {}, _a[key] = null, _a));\r\n                  }, {})]\r\n          };\r\n      }\r\n      else {\r\n          // [].concat() is to convert result into a plain array otherwise\r\n          // test is not happy because rows have properties.\r\n          return { keys: keys, rows: [].concat(xsv) };\r\n      }\r\n  };\r\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\r\n      var $$ = this, new_rows = [], targetKeys, data;\r\n      if (keys) {\r\n          // when keys specified, json would be an array that includes objects\r\n          if (keys.x) {\r\n              targetKeys = keys.value.concat(keys.x);\r\n              $$.config.data_x = keys.x;\r\n          }\r\n          else {\r\n              targetKeys = keys.value;\r\n          }\r\n          new_rows.push(targetKeys);\r\n          json.forEach(function (o) {\r\n              var new_row = [];\r\n              targetKeys.forEach(function (key) {\r\n                  // convert undefined to null because undefined data will be removed in convertDataToTargets()\r\n                  var v = $$.findValueInJson(o, key);\r\n                  if (isUndefined(v)) {\r\n                      v = null;\r\n                  }\r\n                  new_row.push(v);\r\n              });\r\n              new_rows.push(new_row);\r\n          });\r\n          data = $$.convertRowsToData(new_rows);\r\n      }\r\n      else {\r\n          Object.keys(json).forEach(function (key) {\r\n              new_rows.push([key].concat(json[key]));\r\n          });\r\n          data = $$.convertColumnsToData(new_rows);\r\n      }\r\n      return data;\r\n  };\r\n  /**\r\n   * Finds value from the given nested object by the given path.\r\n   * If it's not found, then this returns undefined.\r\n   * @param {Object} object the object\r\n   * @param {string} path the path\r\n   */\r\n  ChartInternal.prototype.findValueInJson = function (object, path) {\r\n      if (path in object) {\r\n          // If object has a key that contains . or [], return the key's value\r\n          // instead of searching for an inner object.\r\n          // See https://github.com/c3js/c3/issues/1691 for details.\r\n          return object[path];\r\n      }\r\n      path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\r\n      path = path.replace(/^\\./, ''); // strip a leading dot\r\n      var pathArray = path.split('.');\r\n      for (var i = 0; i < pathArray.length; ++i) {\r\n          var k = pathArray[i];\r\n          if (k in object) {\r\n              object = object[k];\r\n          }\r\n          else {\r\n              return;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n  /**\r\n   * Converts the rows to normalized data.\r\n   * @param {any[][]} rows The row data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertRowsToData = function (rows) {\r\n      var newRows = [];\r\n      var keys = rows[0];\r\n      for (var i = 1; i < rows.length; i++) {\r\n          var newRow = {};\r\n          for (var j = 0; j < rows[i].length; j++) {\r\n              if (isUndefined(rows[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRow[keys[j]] = rows[i][j];\r\n          }\r\n          newRows.push(newRow);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the columns to normalized data.\r\n   * @param {any[][]} columns The column data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\r\n      var newRows = [];\r\n      var keys = [];\r\n      for (var i = 0; i < columns.length; i++) {\r\n          var key = columns[i][0];\r\n          for (var j = 1; j < columns[i].length; j++) {\r\n              if (isUndefined(newRows[j - 1])) {\r\n                  newRows[j - 1] = {};\r\n              }\r\n              if (isUndefined(columns[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRows[j - 1][key] = columns[i][j];\r\n          }\r\n          keys.push(key);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the data format into the target format.\r\n   * @param {!Object} data\r\n   * @param {!Array} data.keys Ordered list of target IDs.\r\n   * @param {!Array} data.rows Rows of data to convert.\r\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\r\n   * @return {!Array}\r\n   */\r\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\r\n      var $$ = this, config = $$.config, targets, ids, xs, keys, epochs;\r\n      // handles format where keys are not orderly provided\r\n      if (isArray(data)) {\r\n          keys = Object.keys(data[0]);\r\n      }\r\n      else {\r\n          keys = data.keys;\r\n          data = data.rows;\r\n      }\r\n      xs = keys.filter($$.isX, $$);\r\n      if (!$$.isStanfordGraphType()) {\r\n          ids = keys.filter($$.isNotX, $$);\r\n      }\r\n      else {\r\n          epochs = keys.filter($$.isEpochs, $$);\r\n          ids = keys.filter($$.isNotXAndNotEpochs, $$);\r\n          if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\r\n              throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\r\n          }\r\n      }\r\n      // save x for update data by load when custom x and c3.x API\r\n      ids.forEach(function (id) {\r\n          var xKey = $$.getXKey(id);\r\n          if ($$.isCustomX() || $$.isTimeSeries()) {\r\n              // if included in input data\r\n              if (xs.indexOf(xKey) >= 0) {\r\n                  $$.data.xs[id] = (appendXs && $$.data.xs[id]\r\n                      ? $$.data.xs[id]\r\n                      : []).concat(data\r\n                      .map(function (d) {\r\n                      return d[xKey];\r\n                  })\r\n                      .filter(isValue)\r\n                      .map(function (rawX, i) {\r\n                      return $$.generateTargetX(rawX, id, i);\r\n                  }));\r\n              }\r\n              // if not included in input data, find from preloaded data of other id's x\r\n              else if (config.data_x) {\r\n                  $$.data.xs[id] = $$.getOtherTargetXs();\r\n              }\r\n              // if not included in input data, find from preloaded data\r\n              else if (notEmpty(config.data_xs)) {\r\n                  $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\r\n              }\r\n              // MEMO: if no x included, use same x of current will be used\r\n          }\r\n          else {\r\n              $$.data.xs[id] = data.map(function (d, i) {\r\n                  return i;\r\n              });\r\n          }\r\n      });\r\n      // check x is defined\r\n      ids.forEach(function (id) {\r\n          if (!$$.data.xs[id]) {\r\n              throw new Error('x is not defined for id = \"' + id + '\".');\r\n          }\r\n      });\r\n      // convert to target\r\n      targets = ids.map(function (id, index) {\r\n          var convertedId = config.data_idConverter(id);\r\n          return {\r\n              id: convertedId,\r\n              id_org: id,\r\n              values: data\r\n                  .map(function (d, i) {\r\n                  var xKey = $$.getXKey(id), rawX = d[xKey], value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null, x, returnData;\r\n                  // use x as categories if custom x and categorized\r\n                  if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\r\n                      if (index === 0 && i === 0) {\r\n                          config.axis_x_categories = [];\r\n                      }\r\n                      x = config.axis_x_categories.indexOf(rawX);\r\n                      if (x === -1) {\r\n                          x = config.axis_x_categories.length;\r\n                          config.axis_x_categories.push(rawX);\r\n                      }\r\n                  }\r\n                  else {\r\n                      x = $$.generateTargetX(rawX, id, i);\r\n                  }\r\n                  // mark as x = undefined if value is undefined and filter to remove after mapped\r\n                  if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\r\n                      x = undefined;\r\n                  }\r\n                  returnData = { x: x, value: value, id: convertedId };\r\n                  if ($$.isStanfordGraphType()) {\r\n                      returnData.epochs = d[epochs];\r\n                  }\r\n                  return returnData;\r\n              })\r\n                  .filter(function (v) {\r\n                  return isDefined(v.x);\r\n              })\r\n          };\r\n      });\r\n      // finish targets\r\n      targets.forEach(function (t) {\r\n          var i;\r\n          // sort values by its x\r\n          if (config.data_xSort) {\r\n              t.values = t.values.sort(function (v1, v2) {\r\n                  var x1 = v1.x || v1.x === 0 ? v1.x : Infinity, x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\r\n                  return x1 - x2;\r\n              });\r\n          }\r\n          // indexing each value\r\n          i = 0;\r\n          t.values.forEach(function (v) {\r\n              v.index = i++;\r\n          });\r\n          // this needs to be sorted because its index and value.index is identical\r\n          $$.data.xs[t.id].sort(function (v1, v2) {\r\n              return v1 - v2;\r\n          });\r\n      });\r\n      // cache information about values\r\n      $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n      $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n      // set target types\r\n      if (config.data_type) {\r\n          $$.setTargetType($$.mapToIds(targets).filter(function (id) {\r\n              return !(id in config.data_types);\r\n          }), config.data_type);\r\n      }\r\n      // cache as original id keyed\r\n      targets.forEach(function (d) {\r\n          $$.addCache(d.id_org, d);\r\n      });\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_epochs && key === config.data_epochs;\r\n  };\r\n  ChartInternal.prototype.isX = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return ((config.data_x && key === config.data_x) ||\r\n          (notEmpty(config.data_xs) && hasValue(config.data_xs, key)));\r\n  };\r\n  ChartInternal.prototype.isNotX = function (key) {\r\n      return !this.isX(key);\r\n  };\r\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\r\n      return !this.isX(key) && !this.isEpochs(key);\r\n  };\r\n  /**\r\n   * Returns whether the normalized stack option is enabled or not.\r\n   *\r\n   * To be enabled it must also have data.groups defined.\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isStackNormalized = function () {\r\n      return this.config.data_stack_normalize && this.config.data_groups.length > 0;\r\n  };\r\n  /**\r\n   * Returns whether the axis is normalized or not.\r\n   *\r\n   * An axis is normalized as long as one of its associated target\r\n   * is normalized.\r\n   *\r\n   * @param axisId Axis ID (y or y2)\r\n   * @return {Boolean}\r\n   */\r\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          // shortcut\r\n          return false;\r\n      }\r\n      return $$.data.targets\r\n          .filter(function (target) { return $$.axis.getId(target.id) === axisId; })\r\n          .some(function (target) { return $$.isTargetNormalized(target.id); });\r\n  };\r\n  /**\r\n   * Returns whether the values for this target ID is normalized or not.\r\n   *\r\n   * To be normalized the option needs to be enabled and target needs\r\n   * to be defined in `data.groups`.\r\n   *\r\n   * @param targetId ID of the target\r\n   * @return {Boolean} True if the target is normalized, false otherwise.\r\n   */\r\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\r\n      var $$ = this;\r\n      return ($$.isStackNormalized() &&\r\n          $$.config.data_groups.some(function (group) { return group.includes(targetId); }));\r\n  };\r\n  ChartInternal.prototype.getXKey = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_x\r\n          ? config.data_x\r\n          : notEmpty(config.data_xs)\r\n              ? config.data_xs[id]\r\n              : null;\r\n  };\r\n  /**\r\n   * Get sum of visible data per index for given axis.\r\n   *\r\n   * Expect axisId to be either 'y' or 'y2'.\r\n   *\r\n   * @private\r\n   * @param axisId Compute sum for data associated to given axis.\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          return null;\r\n      }\r\n      var cached = $$.getFromCache('getTotalPerIndex');\r\n      if (cached !== undefined) {\r\n          return cached[axisId];\r\n      }\r\n      var sum = { y: [], y2: [] };\r\n      $$.data.targets\r\n          // keep only target that are normalized\r\n          .filter(function (target) { return $$.isTargetNormalized(target.id); })\r\n          // keep only target that are visible\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          // compute sum per axis\r\n          .forEach(function (target) {\r\n          var sumByAxis = sum[$$.axis.getId(target.id)];\r\n          target.values.forEach(function (v, i) {\r\n              if (!sumByAxis[i]) {\r\n                  sumByAxis[i] = 0;\r\n              }\r\n              sumByAxis[i] += isNumber(v.value) ? v.value : 0;\r\n          });\r\n      });\r\n      $$.addToCache('getTotalPerIndex', sum);\r\n      return sum[axisId];\r\n  };\r\n  /**\r\n   * Get sum of visible data.\r\n   *\r\n   * Should be used for normalised data only since all values\r\n   * are expected to be positive.\r\n   *\r\n   * @private\r\n   * @return {Number}\r\n   */\r\n  ChartInternal.prototype.getTotalDataSum = function () {\r\n      var $$ = this;\r\n      var cached = $$.getFromCache('getTotalDataSum');\r\n      if (cached !== undefined) {\r\n          return cached;\r\n      }\r\n      var totalDataSum = flattenArray($$.data.targets\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          .map(function (target) { return target.values; }))\r\n          .map(function (d) { return d.value; })\r\n          .reduce(function (p, c) { return p + c; }, 0);\r\n      $$.addToCache('getTotalDataSum', totalDataSum);\r\n      return totalDataSum;\r\n  };\r\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\r\n      var $$ = this, xValues, ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\r\n      ids.forEach(function (id) {\r\n          if ($$.getXKey(id) === key) {\r\n              xValues = $$.data.xs[id];\r\n          }\r\n      });\r\n      return xValues;\r\n  };\r\n  ChartInternal.prototype.getXValue = function (id, i) {\r\n      var $$ = this;\r\n      return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i])\r\n          ? $$.data.xs[id][i]\r\n          : i;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetXs = function () {\r\n      var $$ = this, idsForX = Object.keys($$.data.xs);\r\n      return idsForX.length ? $$.data.xs[idsForX[0]] : null;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetX = function (index) {\r\n      var xs = this.getOtherTargetXs();\r\n      return xs && index < xs.length ? xs[index] : null;\r\n  };\r\n  ChartInternal.prototype.addXs = function (xs) {\r\n      var $$ = this;\r\n      Object.keys(xs).forEach(function (id) {\r\n          $$.config.data_xs[id] = xs[id];\r\n      });\r\n  };\r\n  ChartInternal.prototype.addName = function (data) {\r\n      var $$ = this, name;\r\n      if (data) {\r\n          name = $$.config.data_names[data.id];\r\n          data.name = name !== undefined ? name : data.id;\r\n      }\r\n      return data;\r\n  };\r\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\r\n      var valueOnIndex = values.filter(function (v) {\r\n          return v.index === index;\r\n      });\r\n      return valueOnIndex.length ? valueOnIndex[0] : null;\r\n  };\r\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (v, i) {\r\n              v.x = $$.generateTargetX(x[i], t.id, i);\r\n          });\r\n          $$.data.xs[t.id] = x;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          if (xs[t.id]) {\r\n              $$.updateTargetX([t], xs[t.id]);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\r\n      var $$ = this, x;\r\n      if ($$.isTimeSeries()) {\r\n          x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\r\n      }\r\n      else if ($$.isCustomX() && !$$.isCategorized()) {\r\n          x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\r\n      }\r\n      else {\r\n          x = index;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.cloneTarget = function (target) {\r\n      return {\r\n          id: target.id,\r\n          id_org: target.id_org,\r\n          values: target.values.map(function (d) {\r\n              return {\r\n                  x: d.x,\r\n                  value: d.value,\r\n                  id: d.id\r\n              };\r\n          })\r\n      };\r\n  };\r\n  ChartInternal.prototype.getMaxDataCount = function () {\r\n      var $$ = this;\r\n      return $$.d3.max($$.data.targets, function (t) {\r\n          return t.values.length;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToIds = function (targets) {\r\n      return targets.map(function (d) {\r\n          return d.id;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\r\n      var $$ = this;\r\n      return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.hasTarget = function (targets, id) {\r\n      var ids = this.mapToIds(targets), i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] === id) {\r\n              return true;\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\r\n      return this.hiddenTargetIds.indexOf(targetId) < 0;\r\n  };\r\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\r\n      return this.hiddenLegendIds.indexOf(targetId) < 0;\r\n  };\r\n  /**\r\n   * Returns only visible targets.\r\n   *\r\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\r\n   *\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTargetsToShow = function () {\r\n      var $$ = this;\r\n      return $$.filterTargetsToShow($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\r\n      var $$ = this;\r\n      return targets.filter(function (t) {\r\n          return $$.isTargetToShow(t.id);\r\n      });\r\n  };\r\n  /**\r\n   * @return {Array} Returns all the targets attached to the chart, visible or not\r\n   */\r\n  ChartInternal.prototype.getTargets = function () {\r\n      var $$ = this;\r\n      return $$.data.targets;\r\n  };\r\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\r\n      var $$ = this;\r\n      var xs = $$.d3\r\n          .set($$.d3.merge(targets.map(function (t) {\r\n          return t.values.map(function (v) {\r\n              return +v.x;\r\n          });\r\n      })))\r\n          .values();\r\n      xs = $$.isTimeSeries()\r\n          ? xs.map(function (x) {\r\n              return new Date(+x);\r\n          })\r\n          : xs.map(function (x) {\r\n              return +x;\r\n          });\r\n      return xs.sort(function (a, b) {\r\n          return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\r\n      });\r\n  };\r\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\r\n      this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\r\n      this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\r\n      var ys = {};\r\n      targets.forEach(function (t) {\r\n          ys[t.id] = [];\r\n          t.values.forEach(function (v) {\r\n              ys[t.id].push(v.value);\r\n          });\r\n      });\r\n      return ys;\r\n  };\r\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\r\n      var ids = Object.keys(targets), i, j, values;\r\n      for (i = 0; i < ids.length; i++) {\r\n          values = targets[ids[i]].values;\r\n          for (j = 0; j < values.length; j++) {\r\n              if (checker(values[j].value)) {\r\n                  return true;\r\n              }\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v > 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.isOrderDesc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'desc');\r\n  };\r\n  ChartInternal.prototype.isOrderAsc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'asc');\r\n  };\r\n  ChartInternal.prototype.getOrderFunction = function () {\r\n      var $$ = this, config = $$.config, orderAsc = $$.isOrderAsc(), orderDesc = $$.isOrderDesc();\r\n      if (orderAsc || orderDesc) {\r\n          var reducer = function (p, c) {\r\n              return p + Math.abs(c.value);\r\n          };\r\n          return function (t1, t2) {\r\n              var t1Sum = t1.values.reduce(reducer, 0), t2Sum = t2.values.reduce(reducer, 0);\r\n              return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\r\n          };\r\n      }\r\n      else if (isFunction(config.data_order)) {\r\n          return config.data_order;\r\n      }\r\n      else if (isArray(config.data_order)) {\r\n          var order = config.data_order;\r\n          return function (t1, t2) {\r\n              return order.indexOf(t1.id) - order.indexOf(t2.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.orderTargets = function (targets) {\r\n      var fct = this.getOrderFunction();\r\n      if (fct) {\r\n          targets.sort(fct);\r\n      }\r\n      return targets;\r\n  };\r\n  /**\r\n   * Returns all the values from the given targets at the given index.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\r\n      return this.d3.merge(targets.map(function (t) { return t.values.filter(function (v) { return v.index === index; }); }));\r\n  };\r\n  ChartInternal.prototype.filterByX = function (targets, x) {\r\n      return this.d3\r\n          .merge(targets.map(function (t) {\r\n          return t.values;\r\n      }))\r\n          .filter(function (v) {\r\n          return v.x - x === 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterRemoveNull = function (data) {\r\n      return data.filter(function (d) {\r\n          return isValue(d.value);\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\r\n      return targets.map(function (t) {\r\n          return {\r\n              id: t.id,\r\n              id_org: t.id_org,\r\n              values: t.values.filter(function (v) {\r\n                  return xDomain[0] <= v.x && v.x <= xDomain[1];\r\n              })\r\n          };\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasDataLabel = function () {\r\n      var config = this.config;\r\n      if (typeof config.data_labels === 'boolean' && config.data_labels) {\r\n          return true;\r\n      }\r\n      else if (typeof config.data_labels === 'object' &&\r\n          notEmpty(config.data_labels)) {\r\n          return true;\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\r\n      var $$ = this, lengths = [0, 0], paddingCoef = 1.3;\r\n      $$.selectChart\r\n          .select('svg')\r\n          .selectAll('.dummy')\r\n          .data([min, max])\r\n          .enter()\r\n          .append('text')\r\n          .text(function (d) {\r\n          return $$.dataLabelFormat(d.id)(d);\r\n      })\r\n          .each(function (d, i) {\r\n          lengths[i] = getBBox(this)[key] * paddingCoef;\r\n      })\r\n          .remove();\r\n      return lengths;\r\n  };\r\n  /**\r\n   * Returns true if the given data point is not arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isNoneArc = function (d) {\r\n      return this.hasTarget(this.data.targets, d.id);\r\n  };\r\n  /**\r\n   * Returns true if the given data point is arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isArc = function (d) {\r\n      return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\r\n  };\r\n  /**\r\n   * Find the closest point from the given pos among the given targets or\r\n   * undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\r\n      var $$ = this;\r\n      // for each target, find the closest point\r\n      var candidates = targets\r\n          .map(function (t) {\r\n          return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal\r\n              ? $$.horizontalDistance.bind($$)\r\n              : $$.dist.bind($$), $$.config.point_sensitivity);\r\n      })\r\n          .filter(function (v) { return v; });\r\n      // returns the closest of candidates\r\n      if (candidates.length === 0) {\r\n          return undefined;\r\n      }\r\n      else if (candidates.length === 1) {\r\n          return candidates[0];\r\n      }\r\n      else {\r\n          return $$.findClosest(candidates, pos, $$.dist.bind($$));\r\n      }\r\n  };\r\n  /**\r\n   * Find the closest point from the x value or undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} x A value on X axis\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\r\n      var closest;\r\n      var diff;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (d) {\r\n              var newDiff = Math.abs(x - d.x);\r\n              if (diff === undefined || newDiff < diff) {\r\n                  closest = d;\r\n                  diff = newDiff;\r\n              }\r\n          });\r\n      });\r\n      return closest;\r\n  };\r\n  /**\r\n   * Using given compute distance method, returns the closest data point from the\r\n   * given position.\r\n   *\r\n   * Giving optionally a minimum distance to satisfy.\r\n   *\r\n   * @param {Array} dataPoints List of DataPoints\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @param {Function} computeDist Function to compute distance between 2 points\r\n   * @param {Number} minDist Minimal distance to satisfy\r\n   * @return {Object|undefined} Closest data point\r\n   */\r\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist, minDist) {\r\n      if (minDist === void 0) { minDist = Infinity; }\r\n      var $$ = this;\r\n      var closest;\r\n      // find closest bar\r\n      dataPoints\r\n          .filter(function (v) { return v && $$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          if (!closest) {\r\n              var shape = $$.main\r\n                  .select('.' +\r\n                  CLASS.bars +\r\n                  $$.getTargetSelectorSuffix(v.id) +\r\n                  ' .' +\r\n                  CLASS.bar +\r\n                  '-' +\r\n                  v.index)\r\n                  .node();\r\n              if ($$.isWithinBar(pos, shape)) {\r\n                  closest = v;\r\n              }\r\n          }\r\n      });\r\n      // find closest point from non-bar\r\n      dataPoints\r\n          .filter(function (v) { return v && !$$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          var d = computeDist(v, pos);\r\n          if (d < minDist) {\r\n              minDist = d;\r\n              closest = v;\r\n          }\r\n      });\r\n      return closest;\r\n  };\r\n  ChartInternal.prototype.dist = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, yIndex = config.axis_rotated ? 0 : 1, y = $$.circleY(data, data.index), x = $$.x(data.x);\r\n      return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\r\n  };\r\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, x = $$.x(data.x);\r\n      return Math.abs(x - pos[xIndex]);\r\n  };\r\n  ChartInternal.prototype.convertValuesToStep = function (values) {\r\n      var converted = [].concat(values), i;\r\n      if (!this.isCategorized()) {\r\n          return values;\r\n      }\r\n      for (i = values.length + 1; 0 < i; i--) {\r\n          converted[i] = converted[i - 1];\r\n      }\r\n      converted[0] = {\r\n          x: converted[0].x - 1,\r\n          value: converted[0].value,\r\n          id: converted[0].id\r\n      };\r\n      converted[values.length + 1] = {\r\n          x: converted[values.length].x + 1,\r\n          value: converted[values.length].value,\r\n          id: converted[values.length].id\r\n      };\r\n      return converted;\r\n  };\r\n  /**\r\n   * Get ratio value\r\n   *\r\n   * @param {String} type Ratio for given type\r\n   * @param {Object} d Data value object\r\n   * @param {Boolean} asPercent Convert the return as percent or not\r\n   * @return {Number} Ratio value\r\n   * @private\r\n   */\r\n  ChartInternal.prototype.getRatio = function (type, d, asPercent) {\r\n      if (asPercent === void 0) { asPercent = false; }\r\n      var $$ = this;\r\n      var api = $$.api;\r\n      var ratio = 0;\r\n      if (d && api.data.shown.call(api).length) {\r\n          ratio = d.ratio || d.value;\r\n          if (type === 'arc') {\r\n              if ($$.hasType('gauge')) {\r\n                  ratio =\r\n                      (d.endAngle - d.startAngle) /\r\n                          (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\r\n              }\r\n              else {\r\n                  var total = $$.getTotalDataSum();\r\n                  ratio = d.value / total;\r\n              }\r\n          }\r\n          else if (type === 'index') {\r\n              var total = $$.getTotalPerIndex($$.axis.getId(d.id));\r\n              d.ratio =\r\n                  isNumber(d.value) && total && total[d.index] > 0\r\n                      ? d.value / total[d.index]\r\n                      : 0;\r\n              ratio = d.ratio;\r\n          }\r\n      }\r\n      return asPercent && ratio ? ratio * 100 : ratio;\r\n  };\r\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\r\n      var $$ = this, config = $$.config, current = config['data_' + name];\r\n      if (typeof attrs === 'undefined') {\r\n          return current;\r\n      }\r\n      Object.keys(attrs).forEach(function (id) {\r\n          current[id] = attrs[id];\r\n      });\r\n      $$.redraw({\r\n          withLegend: true\r\n      });\r\n      return current;\r\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\r\n      var $$ = this;\r\n      if (targets) {\r\n          // filter loading targets if needed\r\n          if (args.filter) {\r\n              targets = targets.filter(args.filter);\r\n          }\r\n          // set type if args.types || args.type specified\r\n          if (args.type || args.types) {\r\n              targets.forEach(function (t) {\r\n                  var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\r\n                  $$.setTargetType(t.id, type);\r\n              });\r\n          }\r\n          // Update/Add data\r\n          $$.data.targets.forEach(function (d) {\r\n              for (var i = 0; i < targets.length; i++) {\r\n                  if (d.id === targets[i].id) {\r\n                      d.values = targets[i].values;\r\n                      targets.splice(i, 1);\r\n                      break;\r\n                  }\r\n              }\r\n          });\r\n          $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n      if (args.done) {\r\n          args.done();\r\n      }\r\n  };\r\n  ChartInternal.prototype.loadFromArgs = function (args) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (args.data) {\r\n          $$.load($$.convertDataToTargets(args.data), args);\r\n      }\r\n      else if (args.url) {\r\n          $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\r\n              $$.load($$.convertDataToTargets(data), args);\r\n          });\r\n      }\r\n      else if (args.json) {\r\n          $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\r\n      }\r\n      else if (args.rows) {\r\n          $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\r\n      }\r\n      else if (args.columns) {\r\n          $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\r\n      }\r\n      else {\r\n          $$.load(null, args);\r\n      }\r\n  };\r\n  ChartInternal.prototype.unload = function (targetIds, done) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (!done) {\r\n          done = function () { };\r\n      }\r\n      // filter existing target\r\n      targetIds = targetIds.filter(function (id) {\r\n          return $$.hasTarget($$.data.targets, id);\r\n      });\r\n      // If no target, call done and return\r\n      if (!targetIds || targetIds.length === 0) {\r\n          done();\r\n          return;\r\n      }\r\n      $$.svg\r\n          .selectAll(targetIds.map(function (id) {\r\n          return $$.selectorTarget(id);\r\n      }))\r\n          .transition()\r\n          .style('opacity', 0)\r\n          .remove()\r\n          .call($$.endall, done);\r\n      targetIds.forEach(function (id) {\r\n          // Reset fadein for future load\r\n          $$.withoutFadeIn[id] = false;\r\n          // Remove target's elements\r\n          if ($$.legend) {\r\n              $$.legend\r\n                  .selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id))\r\n                  .remove();\r\n          }\r\n          // Remove target\r\n          $$.data.targets = $$.data.targets.filter(function (t) {\r\n              return t.id !== id;\r\n          });\r\n      });\r\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasNegativeValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider negative values\r\n              if (hasNegativeValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v < 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute min\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasNegativeValue && +v > 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.min(Object.keys(ys).map(function (key) {\r\n          return $$.d3.min(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasPositiveValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider positive values\r\n              if (hasPositiveValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v > 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute max\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasPositiveValue && +v < 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.max(Object.keys(ys).map(function (key) {\r\n          return $$.d3.max(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isAxisNormalized(axisId)) {\r\n          return [0, 100];\r\n      }\r\n      var targetsByAxisId = targets.filter(function (t) {\r\n          return $$.axis.getId(t.id) === axisId;\r\n      }), yTargets = xDomain\r\n          ? $$.filterByXDomain(targetsByAxisId, xDomain)\r\n          : targetsByAxisId, yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min, yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max, yDomainMin = $$.getYDomainMin(yTargets), yDomainMax = $$.getYDomainMax(yTargets), domain, domainLength, padding_top, padding_bottom, center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center, yDomainAbs, lengths, diff, ratio, isAllPositive, isAllNegative, isZeroBased = ($$.hasType('bar', yTargets) && config.bar_zerobased) ||\r\n          ($$.hasType('area', yTargets) && config.area_zerobased), isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted, showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated, showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated;\r\n      // MEMO: avoid inverting domain unexpectedly\r\n      yDomainMin = isValue(yMin)\r\n          ? yMin\r\n          : isValue(yMax)\r\n              ? yDomainMin < yMax\r\n                  ? yDomainMin\r\n                  : yMax - 10\r\n              : yDomainMin;\r\n      yDomainMax = isValue(yMax)\r\n          ? yMax\r\n          : isValue(yMin)\r\n              ? yMin < yDomainMax\r\n                  ? yDomainMax\r\n                  : yMin + 10\r\n              : yDomainMax;\r\n      if (yTargets.length === 0) {\r\n          // use current domain if target of axisId is none\r\n          return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\r\n      }\r\n      if (isNaN(yDomainMin)) {\r\n          // set minimum to zero when not number\r\n          yDomainMin = 0;\r\n      }\r\n      if (isNaN(yDomainMax)) {\r\n          // set maximum to have same value as yDomainMin\r\n          yDomainMax = yDomainMin;\r\n      }\r\n      if (yDomainMin === yDomainMax) {\r\n          yDomainMin < 0 ? (yDomainMax = 0) : (yDomainMin = 0);\r\n      }\r\n      isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\r\n      isAllNegative = yDomainMin <= 0 && yDomainMax <= 0;\r\n      // Cancel zerobased if axis_*_min / axis_*_max specified\r\n      if ((isValue(yMin) && isAllPositive) || (isValue(yMax) && isAllNegative)) {\r\n          isZeroBased = false;\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              yDomainMin = 0;\r\n          }\r\n          if (isAllNegative) {\r\n              yDomainMax = 0;\r\n          }\r\n      }\r\n      domainLength = Math.abs(yDomainMax - yDomainMin);\r\n      padding_top = padding_bottom = domainLength * 0.1;\r\n      if (typeof center !== 'undefined') {\r\n          yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\r\n          yDomainMax = center + yDomainAbs;\r\n          yDomainMin = center - yDomainAbs;\r\n      }\r\n      // add padding for data label\r\n      if (showHorizontalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\r\n          diff = diffDomain($$.y.range());\r\n          ratio = [lengths[0] / diff, lengths[1] / diff];\r\n          padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\r\n          padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\r\n      }\r\n      else if (showVerticalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\r\n          var pixelsToAxisPadding = $$.getY(config[\"axis_\" + axisId + \"_type\"], \r\n          // input domain as pixels\r\n          [0, config.axis_rotated ? $$.width : $$.height], \r\n          // output range as axis padding\r\n          [0, domainLength]);\r\n          padding_top += pixelsToAxisPadding(lengths[1]);\r\n          padding_bottom += pixelsToAxisPadding(lengths[0]);\r\n      }\r\n      if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              padding_bottom = yDomainMin;\r\n          }\r\n          if (isAllNegative) {\r\n              padding_top = -yDomainMax;\r\n          }\r\n      }\r\n      domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\r\n      return isInverted ? domain.reverse() : domain;\r\n  };\r\n  ChartInternal.prototype.getXDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_min)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_min)\r\n              : config.axis_x_min\r\n          : $$.d3.min(targets, function (t) {\r\n              return $$.d3.min(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_max)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_max)\r\n              : config.axis_x_max\r\n          : $$.d3.max(targets, function (t) {\r\n              return $$.d3.max(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\r\n      var $$ = this, config = $$.config, diff = domain[1] - domain[0], maxDataCount, padding, paddingLeft, paddingRight;\r\n      if ($$.isCategorized()) {\r\n          padding = 0;\r\n      }\r\n      else if ($$.hasType('bar')) {\r\n          maxDataCount = $$.getMaxDataCount();\r\n          padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\r\n      }\r\n      else {\r\n          padding = diff * 0.01;\r\n      }\r\n      if (typeof config.axis_x_padding === 'object' &&\r\n          notEmpty(config.axis_x_padding)) {\r\n          paddingLeft = isValue(config.axis_x_padding.left)\r\n              ? config.axis_x_padding.left\r\n              : padding;\r\n          paddingRight = isValue(config.axis_x_padding.right)\r\n              ? config.axis_x_padding.right\r\n              : padding;\r\n      }\r\n      else if (typeof config.axis_x_padding === 'number') {\r\n          paddingLeft = paddingRight = config.axis_x_padding;\r\n      }\r\n      else {\r\n          paddingLeft = paddingRight = padding;\r\n      }\r\n      return { left: paddingLeft, right: paddingRight };\r\n  };\r\n  ChartInternal.prototype.getXDomain = function (targets) {\r\n      var $$ = this, xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)], firstX = xDomain[0], lastX = xDomain[1], padding = $$.getXDomainPadding(xDomain), min = 0, max = 0;\r\n      // show center of x domain if min and max are the same\r\n      if (firstX - lastX === 0 && !$$.isCategorized()) {\r\n          if ($$.isTimeSeries()) {\r\n              firstX = new Date(firstX.getTime() * 0.5);\r\n              lastX = new Date(lastX.getTime() * 1.5);\r\n          }\r\n          else {\r\n              firstX = firstX === 0 ? 1 : firstX * 0.5;\r\n              lastX = lastX === 0 ? -1 : lastX * 1.5;\r\n          }\r\n      }\r\n      if (firstX || firstX === 0) {\r\n          min = $$.isTimeSeries()\r\n              ? new Date(firstX.getTime() - padding.left)\r\n              : firstX - padding.left;\r\n      }\r\n      if (lastX || lastX === 0) {\r\n          max = $$.isTimeSeries()\r\n              ? new Date(lastX.getTime() + padding.right)\r\n              : lastX + padding.right;\r\n      }\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\r\n      var $$ = this, config = $$.config;\r\n      if (withUpdateOrgXDomain) {\r\n          $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\r\n          $$.orgXDomain = $$.x.domain();\r\n          if (config.zoom_enabled) {\r\n              $$.zoom.update();\r\n          }\r\n          $$.subX.domain($$.x.domain());\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      if (withUpdateXDomain) {\r\n          $$.x.domain(domain\r\n              ? domain\r\n              : !$$.brush || $$.brush.empty()\r\n                  ? $$.orgXDomain\r\n                  : $$.brush.selectionAsValue());\r\n      }\r\n      // Trim domain when too big by zoom mousemove event\r\n      if (withTrim) {\r\n          $$.x.domain($$.trimXDomain($$.x.orgDomain()));\r\n      }\r\n      return $$.x.domain();\r\n  };\r\n  ChartInternal.prototype.trimXDomain = function (domain) {\r\n      var zoomDomain = this.getZoomDomain(), min = zoomDomain[0], max = zoomDomain[1];\r\n      if (domain[0] <= min) {\r\n          domain[1] = +domain[1] + (min - domain[0]);\r\n          domain[0] = min;\r\n      }\r\n      if (max <= domain[1]) {\r\n          domain[0] = +domain[0] - (domain[1] - max);\r\n          domain[1] = max;\r\n      }\r\n      return domain;\r\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\r\n      var $$ = this, config = $$.config, main = $$.main, d3 = $$.d3;\r\n      var sx, sy, mx, my, minX, maxX, minY, maxY;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      if (!config.data_selection_multiple) {\r\n          return;\r\n      } // skip when single selection because drag is used for multiple selection\r\n      sx = $$.dragStart[0];\r\n      sy = $$.dragStart[1];\r\n      mx = mouse[0];\r\n      my = mouse[1];\r\n      minX = Math.min(sx, mx);\r\n      maxX = Math.max(sx, mx);\r\n      minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\r\n      maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\r\n      main\r\n          .select('.' + CLASS.dragarea)\r\n          .attr('x', minX)\r\n          .attr('y', minY)\r\n          .attr('width', maxX - minX)\r\n          .attr('height', maxY - minY);\r\n      // TODO: binary search when multiple xs\r\n      main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          if (!config.data_selection_isselectable(d)) {\r\n              return;\r\n          }\r\n          var shape = d3.select(this), isSelected = shape.classed(CLASS.SELECTED), isIncluded = shape.classed(CLASS.INCLUDED), _x, _y, _w, _h, toggle, isWithin = false, box;\r\n          if (shape.classed(CLASS.circle)) {\r\n              _x = shape.attr('cx') * 1;\r\n              _y = shape.attr('cy') * 1;\r\n              toggle = $$.togglePoint;\r\n              isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\r\n          }\r\n          else if (shape.classed(CLASS.bar)) {\r\n              box = getPathBox(this);\r\n              _x = box.x;\r\n              _y = box.y;\r\n              _w = box.width;\r\n              _h = box.height;\r\n              toggle = $$.togglePath;\r\n              isWithin =\r\n                  !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\r\n          }\r\n          else {\r\n              // line/area selection not supported yet\r\n              return;\r\n          }\r\n          if (isWithin ^ isIncluded) {\r\n              shape.classed(CLASS.INCLUDED, !isIncluded);\r\n              // TODO: included/unincluded callback here\r\n              shape.classed(CLASS.SELECTED, !isSelected);\r\n              toggle.call($$, !isSelected, shape, d, i);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.dragstart = function (mouse) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.dragStart = mouse;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('rect')\r\n          .attr('class', CLASS.dragarea)\r\n          .style('opacity', 0.1);\r\n      $$.dragging = true;\r\n  };\r\n  ChartInternal.prototype.dragend = function () {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.main\r\n          .select('.' + CLASS.dragarea)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\r\n      $$.dragging = false;\r\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\r\n      var $$ = this, formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat, formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\r\n      return function (v, ratio, id) {\r\n          var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\r\n          return format.call($$, v, ratio);\r\n      };\r\n  };\r\n  ChartInternal.prototype.yFormat = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y_tick_format\r\n          ? config.axis_y_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.y2Format = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y2_tick_format\r\n          ? config.axis_y2_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.defaultValueFormat = function (v) {\r\n      return isValue(v) ? +v : '';\r\n  };\r\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\r\n      return (ratio * 100).toFixed(1) + '%';\r\n  };\r\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\r\n      var $$ = this, data_labels = $$.config.data_labels, format, defaultFormat = function (v) {\r\n          return isValue(v) ? +v : '';\r\n      };\r\n      // find format according to axis id\r\n      if (typeof data_labels.format === 'function') {\r\n          format = data_labels.format;\r\n      }\r\n      else if (typeof data_labels.format === 'object') {\r\n          if (data_labels.format[targetId]) {\r\n              format =\r\n                  data_labels.format[targetId] === true\r\n                      ? defaultFormat\r\n                      : data_labels.format[targetId];\r\n          }\r\n          else {\r\n              format = function () {\r\n                  return '';\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          format = defaultFormat;\r\n      }\r\n      return format;\r\n  };\n\n  ChartInternal.prototype.initGrid = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      $$.grid = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid);\r\n      if (config.grid_x_show) {\r\n          $$.grid.append('g').attr('class', CLASS.xgrids);\r\n      }\r\n      if (config.grid_y_show) {\r\n          $$.grid.append('g').attr('class', CLASS.ygrids);\r\n      }\r\n      if (config.grid_focus_show) {\r\n          $$.grid\r\n              .append('g')\r\n              .attr('class', CLASS.xgridFocus)\r\n              .append('line')\r\n              .attr('class', CLASS.xgridFocus);\r\n      }\r\n      $$.xgrid = d3.selectAll([]);\r\n      if (!config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGridLines = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.gridLines = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid + ' ' + CLASS.gridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.xgridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.ygridLines);\r\n      $$.xgridLines = d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, xgridData = $$.generateGridData(config.grid_x_type, $$.x), tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\r\n      $$.xgridAttr = config.axis_rotated\r\n          ? {\r\n              x1: 0,\r\n              x2: $$.width,\r\n              y1: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              },\r\n              y2: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              }\r\n          }\r\n          : {\r\n              x1: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              x2: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              y1: 0,\r\n              y2: $$.height\r\n          };\r\n      $$.xgridAttr.opacity = function () {\r\n          var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\r\n          return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\r\n      };\r\n      var xgrid = $$.main\r\n          .select('.' + CLASS.xgrids)\r\n          .selectAll('.' + CLASS.xgrid)\r\n          .data(xgridData);\r\n      var xgridEnter = xgrid\r\n          .enter()\r\n          .append('line')\r\n          .attr('class', CLASS.xgrid)\r\n          .attr('x1', $$.xgridAttr.x1)\r\n          .attr('x2', $$.xgridAttr.x2)\r\n          .attr('y1', $$.xgridAttr.y1)\r\n          .attr('y2', $$.xgridAttr.y2)\r\n          .style('opacity', 0);\r\n      $$.xgrid = xgridEnter.merge(xgrid);\r\n      if (!withoutUpdate) {\r\n          $$.xgrid\r\n              .attr('x1', $$.xgridAttr.x1)\r\n              .attr('x2', $$.xgridAttr.x2)\r\n              .attr('y1', $$.xgridAttr.y1)\r\n              .attr('y2', $$.xgridAttr.y2)\r\n              .style('opacity', $$.xgridAttr.opacity);\r\n      }\r\n      xgrid.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateYGrid = function () {\r\n      var $$ = this, config = $$.config, gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\r\n      var ygrid = $$.main\r\n          .select('.' + CLASS.ygrids)\r\n          .selectAll('.' + CLASS.ygrid)\r\n          .data(gridValues);\r\n      var ygridEnter = ygrid\r\n          .enter()\r\n          .append('line')\r\n          // TODO: x1, x2, y1, y2, opacity need to be set here maybe\r\n          .attr('class', CLASS.ygrid);\r\n      $$.ygrid = ygridEnter.merge(ygrid);\r\n      $$.ygrid\r\n          .attr('x1', config.axis_rotated ? $$.y : 0)\r\n          .attr('x2', config.axis_rotated ? $$.y : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : $$.y)\r\n          .attr('y2', config.axis_rotated ? $$.height : $$.y);\r\n      ygrid.exit().remove();\r\n      $$.smoothLines($$.ygrid, 'grid');\r\n  };\r\n  ChartInternal.prototype.gridTextAnchor = function (d) {\r\n      return d.position ? d.position : 'end';\r\n  };\r\n  ChartInternal.prototype.gridTextDx = function (d) {\r\n      return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\r\n  };\r\n  ChartInternal.prototype.xGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? -this.height\r\n          : d.position === 'middle'\r\n              ? -this.height / 2\r\n              : 0;\r\n  };\r\n  ChartInternal.prototype.yGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? 0\r\n          : d.position === 'middle'\r\n              ? this.width / 2\r\n              : this.width;\r\n  };\r\n  ChartInternal.prototype.updateGrid = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, xgridLine, xgridLineEnter, ygridLine, ygridLineEnter, xv = $$.xv.bind($$), yv = $$.yv.bind($$), xGridTextX = $$.xGridTextX.bind($$), yGridTextX = $$.yGridTextX.bind($$);\r\n      // hide if arc type\r\n      $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n      if (config.grid_x_show) {\r\n          $$.updateXGrid();\r\n      }\r\n      xgridLine = main\r\n          .select('.' + CLASS.xgridLines)\r\n          .selectAll('.' + CLASS.xgridLine)\r\n          .data(config.grid_x_lines);\r\n      // enter\r\n      xgridLineEnter = xgridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      xgridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? 0 : xv)\r\n          .attr('x2', config.axis_rotated ? $$.width : xv)\r\n          .attr('y1', config.axis_rotated ? xv : 0)\r\n          .attr('y2', config.axis_rotated ? xv : $$.height)\r\n          .style('opacity', 0);\r\n      xgridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .attr('x', config.axis_rotated ? yGridTextX : xGridTextX)\r\n          .attr('y', xv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // udpate\r\n      $$.xgridLines = xgridLineEnter.merge(xgridLine);\r\n      // done in d3.transition() of the end of this function\r\n      // exit\r\n      xgridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Y-Grid\r\n      if (config.grid_y_show) {\r\n          $$.updateYGrid();\r\n      }\r\n      ygridLine = main\r\n          .select('.' + CLASS.ygridLines)\r\n          .selectAll('.' + CLASS.ygridLine)\r\n          .data(config.grid_y_lines);\r\n      // enter\r\n      ygridLineEnter = ygridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      ygridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 0);\r\n      ygridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .attr('x', config.axis_rotated ? xGridTextX : yGridTextX)\r\n          .attr('y', yv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.ygridLines = ygridLineEnter.merge(ygridLine);\r\n      $$.ygridLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 1);\r\n      $$.ygridLines\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$))\r\n          .attr('y', yv)\r\n          .text(function (d) {\r\n          return d.text;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      ygridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\r\n      var $$ = this, config = $$.config, xv = $$.xv.bind($$), lines = $$.xgridLines.select('line'), texts = $$.xgridLines.select('text');\r\n      return [\r\n          (withTransition ? lines.transition(transition) : lines)\r\n              .attr('x1', config.axis_rotated ? 0 : xv)\r\n              .attr('x2', config.axis_rotated ? $$.width : xv)\r\n              .attr('y1', config.axis_rotated ? xv : 0)\r\n              .attr('y2', config.axis_rotated ? xv : $$.height)\r\n              .style('opacity', 1),\r\n          (withTransition ? texts.transition(transition) : texts)\r\n              .attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$))\r\n              .attr('y', xv)\r\n              .text(function (d) {\r\n              return d.text;\r\n          })\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\r\n      var $$ = this, config = $$.config, dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus), xx = $$.xx.bind($$);\r\n      if (!config.tooltip_show) {\r\n          return;\r\n      }\r\n      // Hide when stanford plot exists\r\n      if ($$.hasType('stanford') || $$.hasArcType()) {\r\n          return;\r\n      }\r\n      focusEl\r\n          .style('visibility', 'visible')\r\n          .data([dataToShow[0]])\r\n          .attr(config.axis_rotated ? 'y1' : 'x1', xx)\r\n          .attr(config.axis_rotated ? 'y2' : 'x2', xx);\r\n      $$.smoothLines(focusEl, 'grid');\r\n  };\r\n  ChartInternal.prototype.hideXGridFocus = function () {\r\n      this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.updateXgridFocus = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('line.' + CLASS.xgridFocus)\r\n          .attr('x1', config.axis_rotated ? 0 : -10)\r\n          .attr('x2', config.axis_rotated ? $$.width : -10)\r\n          .attr('y1', config.axis_rotated ? -10 : 0)\r\n          .attr('y2', config.axis_rotated ? -10 : $$.height);\r\n  };\r\n  ChartInternal.prototype.generateGridData = function (type, scale) {\r\n      var $$ = this, gridData = [], xDomain, firstYear, lastYear, i, tickNum = $$.main\r\n          .select('.' + CLASS.axisX)\r\n          .selectAll('.tick')\r\n          .size();\r\n      if (type === 'year') {\r\n          xDomain = $$.getXDomain();\r\n          firstYear = xDomain[0].getFullYear();\r\n          lastYear = xDomain[1].getFullYear();\r\n          for (i = firstYear; i <= lastYear; i++) {\r\n              gridData.push(new Date(i + '-01-01 00:00:00'));\r\n          }\r\n      }\r\n      else {\r\n          gridData = scale.ticks(10);\r\n          if (gridData.length > tickNum) {\r\n              // use only int\r\n              gridData = gridData.filter(function (d) {\r\n                  return ('' + d).indexOf('.') < 0;\r\n              });\r\n          }\r\n      }\r\n      return gridData;\r\n  };\r\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\r\n      return params\r\n          ? function (line) {\r\n              var found = false;\r\n              [].concat(params).forEach(function (param) {\r\n                  if (('value' in param && line.value === param.value) ||\r\n                      ('class' in param && line['class'] === param['class'])) {\r\n                      found = true;\r\n                  }\r\n              });\r\n              return found;\r\n          }\r\n          : function () {\r\n              return true;\r\n          };\r\n  };\r\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\r\n      var $$ = this, config = $$.config, toRemove = $$.getGridFilterToRemove(params), toShow = function (line) {\r\n          return !toRemove(line);\r\n      }, classLines = forX ? CLASS.xgridLines : CLASS.ygridLines, classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\r\n      $$.main\r\n          .select('.' + classLines)\r\n          .selectAll('.' + classLine)\r\n          .filter(toRemove)\r\n          .transition()\r\n          .duration(config.transition_duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      if (forX) {\r\n          config.grid_x_lines = config.grid_x_lines.filter(toShow);\r\n      }\r\n      else {\r\n          config.grid_y_lines = config.grid_y_lines.filter(toShow);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.eventRects)\r\n          .style('fill-opacity', 0);\r\n      $$.eventRect = $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .append('rect')\r\n          .attr('class', CLASS.eventRect);\r\n      // event rect handle zoom event as well\r\n      if (config.zoom_enabled && $$.zoom) {\r\n          $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\r\n          if (config.zoom_initialRange) {\r\n              // WORKAROUND: Add transition to apply transform immediately when no subchart\r\n              $$.eventRect\r\n                  .transition()\r\n                  .duration(0)\r\n                  .call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawEventRect = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      function mouseout() {\r\n          $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\r\n          $$.hideXGridFocus();\r\n          $$.hideTooltip();\r\n          $$.unexpandCircles();\r\n          $$.unexpandBars();\r\n      }\r\n      var isHoveringDataPoint = function (mouse, closest) {\r\n          return closest &&\r\n              ($$.isBarType(closest.id) ||\r\n                  $$.dist(closest, mouse) < config.point_sensitivity);\r\n      };\r\n      var withName = function (d) { return (d ? $$.addName(Object.assign({}, d)) : null); };\r\n      // rects for mouseover\r\n      $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .style('cursor', config.zoom_enabled\r\n          ? config.axis_rotated\r\n              ? 'ns-resize'\r\n              : 'ew-resize'\r\n          : null);\r\n      $$.eventRect\r\n          .attr('x', 0)\r\n          .attr('y', 0)\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function () {\r\n              if (!config) {\r\n                  return;\r\n              } // chart is destroyed\r\n              if ($$.hasArcType()) {\r\n                  return;\r\n              }\r\n              if ($$.mouseover) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              mouseout();\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function () {\r\n              // do nothing when dragging\r\n              if ($$.dragging) {\r\n                  return;\r\n              }\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              // do nothing if arc type\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest);\r\n              // ensure onmouseout is always called if mousemove switch between 2 targets\r\n              if ($$.mouseover &&\r\n                  (!closest ||\r\n                      closest.id !== $$.mouseover.id ||\r\n                      closest.index !== $$.mouseover.index)) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              if (closest && !$$.mouseover) {\r\n                  config.data_onmouseover.call($$.api, closest);\r\n                  $$.mouseover = closest;\r\n              }\r\n              // show cursor as pointer if we're hovering a data point close enough\r\n              $$.svg\r\n                  .select('.' + CLASS.eventRect)\r\n                  .style('cursor', isMouseCloseToDataPoint ? 'pointer' : null);\r\n              // if tooltip not grouped, we want to display only data from closest data point\r\n              var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow);\r\n              // find data to highlight\r\n              var selectedData;\r\n              if (showSingleDataPoint) {\r\n                  if (closest) {\r\n                      selectedData = [closest];\r\n                  }\r\n              }\r\n              else {\r\n                  var closestByX = void 0;\r\n                  if (closest) {\r\n                      // reuse closest value\r\n                      closestByX = closest;\r\n                  }\r\n                  else {\r\n                      // try to find the closest value by X values from the mouse position\r\n                      var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\r\n                      closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\r\n                  }\r\n                  // highlight all data for this 'x' value\r\n                  if (closestByX) {\r\n                      selectedData = $$.filterByX(targetsToShow, closestByX.x);\r\n                  }\r\n              }\r\n              // ensure we have data to show\r\n              if (!selectedData || selectedData.length === 0) {\r\n                  return mouseout();\r\n              }\r\n              // inject names for each point\r\n              selectedData = selectedData.map(withName);\r\n              // show tooltip\r\n              $$.showTooltip(selectedData, this);\r\n              // expand points\r\n              if (config.point_focus_expand_enabled) {\r\n                  $$.unexpandCircles();\r\n                  selectedData.forEach(function (d) {\r\n                      $$.expandCircles(d.index, d.id, false);\r\n                  });\r\n              }\r\n              // expand bars\r\n              $$.unexpandBars();\r\n              selectedData.forEach(function (d) {\r\n                  $$.expandBars(d.index, d.id, false);\r\n              });\r\n              // Show xgrid focus line\r\n              $$.showXGridFocus(selectedData);\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function () {\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              if (!isHoveringDataPoint(mouse, closest)) {\r\n                  return;\r\n              }\r\n              // select if selection enabled\r\n              var sameXData;\r\n              if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\r\n                  sameXData = [closest];\r\n              }\r\n              else {\r\n                  sameXData = $$.filterByX(targetsToShow, closest.x);\r\n              }\r\n              // toggle selected state\r\n              sameXData.forEach(function (d) {\r\n                  $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id))\r\n                      .selectAll('.' + CLASS.shape + '-' + d.index)\r\n                      .each(function () {\r\n                      if (config.data_selection_grouped ||\r\n                          $$.isWithinShape(this, d)) {\r\n                          $$.toggleShape(this, d, d.index);\r\n                      }\r\n                  });\r\n              });\r\n              // call data_onclick on the closest data point\r\n              if (closest) {\r\n                  var shape = $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id))\r\n                      .select('.' + CLASS.shape + '-' + closest.index);\r\n                  config.data_onclick.call($$.api, closest, shape.node());\r\n              }\r\n          }\r\n          : null)\r\n          .call(config.interaction_enabled && config.data_selection_draggable && $$.drag\r\n          ? d3\r\n              .drag()\r\n              .on('drag', function () {\r\n              $$.drag(d3.mouse(this));\r\n          })\r\n              .on('start', function () {\r\n              $$.dragstart(d3.mouse(this));\r\n          })\r\n              .on('end', function () {\r\n              $$.dragend();\r\n          })\r\n          : function () { });\r\n  };\r\n  ChartInternal.prototype.getMousePosition = function (data) {\r\n      var $$ = this;\r\n      return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\r\n  };\r\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\r\n      var $$ = this, selector = '.' + CLASS.eventRect, eventRect = $$.main.select(selector).node(), box = eventRect.getBoundingClientRect(), x = box.left + (mouse ? mouse[0] : 0), y = box.top + (mouse ? mouse[1] : 0), event = document.createEvent('MouseEvents');\r\n      event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\r\n      eventRect.dispatchEvent(event);\r\n  };\n\n  ChartInternal.prototype.initLegend = function () {\r\n      var $$ = this;\r\n      $$.legendItemTextBox = {};\r\n      $$.legendHasRendered = false;\r\n      $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\r\n      if (!$$.config.legend_show) {\r\n          $$.legend.style('visibility', 'hidden');\r\n          $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\r\n          return;\r\n      }\r\n      // MEMO: call here to update legend box and tranlate for all\r\n      // MEMO: translate will be updated by this, so transform not needed in updateLegend()\r\n      $$.updateLegendWithDefaults();\r\n  };\r\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\r\n      var $$ = this;\r\n      $$.updateLegend($$.mapToIds($$.data.targets), {\r\n          withTransform: false,\r\n          withTransitionForTransform: false,\r\n          withTransition: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\r\n      var $$ = this, config = $$.config, insetLegendPosition = {\r\n          top: $$.isLegendTop\r\n              ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5\r\n              : $$.currentHeight -\r\n                  legendHeight -\r\n                  $$.getCurrentPaddingBottom() -\r\n                  config.legend_inset_y,\r\n          left: $$.isLegendLeft\r\n              ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5\r\n              : $$.currentWidth -\r\n                  legendWidth -\r\n                  $$.getCurrentPaddingRight() -\r\n                  config.legend_inset_x +\r\n                  0.5\r\n      };\r\n      $$.margin3 = {\r\n          top: $$.isLegendRight\r\n              ? 0\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.top\r\n                  : $$.currentHeight - legendHeight,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: $$.isLegendRight\r\n              ? $$.currentWidth - legendWidth\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.left\r\n                  : 0\r\n      };\r\n  };\r\n  ChartInternal.prototype.transformLegend = function (withTransition) {\r\n      var $$ = this;\r\n      (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\r\n  };\r\n  ChartInternal.prototype.updateLegendStep = function (step) {\r\n      this.legendStep = step;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\r\n      this.legendItemWidth = w;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\r\n      this.legendItemHeight = h;\r\n  };\r\n  ChartInternal.prototype.getLegendWidth = function () {\r\n      var $$ = this;\r\n      return $$.config.legend_show\r\n          ? $$.isLegendRight || $$.isLegendInset\r\n              ? $$.legendItemWidth * ($$.legendStep + 1)\r\n              : $$.currentWidth\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.getLegendHeight = function () {\r\n      var $$ = this, h = 0;\r\n      if ($$.config.legend_show) {\r\n          if ($$.isLegendRight) {\r\n              h = $$.currentHeight;\r\n          }\r\n          else {\r\n              h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\r\n          }\r\n      }\r\n      return h;\r\n  };\r\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\r\n  };\r\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\r\n  };\r\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\r\n      var $$ = this;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .filter(function (id) {\r\n          return targetIds.indexOf(id) >= 0;\r\n      })\r\n          .classed(CLASS.legendItemFocused, focus)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\r\n          return opacity.call($$, $$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.revertLegend = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemFocused, false)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend(d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.showLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (!config.legend_show) {\r\n          config.legend_show = true;\r\n          $$.legend.style('visibility', 'visible');\r\n          if (!$$.legendHasRendered) {\r\n              $$.updateLegendWithDefaults();\r\n          }\r\n      }\r\n      $$.removeHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('visibility', 'visible')\r\n          .transition()\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend($$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.hideLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.legend_show && isEmpty(targetIds)) {\r\n          config.legend_show = false;\r\n          $$.legend.style('visibility', 'hidden');\r\n      }\r\n      $$.addHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('opacity', 0)\r\n          .style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\r\n      this.legendItemTextBox = {};\r\n  };\r\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\r\n      var $$ = this, config = $$.config;\r\n      var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\r\n      var paddingTop = 4, paddingRight = 10, maxWidth = 0, maxHeight = 0, posMin = 10, tileWidth = config.legend_item_tile_width + 5;\r\n      var l, totalLength = 0, offsets = {}, widths = {}, heights = {}, margins = [0], steps = {}, step = 0;\r\n      var withTransition, withTransitionForTransform;\r\n      var texts, rects, tiles, background;\r\n      // Skip elements when their name is set to null\r\n      targetIds = targetIds.filter(function (id) {\r\n          return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\r\n      });\r\n      options = options || {};\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\r\n      function getTextBox(textElement, id) {\r\n          if (!$$.legendItemTextBox[id]) {\r\n              $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\r\n          }\r\n          return $$.legendItemTextBox[id];\r\n      }\r\n      function updatePositions(textElement, id, index) {\r\n          var reset = index === 0, isLast = index === targetIds.length - 1, box = getTextBox(textElement, id), itemWidth = box.width +\r\n              tileWidth +\r\n              (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) +\r\n              config.legend_padding, itemHeight = box.height + paddingTop, itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth, areaLength = $$.isLegendRight || $$.isLegendInset\r\n              ? $$.getLegendHeight()\r\n              : $$.getLegendWidth(), margin, maxLength;\r\n          // MEMO: care about condifion of step, totalLength\r\n          function updateValues(id, withoutStep) {\r\n              if (!withoutStep) {\r\n                  margin = (areaLength - totalLength - itemLength) / 2;\r\n                  if (margin < posMin) {\r\n                      margin = (areaLength - itemLength) / 2;\r\n                      totalLength = 0;\r\n                      step++;\r\n                  }\r\n              }\r\n              steps[id] = step;\r\n              margins[step] = $$.isLegendInset ? 10 : margin;\r\n              offsets[id] = totalLength;\r\n              totalLength += itemLength;\r\n          }\r\n          if (reset) {\r\n              totalLength = 0;\r\n              step = 0;\r\n              maxWidth = 0;\r\n              maxHeight = 0;\r\n          }\r\n          if (config.legend_show && !$$.isLegendToShow(id)) {\r\n              widths[id] = heights[id] = steps[id] = offsets[id] = 0;\r\n              return;\r\n          }\r\n          widths[id] = itemWidth;\r\n          heights[id] = itemHeight;\r\n          if (!maxWidth || itemWidth >= maxWidth) {\r\n              maxWidth = itemWidth;\r\n          }\r\n          if (!maxHeight || itemHeight >= maxHeight) {\r\n              maxHeight = itemHeight;\r\n          }\r\n          maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\r\n          if (config.legend_equally) {\r\n              Object.keys(widths).forEach(function (id) {\r\n                  widths[id] = maxWidth;\r\n              });\r\n              Object.keys(heights).forEach(function (id) {\r\n                  heights[id] = maxHeight;\r\n              });\r\n              margin = (areaLength - maxLength * targetIds.length) / 2;\r\n              if (margin < posMin) {\r\n                  totalLength = 0;\r\n                  step = 0;\r\n                  targetIds.forEach(function (id) {\r\n                      updateValues(id);\r\n                  });\r\n              }\r\n              else {\r\n                  updateValues(id, true);\r\n              }\r\n          }\r\n          else {\r\n              updateValues(id);\r\n          }\r\n      }\r\n      if ($$.isLegendInset) {\r\n          step = config.legend_inset_step\r\n              ? config.legend_inset_step\r\n              : targetIds.length;\r\n          $$.updateLegendStep(step);\r\n      }\r\n      if ($$.isLegendRight) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else if ($$.isLegendInset) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id] + 10;\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else {\r\n          xForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return maxHeight * steps[id];\r\n          };\r\n      }\r\n      xForLegendText = function (id, i) {\r\n          return xForLegend(id, i) + 4 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendText = function (id, i) {\r\n          return yForLegend(id, i) + 9;\r\n      };\r\n      xForLegendRect = function (id, i) {\r\n          return xForLegend(id, i);\r\n      };\r\n      yForLegendRect = function (id, i) {\r\n          return yForLegend(id, i) - 5;\r\n      };\r\n      x1ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2;\r\n      };\r\n      x2ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendTile = function (id, i) {\r\n          return yForLegend(id, i) + 4;\r\n      };\r\n      // Define g for legend area\r\n      l = $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .data(targetIds)\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (id) {\r\n          return $$.generateClass(CLASS.legendItem, id);\r\n      })\r\n          .style('visibility', function (id) {\r\n          return $$.isLegendToShow(id) ? 'visible' : 'hidden';\r\n      })\r\n          .style('cursor', function () {\r\n          return config.interaction_enabled ? 'pointer' : 'auto';\r\n      })\r\n          .on('click', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onclick) {\r\n                  config.legend_item_onclick.call($$, id);\r\n              }\r\n              else {\r\n                  if ($$.d3.event.altKey) {\r\n                      $$.api.hide();\r\n                      $$.api.show(id);\r\n                  }\r\n                  else {\r\n                      $$.api.toggle(id);\r\n                      $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseover) {\r\n                  config.legend_item_onmouseover.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, true);\r\n                  if (!$$.transiting && $$.isTargetToShow(id)) {\r\n                      $$.api.focus(id);\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseout) {\r\n                  config.legend_item_onmouseout.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, false);\r\n                  $$.api.revert();\r\n              }\r\n          }\r\n          : null);\r\n      l.append('text')\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      })\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      })\r\n          .style('pointer-events', 'none')\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\r\n      l.append('rect')\r\n          .attr('class', CLASS.legendItemEvent)\r\n          .style('fill-opacity', 0)\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\r\n      l.append('line')\r\n          .attr('class', CLASS.legendItemTile)\r\n          .style('stroke', $$.color)\r\n          .style('pointer-events', 'none')\r\n          .attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200)\r\n          .attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200)\r\n          .attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('stroke-width', config.legend_item_tile_height);\r\n      // Set background for inset legend\r\n      background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\r\n      if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\r\n          background = $$.legend\r\n              .insert('g', '.' + CLASS.legendItem)\r\n              .attr('class', CLASS.legendBackground)\r\n              .append('rect');\r\n      }\r\n      texts = $$.legend\r\n          .selectAll('text')\r\n          .data(targetIds)\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      }) // MEMO: needed for update\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      });\r\n      (withTransition ? texts.transition() : texts)\r\n          .attr('x', xForLegendText)\r\n          .attr('y', yForLegendText);\r\n      rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\r\n      (withTransition ? rects.transition() : rects)\r\n          .attr('width', function (id) {\r\n          return widths[id];\r\n      })\r\n          .attr('height', function (id) {\r\n          return heights[id];\r\n      })\r\n          .attr('x', xForLegendRect)\r\n          .attr('y', yForLegendRect);\r\n      tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\r\n      (withTransition ? tiles.transition() : tiles)\r\n          .style('stroke', $$.levelColor\r\n          ? function (id) {\r\n              return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0));\r\n          }\r\n          : $$.color)\r\n          .attr('x1', x1ForLegendTile)\r\n          .attr('y1', yForLegendTile)\r\n          .attr('x2', x2ForLegendTile)\r\n          .attr('y2', yForLegendTile);\r\n      if (background) {\r\n          (withTransition ? background.transition() : background)\r\n              .attr('height', $$.getLegendHeight() - 12)\r\n              .attr('width', maxWidth * (step + 1) + 10);\r\n      }\r\n      // toggle legend state\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemHidden, function (id) {\r\n          return !$$.isTargetToShow(id);\r\n      });\r\n      // Update all to reflect change of legend\r\n      $$.updateLegendItemWidth(maxWidth);\r\n      $$.updateLegendItemHeight(maxHeight);\r\n      $$.updateLegendStep(step);\r\n      // Update size and scale\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      // Update g positions\r\n      $$.transformAll(withTransitionForTransform, transitions);\r\n      $$.legendHasRendered = true;\r\n  };\n\n  ChartInternal.prototype.initRegion = function () {\r\n      var $$ = this;\r\n      $$.region = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.regions);\r\n  };\r\n  ChartInternal.prototype.updateRegion = function (duration) {\r\n      var $$ = this, config = $$.config;\r\n      // hide if arc type\r\n      $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      var mainRegion = $$.main\r\n          .select('.' + CLASS.regions)\r\n          .selectAll('.' + CLASS.region)\r\n          .data(config.regions);\r\n      var g = mainRegion.enter().append('g');\r\n      g.append('rect')\r\n          .attr('x', $$.regionX.bind($$))\r\n          .attr('y', $$.regionY.bind($$))\r\n          .attr('width', $$.regionWidth.bind($$))\r\n          .attr('height', $$.regionHeight.bind($$))\r\n          .style('fill-opacity', function (d) {\r\n          return isValue(d.opacity) ? d.opacity : 0.1;\r\n      });\r\n      g.append('text').text($$.labelRegion.bind($$));\r\n      $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\r\n      mainRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\r\n      var $$ = this, regions = $$.mainRegion, regionLabels = $$.mainRegion.selectAll('text');\r\n      return [\r\n          (withTransition ? regions.transition(transition) : regions)\r\n              .attr('x', $$.regionX.bind($$))\r\n              .attr('y', $$.regionY.bind($$))\r\n              .attr('width', $$.regionWidth.bind($$))\r\n              .attr('height', $$.regionHeight.bind($$))\r\n              .style('fill-opacity', function (d) {\r\n              return isValue(d.opacity) ? d.opacity : 0.1;\r\n          }),\r\n          (withTransition ? regionLabels.transition(transition) : regionLabels)\r\n              .attr('x', $$.labelOffsetX.bind($$))\r\n              .attr('y', $$.labelOffsetY.bind($$))\r\n              .attr('transform', $$.labelTransform.bind($$))\r\n              .attr('style', 'text-anchor: left;')\r\n      ];\r\n  };\r\n  ChartInternal.prototype.regionX = function (d) {\r\n      var $$ = this, config = $$.config, xPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          xPos = config.axis_rotated ? ('start' in d ? yScale(d.start) : 0) : 0;\r\n      }\r\n      else {\r\n          xPos = config.axis_rotated\r\n              ? 0\r\n              : 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0;\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.regionY = function (d) {\r\n      var $$ = this, config = $$.config, yPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\r\n      }\r\n      else {\r\n          yPos = config.axis_rotated\r\n              ? 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0\r\n              : 0;\r\n      }\r\n      return yPos;\r\n  };\r\n  ChartInternal.prototype.regionWidth = function (d) {\r\n      var $$ = this, config = $$.config, start = $$.regionX(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? yScale(d.end)\r\n                  : $$.width\r\n              : $$.width;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? $$.width\r\n              : 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.width;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.regionHeight = function (d) {\r\n      var $$ = this, config = $$.config, start = this.regionY(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? $$.height\r\n              : 'start' in d\r\n                  ? yScale(d.start)\r\n                  : $$.height;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.height\r\n              : $$.height;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.isRegionOnX = function (d) {\r\n      return !d.axis || d.axis === 'x';\r\n  };\r\n  ChartInternal.prototype.labelRegion = function (d) {\r\n      return 'label' in d ? d.label : '';\r\n  };\r\n  ChartInternal.prototype.labelTransform = function (d) {\r\n      return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\r\n  };\r\n  ChartInternal.prototype.labelOffsetX = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? this.regionY(d) + paddingY\r\n          : this.regionX(d) + paddingX;\r\n  };\r\n  ChartInternal.prototype.labelOffsetY = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? -(this.regionX(d) + paddingX)\r\n          : this.regionY(d) + 10 + paddingY;\r\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\r\n      var PROJECTION = [0.01, 10];\r\n      if (!linearScale) {\r\n          linearScale = d3.scaleLinear();\r\n          linearScale.range(PROJECTION);\r\n      }\r\n      if (!logScale) {\r\n          logScale = d3.scaleLog();\r\n          logScale.domain(PROJECTION);\r\n          logScale.nice();\r\n      }\r\n      // copied from https://github.com/compute-io/logspace\r\n      function logspace(a, b, len) {\r\n          var arr, end, tmp, d;\r\n          if (arguments.length < 3) {\r\n              len = 10;\r\n          }\r\n          else {\r\n              if (len === 0) {\r\n                  return [];\r\n              }\r\n          }\r\n          // Calculate the increment:\r\n          end = len - 1;\r\n          d = (b - a) / end;\r\n          // Build the output array...\r\n          arr = new Array(len);\r\n          tmp = a;\r\n          arr[0] = Math.pow(10, tmp);\r\n          for (var i = 1; i < end; i++) {\r\n              tmp += d;\r\n              arr[i] = Math.pow(10, tmp);\r\n          }\r\n          arr[end] = Math.pow(10, b);\r\n          return arr;\r\n      }\r\n      function scale(x) {\r\n          return logScale(linearScale(x));\r\n      }\r\n      scale.domain = function (x) {\r\n          if (!arguments.length) {\r\n              return linearScale.domain();\r\n          }\r\n          linearScale.domain(x);\r\n          return scale;\r\n      };\r\n      scale.range = function (x) {\r\n          if (!arguments.length) {\r\n              return logScale.range();\r\n          }\r\n          logScale.range(x);\r\n          return scale;\r\n      };\r\n      scale.ticks = function (m) {\r\n          return logspace(-2, 1, m || 10).map(function (v) {\r\n              return linearScale.invert(v);\r\n          });\r\n      };\r\n      scale.copy = function () {\r\n          return c3LogScale(d3, linearScale.copy(), logScale.copy());\r\n      };\r\n      return scale;\r\n  }\r\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\r\n      return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([\r\n          min,\r\n          max\r\n      ]);\r\n  };\r\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\r\n      var $$ = this, scale = $$.getScale(min, max, $$.isTimeSeries()), _scale = domain ? scale.domain(domain) : scale, key;\r\n      // Define customized scale if categorized axis\r\n      if ($$.isCategorized()) {\r\n          offset =\r\n              offset ||\r\n                  function () {\r\n                      return 0;\r\n                  };\r\n          scale = function (d, raw) {\r\n              var v = _scale(d) + offset(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      else {\r\n          scale = function (d, raw) {\r\n              var v = _scale(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      // define functions\r\n      for (key in _scale) {\r\n          scale[key] = _scale[key];\r\n      }\r\n      scale.orgDomain = function () {\r\n          return _scale.domain();\r\n      };\r\n      // define custom domain() for categorized axis\r\n      if ($$.isCategorized()) {\r\n          scale.domain = function (domain) {\r\n              if (!arguments.length) {\r\n                  domain = this.orgDomain();\r\n                  return [domain[0], domain[1] + 1];\r\n              }\r\n              _scale.domain(domain);\r\n              return scale;\r\n          };\r\n      }\r\n      return scale;\r\n  };\r\n  /**\r\n   * Creates and configures a D3 scale instance for the given type.\r\n   *\r\n   * By defaults it returns a Linear scale.\r\n   *\r\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\r\n   * @param {Array} domain The scale domain such as [from, to]\r\n   * @param {Array} range The scale's range such as [from, to]\r\n   *\r\n   * @return A d3-scale instance\r\n   */\r\n  ChartInternal.prototype.getY = function (type, domain, range) {\r\n      var scale;\r\n      if (type === 'timeseries' || type === 'time') {\r\n          scale = this.d3.scaleTime();\r\n      }\r\n      else if (type === 'log') {\r\n          scale = c3LogScale(this.d3);\r\n      }\r\n      else if (type === 'linear' || type === undefined) {\r\n          scale = this.d3.scaleLinear();\r\n      }\r\n      else {\r\n          throw new Error(\"Invalid Y axis type: \\\"\" + type + \"\\\"\");\r\n      }\r\n      if (domain) {\r\n          scale.domain(domain);\r\n      }\r\n      if (range) {\r\n          scale.range(range);\r\n      }\r\n      return scale;\r\n  };\r\n  ChartInternal.prototype.getYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\r\n  };\r\n  ChartInternal.prototype.getSubYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\r\n  };\r\n  ChartInternal.prototype.updateScales = function () {\r\n      var $$ = this, config = $$.config, forInit = !$$.x;\r\n      // update edges\r\n      $$.xMin = config.axis_rotated ? 1 : 0;\r\n      $$.xMax = config.axis_rotated ? $$.height : $$.width;\r\n      $$.yMin = config.axis_rotated ? 0 : $$.height;\r\n      $$.yMax = config.axis_rotated ? $$.width : 1;\r\n      $$.subXMin = $$.xMin;\r\n      $$.subXMax = $$.xMax;\r\n      $$.subYMin = config.axis_rotated ? 0 : $$.height2;\r\n      $$.subYMax = config.axis_rotated ? $$.width2 : 1;\r\n      // update scales\r\n      $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\r\n          return $$.xAxis.tickOffset();\r\n      });\r\n      $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\r\n      $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\r\n      $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\r\n          return d % 1 ? 0 : $$.subXAxis.tickOffset();\r\n      });\r\n      $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\r\n      $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]);\r\n      // update axes\r\n      $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\r\n      $$.xAxisTickValues = $$.axis.getXAxisTickValues();\r\n      $$.yAxisTickValues = $$.axis.getYAxisTickValues();\r\n      $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\r\n      $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\r\n      $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer);\r\n      // Set initialized scales to brush and zoom\r\n      if (!forInit) {\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      // update for arc\r\n      if ($$.updateArc) {\r\n          $$.updateArc();\r\n      }\r\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\r\n      var $$ = this, config = $$.config, cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$), cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$), r = $$.pointSelectR.bind($$);\r\n      config.data_onselected.call($$.api, d, target.node());\r\n      // add selected-circle on low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .data([d])\r\n          .enter()\r\n          .append('circle')\r\n          .attr('class', function () {\r\n          return $$.generateClass(CLASS.selectedCircle, i);\r\n      })\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('stroke', function () {\r\n          return $$.color(d);\r\n      })\r\n          .attr('r', function (d) {\r\n          return $$.pointSelectR(d) * 1.4;\r\n      })\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$.api, d, target.node());\r\n      // remove selected-circle from low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\r\n      selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\r\n  };\r\n  ChartInternal.prototype.selectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.d3.rgb($$.color(d)).brighter(0.75);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.unselectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.color(d);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\r\n      selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\r\n  };\r\n  ChartInternal.prototype.getToggle = function (that, d) {\r\n      var $$ = this, toggle;\r\n      if (that.nodeName === 'circle') {\r\n          if ($$.isStepType(d)) {\r\n              // circle is hidden in step chart, so treat as within the click area\r\n              toggle = function () { }; // TODO: how to select step chart?\r\n          }\r\n          else {\r\n              toggle = $$.togglePoint;\r\n          }\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          toggle = $$.togglePath;\r\n      }\r\n      return toggle;\r\n  };\r\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, shape = d3.select(that), isSelected = shape.classed(CLASS.SELECTED), toggle = $$.getToggle(that, d).bind($$);\r\n      if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\r\n          if (!config.data_selection_multiple) {\r\n              $$.main\r\n                  .selectAll('.' +\r\n                  CLASS.shapes +\r\n                  (config.data_selection_grouped\r\n                      ? $$.getTargetSelectorSuffix(d.id)\r\n                      : ''))\r\n                  .selectAll('.' + CLASS.shape)\r\n                  .each(function (d, i) {\r\n                  var shape = d3.select(this);\r\n                  if (shape.classed(CLASS.SELECTED)) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              });\r\n          }\r\n          shape.classed(CLASS.SELECTED, !isSelected);\r\n          toggle(!isSelected, shape, d, i);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initBar = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\r\n      var $$ = this, config = $$.config, mainBars, mainBarEnter, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainBars = $$.main\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartBar(d) + classFocus(d);\r\n      });\r\n      mainBarEnter = mainBars\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartBar)\r\n          .style('pointer-events', 'none');\r\n      // Bars for each data\r\n      mainBarEnter\r\n          .append('g')\r\n          .attr('class', classBars)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateBar = function (durationForExit) {\r\n      var $$ = this, barData = $$.barData.bind($$), classBar = $$.classBar.bind($$), initialOpacity = $$.initialOpacity.bind($$), color = function (d) {\r\n          return $$.color(d.id);\r\n      };\r\n      var mainBar = $$.main\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data(barData);\r\n      var mainBarEnter = mainBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', classBar)\r\n          .style('stroke', color)\r\n          .style('fill', color);\r\n      $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\r\n      mainBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\r\n      var $$ = this;\r\n      return [\r\n          (withTransition ? this.mainBar.transition(transition) : this.mainBar)\r\n              .attr('d', drawBar)\r\n              .style('stroke', this.color)\r\n              .style('fill', this.color)\r\n              .style('opacity', function (d) { return ($$.isTargetToShow(d.id) ? 1 : 0); })\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\r\n      var $$ = this, config = $$.config, w = typeof config.bar_width === 'number'\r\n          ? config.bar_width\r\n          : barTargetsNum\r\n              ? (axis.tickInterval() * config.bar_width_ratio) / barTargetsNum\r\n              : 0;\r\n      return config.bar_width_max && w > config.bar_width_max\r\n          ? config.bar_width_max\r\n          : w;\r\n  };\r\n  ChartInternal.prototype.getBars = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\r\n      var $$ = this;\r\n      if (reset) {\r\n          $$.unexpandBars();\r\n      }\r\n      $$.getBars(i, id).classed(CLASS.EXPANDED, true);\r\n  };\r\n  ChartInternal.prototype.unexpandBars = function (i) {\r\n      var $$ = this;\r\n      $$.getBars(i).classed(CLASS.EXPANDED, false);\r\n  };\r\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\r\n      var $$ = this, config = $$.config, getPoints = $$.generateGetBarPoints(barIndices, isSub);\r\n      return function (d, i) {\r\n          // 4 points that make a bar\r\n          var points = getPoints(d, i);\r\n          // switch points if axis is rotated, not applicable for sub chart\r\n          var indexX = config.axis_rotated ? 1 : 0;\r\n          var indexY = config.axis_rotated ? 0 : 1;\r\n          var path = 'M ' +\r\n              points[0][indexX] +\r\n              ',' +\r\n              points[0][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[1][indexX] +\r\n              ',' +\r\n              points[1][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[2][indexX] +\r\n              ',' +\r\n              points[2][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[3][indexX] +\r\n              ',' +\r\n              points[3][indexY] +\r\n              ' ' +\r\n              'z';\r\n          return path;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\r\n      var $$ = this, axis = isSub ? $$.subXAxis : $$.xAxis, barTargetsNum = barIndices.__max__ + 1, barW = $$.getBarW(axis, barTargetsNum), barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub), barY = $$.getShapeY(!!isSub), barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub), barSpaceOffset = barW * ($$.config.bar_space / 2), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = barOffset(d, i) || y0, // offset is for stacked bar chart\r\n          posX = barX(d), posY = barY(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if ($$.config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          posY -= y0 - offset;\r\n          // 4 points that make a bar\r\n          return [\r\n              [posX + barSpaceOffset, offset],\r\n              [posX + barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, offset]\r\n          ];\r\n      };\r\n  };\r\n  /**\r\n   * Returns whether the data point is within the given bar shape.\r\n   *\r\n   * @param mouse\r\n   * @param barShape\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\r\n      return isWithinBox(mouse, getBBox(barShape), 2);\r\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\r\n      var $$ = this, config = $$.config, indices = {}, i = 0, j, k;\r\n      $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              if (config.data_groups[j].indexOf(d.id) < 0) {\r\n                  continue;\r\n              }\r\n              for (k = 0; k < config.data_groups[j].length; k++) {\r\n                  if (config.data_groups[j][k] in indices) {\r\n                      indices[d.id] = indices[config.data_groups[j][k]];\r\n                      break;\r\n                  }\r\n              }\r\n          }\r\n          if (isUndefined(indices[d.id])) {\r\n              indices[d.id] = i++;\r\n          }\r\n      });\r\n      indices.__max__ = i - 1;\r\n      return indices;\r\n  };\r\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\r\n      var $$ = this, scale = isSub ? $$.subX : $$.x;\r\n      return function (d) {\r\n          var index = d.id in indices ? indices[d.id] : 0;\r\n          return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeY = function (isSub) {\r\n      var $$ = this;\r\n      return function (d) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\r\n          return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\r\n      var $$ = this, targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))), targetIds = targets.map(function (t) {\r\n          return t.id;\r\n      });\r\n      return function (d, i) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id), y0 = scale(0), offset = y0;\r\n          targets.forEach(function (t) {\r\n              var rowValues = $$.isStepType(d)\r\n                  ? $$.convertValuesToStep(t.values)\r\n                  : t.values;\r\n              var isTargetNormalized = $$.isTargetNormalized(d.id);\r\n              var values = rowValues.map(function (v) {\r\n                  return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\r\n              });\r\n              if (t.id === d.id || indices[t.id] !== indices[d.id]) {\r\n                  return;\r\n              }\r\n              if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\r\n                  // check if the x values line up\r\n                  if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\r\n                      // \"+\" for timeseries\r\n                      // if not, try to find the value that does line up\r\n                      i = -1;\r\n                      rowValues.forEach(function (v, j) {\r\n                          var x1 = v.x.constructor === Date ? +v.x : v.x;\r\n                          var x2 = d.x.constructor === Date ? +d.x : d.x;\r\n                          if (x1 === x2) {\r\n                              i = j;\r\n                          }\r\n                      });\r\n                  }\r\n                  if (i in rowValues && rowValues[i].value * d.value >= 0) {\r\n                      offset += scale(values[i]) - y0;\r\n                  }\r\n              }\r\n          });\r\n          return offset;\r\n      };\r\n  };\r\n  ChartInternal.prototype.isWithinShape = function (that, d) {\r\n      var $$ = this, shape = $$.d3.select(that), isWithin;\r\n      if (!$$.isTargetToShow(d.id)) {\r\n          isWithin = false;\r\n      }\r\n      else if (that.nodeName === 'circle') {\r\n          isWithin = $$.isStepType(d)\r\n              ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value))\r\n              : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          isWithin = shape.classed(CLASS.bar)\r\n              ? $$.isWithinBar($$.d3.mouse(that), that)\r\n              : true;\r\n      }\r\n      return isWithin;\r\n  };\r\n  ChartInternal.prototype.getInterpolate = function (d) {\r\n      var $$ = this, d3 = $$.d3, types = {\r\n          linear: d3.curveLinear,\r\n          'linear-closed': d3.curveLinearClosed,\r\n          basis: d3.curveBasis,\r\n          'basis-open': d3.curveBasisOpen,\r\n          'basis-closed': d3.curveBasisClosed,\r\n          bundle: d3.curveBundle,\r\n          cardinal: d3.curveCardinal,\r\n          'cardinal-open': d3.curveCardinalOpen,\r\n          'cardinal-closed': d3.curveCardinalClosed,\r\n          monotone: d3.curveMonotoneX,\r\n          step: d3.curveStep,\r\n          'step-before': d3.curveStepBefore,\r\n          'step-after': d3.curveStepAfter\r\n      }, type;\r\n      if ($$.isSplineType(d)) {\r\n          type = types[$$.config.spline_interpolation_type] || types.cardinal;\r\n      }\r\n      else if ($$.isStepType(d)) {\r\n          type = types[$$.config.line_step_type];\r\n      }\r\n      else {\r\n          type = types.linear;\r\n      }\r\n      return type;\r\n  };\n\n  ChartInternal.prototype.initLine = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\r\n      var $$ = this, config = $$.config, mainLines, mainLineEnter, classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$), classCircles = $$.classCircles.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainLines = $$.main\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartLine(d) + classFocus(d);\r\n      });\r\n      mainLineEnter = mainLines\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartLine)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      // Lines for each data\r\n      mainLineEnter.append('g').attr('class', classLines);\r\n      // Areas\r\n      mainLineEnter.append('g').attr('class', classAreas);\r\n      // Circles for each data point on lines\r\n      mainLineEnter.append('g').attr('class', function (d) {\r\n          return $$.generateClass(CLASS.selectedCircles, d.id);\r\n      });\r\n      mainLineEnter\r\n          .append('g')\r\n          .attr('class', classCircles)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n      // Update date for selected circles\r\n      targets.forEach(function (t) {\r\n          $$.main\r\n              .selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id))\r\n              .selectAll('.' + CLASS.selectedCircle)\r\n              .each(function (d) {\r\n              d.value = t.values[d.index].value;\r\n          });\r\n      });\r\n      // MEMO: can not keep same color...\r\n      //mainLineUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateLine = function (durationForExit) {\r\n      var $$ = this;\r\n      var mainLine = $$.main\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var mainLineEnter = mainLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      $$.mainLine = mainLineEnter\r\n          .merge(mainLine)\r\n          .style('opacity', $$.initialOpacity.bind($$))\r\n          .style('shape-rendering', function (d) {\r\n          return $$.isStepType(d) ? 'crispEdges' : '';\r\n      })\r\n          .attr('transform', null);\r\n      mainLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainLine.transition(transition) : this.mainLine)\r\n              .attr('d', drawLine)\r\n              .style('stroke', this.color)\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\r\n      var $$ = this, config = $$.config, line = $$.d3.line(), getPoints = $$.generateGetLinePoints(lineIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, yValue = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      line = config.axis_rotated\r\n          ? line.x(yValue).y(xValue)\r\n          : line.x(xValue).y(yValue);\r\n      if (!config.line_connectNull) {\r\n          line = line.defined(function (d) {\r\n              return d.value != null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x = isSub ? $$.subX : $$.x, y = yScaleGetter.call($$, d.id), x0 = 0, y0 = 0, path;\r\n          if ($$.isLineType(d)) {\r\n              if (config.data_regions[d.id]) {\r\n                  path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\r\n              }\r\n              else {\r\n                  if ($$.isStepType(d)) {\r\n                      values = $$.convertValuesToStep(values);\r\n                  }\r\n                  path = line.curve($$.getInterpolate(d))(values);\r\n              }\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = x(values[0].x);\r\n                  y0 = y(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, lineTargetsNum = lineIndices.__max__ + 1, x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub), y = $$.getShapeY(!!isSub), lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = lineOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the line position\r\n          return [\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\r\n      var $$ = this, config = $$.config, prev = -1, i, j, s = 'M', sWithRegion, xp, yp, dx, dy, dd, diff, diffx2, xOffset = $$.isCategorized() ? 0.5 : 0, xValue, yValue, regions = [];\r\n      function isWithinRegions(x, regions) {\r\n          var i;\r\n          for (i = 0; i < regions.length; i++) {\r\n              if (regions[i].start < x && x <= regions[i].end) {\r\n                  return true;\r\n              }\r\n          }\r\n          return false;\r\n      }\r\n      // Check start/end of regions\r\n      if (isDefined(_regions)) {\r\n          for (i = 0; i < _regions.length; i++) {\r\n              regions[i] = {};\r\n              if (isUndefined(_regions[i].start)) {\r\n                  regions[i].start = d[0].x;\r\n              }\r\n              else {\r\n                  regions[i].start = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].start)\r\n                      : _regions[i].start;\r\n              }\r\n              if (isUndefined(_regions[i].end)) {\r\n                  regions[i].end = d[d.length - 1].x;\r\n              }\r\n              else {\r\n                  regions[i].end = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].end)\r\n                      : _regions[i].end;\r\n              }\r\n          }\r\n      }\r\n      // Set scales\r\n      xValue = config.axis_rotated\r\n          ? function (d) {\r\n              return y(d.value);\r\n          }\r\n          : function (d) {\r\n              return x(d.x);\r\n          };\r\n      yValue = config.axis_rotated\r\n          ? function (d) {\r\n              return x(d.x);\r\n          }\r\n          : function (d) {\r\n              return y(d.value);\r\n          };\r\n      // Define svg generator function for region\r\n      function generateM(points) {\r\n          return ('M' +\r\n              points[0][0] +\r\n              ' ' +\r\n              points[0][1] +\r\n              ' ' +\r\n              points[1][0] +\r\n              ' ' +\r\n              points[1][1]);\r\n      }\r\n      if ($$.isTimeSeries()) {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var x0 = d0.x.getTime(), x_diff = d1.x - d0.x, xv0 = new Date(x0 + x_diff * j), xv1 = new Date(x0 + x_diff * (j + diff)), points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j)), x(xv0)],\r\n                      [y(yp(j + diff)), x(xv1)]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xv0), y(yp(j))],\r\n                      [x(xv1), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      else {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j), true), x(xp(j))],\r\n                      [y(yp(j + diff), true), x(xp(j + diff))]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xp(j), true), y(yp(j))],\r\n                      [x(xp(j + diff), true), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      // Generate\r\n      for (i = 0; i < d.length; i++) {\r\n          // Draw as normal\r\n          if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\r\n              s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\r\n          }\r\n          // Draw with region // TODO: Fix for horizotal charts\r\n          else {\r\n              xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\r\n              yp = $$.getScale(d[i - 1].value, d[i].value);\r\n              dx = x(d[i].x) - x(d[i - 1].x);\r\n              dy = y(d[i].value) - y(d[i - 1].value);\r\n              dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\r\n              diff = 2 / dd;\r\n              diffx2 = diff * 2;\r\n              for (j = diff; j <= 1; j += diffx2) {\r\n                  s += sWithRegion(d[i - 1], d[i], j, diff);\r\n              }\r\n          }\r\n          prev = d[i].x;\r\n      }\r\n      return s;\r\n  };\r\n  ChartInternal.prototype.updateArea = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var mainArea = $$.main\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var mainAreaEnter = mainArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      $$.mainArea = mainAreaEnter\r\n          .merge(mainArea)\r\n          .style('opacity', $$.orgAreaOpacity);\r\n      mainArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainArea.transition(transition) : this.mainArea)\r\n              .attr('d', drawArea)\r\n              .style('fill', this.color)\r\n              .style('opacity', this.orgAreaOpacity)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\r\n      var $$ = this, config = $$.config, area = $$.d3.area(), getPoints = $$.generateGetAreaPoints(areaIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, value0 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\r\n      }, value1 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[1][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      area = config.axis_rotated\r\n          ? area\r\n              .x0(value0)\r\n              .x1(value1)\r\n              .y(xValue)\r\n          : area\r\n              .x(xValue)\r\n              .y0(config.area_above ? 0 : value0)\r\n              .y1(value1);\r\n      if (!config.line_connectNull) {\r\n          area = area.defined(function (d) {\r\n              return d.value !== null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x0 = 0, y0 = 0, path;\r\n          if ($$.isAreaType(d)) {\r\n              if ($$.isStepType(d)) {\r\n                  values = $$.convertValuesToStep(values);\r\n              }\r\n              path = area.curve($$.getInterpolate(d))(values);\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = $$.x(values[0].x);\r\n                  y0 = $$.getYScale(d.id)(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getAreaBaseValue = function () {\r\n      return 0;\r\n  };\r\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, areaTargetsNum = areaIndices.__max__ + 1, x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub), y = $$.getShapeY(!!isSub), areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = areaOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the area position\r\n          return [\r\n              [posX, offset],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, offset] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\r\n      var $$ = this;\r\n      var mainCircle = $$.main\r\n          .selectAll('.' + CLASS.circles)\r\n          .selectAll('.' + CLASS.circle)\r\n          .data($$.lineOrScatterOrStanfordData.bind($$));\r\n      var mainCircleEnter = mainCircle\r\n          .enter()\r\n          .append('circle')\r\n          .attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '')\r\n          .attr('class', $$.classCircle.bind($$))\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('r', $$.pointR.bind($$))\r\n          .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\r\n      $$.mainCircle = mainCircleEnter\r\n          .merge(mainCircle)\r\n          .style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\r\n      mainCircle.exit().style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\r\n      var $$ = this, selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\r\n      return [\r\n          (withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle)\r\n              .style('opacity', this.opacityForCircle.bind($$))\r\n              .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy),\r\n          (withTransition ? selectedCircles.transition(transition) : selectedCircles)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.circleX = function (d) {\r\n      return d.x || d.x === 0 ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.updateCircleY = function () {\r\n      var $$ = this, lineIndices, getPoints;\r\n      if ($$.config.data_groups.length > 0) {\r\n          (lineIndices = $$.getShapeIndices($$.isLineType)),\r\n              (getPoints = $$.generateGetLinePoints(lineIndices));\r\n          $$.circleY = function (d, i) {\r\n              return getPoints(d, i)[0][1];\r\n          };\r\n      }\r\n      else {\r\n          $$.circleY = function (d) {\r\n              return $$.getYScale(d.id)(d.value);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCircles = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\r\n      var $$ = this, r = $$.pointExpandedR.bind($$);\r\n      if (reset) {\r\n          $$.unexpandCircles();\r\n      }\r\n      $$.getCircles(i, id)\r\n          .classed(CLASS.EXPANDED, true)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unexpandCircles = function (i) {\r\n      var $$ = this, r = $$.pointR.bind($$);\r\n      $$.getCircles(i)\r\n          .filter(function () {\r\n          return $$.d3.select(this).classed(CLASS.EXPANDED);\r\n      })\r\n          .classed(CLASS.EXPANDED, false)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.pointR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return $$.isStepType(d)\r\n          ? 0\r\n          : isFunction(config.point_r)\r\n              ? config.point_r(d)\r\n              : config.point_r;\r\n  };\r\n  ChartInternal.prototype.pointExpandedR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.point_focus_expand_enabled) {\r\n          return isFunction(config.point_focus_expand_r)\r\n              ? config.point_focus_expand_r(d)\r\n              : config.point_focus_expand_r\r\n                  ? config.point_focus_expand_r\r\n                  : $$.pointR(d) * 1.75;\r\n      }\r\n      else {\r\n          return $$.pointR(d);\r\n      }\r\n  };\r\n  ChartInternal.prototype.pointSelectR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return isFunction(config.point_select_r)\r\n          ? config.point_select_r(d)\r\n          : config.point_select_r\r\n              ? config.point_select_r\r\n              : $$.pointR(d) * 4;\r\n  };\r\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\r\n      var d3 = this.d3, mouse = d3.mouse(that), d3_this = d3.select(that), cx = +d3_this.attr('cx'), cy = +d3_this.attr('cy');\r\n      return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\r\n  };\r\n  ChartInternal.prototype.isWithinStep = function (that, y) {\r\n      return Math.abs(y - this.d3.mouse(that)[1]) < 30;\r\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.size_width ? config.size_width : $$.getParentWidth();\r\n  };\r\n  ChartInternal.prototype.getCurrentHeight = function () {\r\n      var $$ = this, config = $$.config, h = config.size_height ? config.size_height : $$.getParentHeight();\r\n      return h > 0\r\n          ? h\r\n          : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\r\n      var $$ = this, config = $$.config, padding = isValue(config.padding_top) ? config.padding_top : 0;\r\n      if ($$.title && $$.title.node()) {\r\n          padding += $$.getTitlePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\r\n      var config = this.config;\r\n      return isValue(config.padding_bottom) ? config.padding_bottom : 0;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config;\r\n      if (isValue(config.padding_left)) {\r\n          return config.padding_left;\r\n      }\r\n      else if (config.axis_rotated) {\r\n          return !config.axis_x_show || config.axis_x_inner\r\n              ? 1\r\n              : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\r\n      }\r\n      else if (!config.axis_y_show || config.axis_y_inner) {\r\n          // && !config.axis_rotated\r\n          return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\r\n      }\r\n      else {\r\n          return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\r\n      var $$ = this, config = $$.config, padding = 0, defaultPadding = 10, legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\r\n      if (isValue(config.padding_right)) {\r\n          padding = config.padding_right + 1; // 1 is needed not to hide tick line\r\n      }\r\n      else if (config.axis_rotated) {\r\n          padding = defaultPadding + legendWidthOnRight;\r\n      }\r\n      else if (!config.axis_y2_show || config.axis_y2_inner) {\r\n          // && !config.axis_rotated\r\n          padding =\r\n              2 +\r\n                  legendWidthOnRight +\r\n                  ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\r\n      }\r\n      else {\r\n          padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\r\n      }\r\n      if ($$.colorScale && $$.colorScale.node()) {\r\n          padding += $$.getColorScalePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getParentRectValue = function (key) {\r\n      var parent = this.selectChart.node(), v;\r\n      while (parent && parent.tagName !== 'BODY') {\r\n          try {\r\n              v = parent.getBoundingClientRect()[key];\r\n          }\r\n          catch (e) {\r\n              if (key === 'width') {\r\n                  // In IE in certain cases getBoundingClientRect\r\n                  // will cause an \"unspecified error\"\r\n                  v = parent.offsetWidth;\r\n              }\r\n          }\r\n          if (v) {\r\n              break;\r\n          }\r\n          parent = parent.parentNode;\r\n      }\r\n      return v;\r\n  };\r\n  ChartInternal.prototype.getParentWidth = function () {\r\n      return this.getParentRectValue('width');\r\n  };\r\n  ChartInternal.prototype.getParentHeight = function () {\r\n      var h = this.selectChart.style('height');\r\n      return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\r\n  };\r\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config, hasLeftAxisRect = config.axis_rotated || (!config.axis_rotated && !config.axis_y_inner), leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY, leftAxis = $$.main.select('.' + leftAxisClass).node(), svgRect = leftAxis && hasLeftAxisRect\r\n          ? leftAxis.getBoundingClientRect()\r\n          : { right: 0 }, chartRect = $$.selectChart.node().getBoundingClientRect(), hasArc = $$.hasArcType(), svgLeft = svgRect.right -\r\n          chartRect.left -\r\n          (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\r\n      return svgLeft > 0 ? svgLeft : 0;\r\n  };\r\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\r\n      var $$ = this, position = $$.axis.getLabelPositionById(id);\r\n      return ($$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40));\r\n  };\r\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId, isSubchart) {\r\n      var $$ = this, config = $$.config, h = 30;\r\n      if (axisId === 'x' && !(isDefined(isSubchart) && isSubchart ? config.subchart_axis_x_show : config.axis_x_show)) {\r\n          return 8;\r\n      }\r\n      if (axisId === 'x' && config.axis_x_height) {\r\n          return config.axis_x_height;\r\n      }\r\n      if (axisId === 'y' && !config.axis_y_show) {\r\n          return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\r\n      }\r\n      if (axisId === 'y2' && !config.axis_y2_show) {\r\n          return $$.rotated_padding_top;\r\n      }\r\n      // Calculate x axis height when tick rotated\r\n      if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_x_tick_rotate))) / 180);\r\n      }\r\n      // Calculate y axis height when tick rotated\r\n      if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_y_tick_rotate))) / 180);\r\n      }\r\n      return (h +\r\n          ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) +\r\n          (axisId === 'y2' ? -10 : 0));\r\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\r\n      var $$ = this, d3 = $$.d3;\r\n      // TODO: dynamically change brushY/brushX according to axis_rotated.\r\n      $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX())\r\n          .on('brush', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          $$.redrawForBrush();\r\n      })\r\n          .on('end', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          if ($$.brush.empty() && event && event.type !== 'end') {\r\n              $$.brush.clear();\r\n          }\r\n      });\r\n      $$.brush.updateExtent = function () {\r\n          var range = this.scale.range(), extent;\r\n          if ($$.config.axis_rotated) {\r\n              extent = [\r\n                  [0, range[0]],\r\n                  [$$.width2, range[1]]\r\n              ];\r\n          }\r\n          else {\r\n              extent = [\r\n                  [range[0], 0],\r\n                  [range[1], $$.height2]\r\n              ];\r\n          }\r\n          this.extent(extent);\r\n          return this;\r\n      };\r\n      $$.brush.updateScale = function (scale) {\r\n          this.scale = scale;\r\n          return this;\r\n      };\r\n      $$.brush.update = function (scale) {\r\n          this.updateScale(scale || $$.subX).updateExtent();\r\n          $$.context.select('.' + CLASS.brush).call(this);\r\n      };\r\n      $$.brush.clear = function () {\r\n          $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\r\n      };\r\n      $$.brush.selection = function () {\r\n          return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\r\n      };\r\n      $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\r\n          var selection, brush;\r\n          if (selectionAsValue) {\r\n              if ($$.context) {\r\n                  selection = [\r\n                      this.scale(selectionAsValue[0]),\r\n                      this.scale(selectionAsValue[1])\r\n                  ];\r\n                  brush = $$.context.select('.' + CLASS.brush);\r\n                  if (withTransition) {\r\n                      brush = brush.transition();\r\n                  }\r\n                  $$.brush.move(brush, selection);\r\n              }\r\n              return [];\r\n          }\r\n          selection = $$.brush.selection() || [0, 0];\r\n          return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\r\n      };\r\n      $$.brush.empty = function () {\r\n          var selection = $$.brush.selection();\r\n          return !selection || selection[0] === selection[1];\r\n      };\r\n      return $$.brush.updateScale(scale);\r\n  };\r\n  ChartInternal.prototype.initSubchart = function () {\r\n      var $$ = this, config = $$.config, context = ($$.context = $$.svg\r\n          .append('g')\r\n          .attr('transform', $$.getTranslate('context')));\r\n      // set style\r\n      context.style('visibility', 'visible');\r\n      // Define g for chart area\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForSubchart)\r\n          .attr('class', CLASS.chart);\r\n      // Define g for bar chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n      // Define g for line chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n      // Add extent rect for Brush\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.brush);\r\n      // ATTENTION: This must be called AFTER chart added\r\n      // Add Axis\r\n      $$.axes.subx = context\r\n          .append('g')\r\n          .attr('class', CLASS.axisX)\r\n          .attr('transform', $$.getTranslate('subx'))\r\n          .attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis)\r\n          .style('visibility', config.subchart_axis_x_show ? 'visible' : 'hidden');\r\n  };\r\n  ChartInternal.prototype.initSubchartBrush = function () {\r\n      var $$ = this;\r\n      // Add extent rect for Brush\r\n      $$.initBrush($$.subX).updateExtent();\r\n      $$.context.select('.' + CLASS.brush).call($$.brush);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\r\n      var $$ = this, context = $$.context, config = $$.config, contextLineEnter, contextLine, contextBarEnter, contextBar, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$);\r\n      //-- Bar --//\r\n      contextBar = context\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets);\r\n      contextBarEnter = contextBar\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextBarEnter.merge(contextBar).attr('class', classChartBar);\r\n      // Bars for each data\r\n      contextBarEnter.append('g').attr('class', classBars);\r\n      //-- Line --//\r\n      contextLine = context\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets);\r\n      contextLineEnter = contextLine\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextLineEnter.merge(contextLine).attr('class', classChartLine);\r\n      // Lines for each data\r\n      contextLineEnter.append('g').attr('class', classLines);\r\n      // Area\r\n      contextLineEnter.append('g').attr('class', classAreas);\r\n      //-- Brush --//\r\n      context\r\n          .selectAll('.' + CLASS.brush + ' rect')\r\n          .attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\r\n  };\r\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextBar = $$.context\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data($$.barData.bind($$));\r\n      var contextBarEnter = contextBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classBar.bind($$))\r\n          .style('stroke', 'none')\r\n          .style('fill', $$.color);\r\n      contextBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextBar = contextBarEnter\r\n          .merge(contextBar)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextBar.transition(Math.random().toString()).duration(duration)\r\n          : this.contextBar)\r\n          .attr('d', drawBarOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextLine = $$.context\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var contextLineEnter = contextLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      contextLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextLine = contextLineEnter\r\n          .merge(contextLine)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextLine.transition(Math.random().toString()).duration(duration)\r\n          : this.contextLine)\r\n          .attr('d', drawLineOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var contextArea = $$.context\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var contextAreaEnter = contextArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      contextArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextArea.transition(Math.random().toString()).duration(duration)\r\n          : this.contextArea)\r\n          .attr('d', drawAreaOnSub)\r\n          .style('fill', this.color)\r\n          .style('opacity', this.orgAreaOpacity);\r\n  };\r\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\r\n      var $$ = this, d3 = $$.d3, drawAreaOnSub, drawBarOnSub, drawLineOnSub;\r\n      // reflect main chart to extent on subchart if zoomed\r\n      if (d3.event && d3.event.type === 'zoom') {\r\n          $$.brush.selectionAsValue($$.x.orgDomain());\r\n      }\r\n      // update subchart elements if needed\r\n      if (withSubchart) {\r\n          // extent rect\r\n          if (!$$.brush.empty()) {\r\n              $$.brush.selectionAsValue($$.x.orgDomain());\r\n          }\r\n          // setup drawer - MEMO: this must be called after axis updated\r\n          drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\r\n          drawBarOnSub = $$.generateDrawBar(barIndices, true);\r\n          drawLineOnSub = $$.generateDrawLine(lineIndices, true);\r\n          $$.updateBarForSubchart(duration);\r\n          $$.updateLineForSubchart(duration);\r\n          $$.updateAreaForSubchart(duration);\r\n          $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\r\n          $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\r\n          $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawForBrush = function () {\r\n      var $$ = this, x = $$.x, d3 = $$.d3, s;\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: $$.config.zoom_rescale,\r\n          withSubchart: false,\r\n          withUpdateXDomain: true,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      // update zoom transation binded to event rect\r\n      s = d3.event.selection || $$.brush.scale.range();\r\n      $$.main\r\n          .select('.' + CLASS.eventRect)\r\n          .call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\r\n      $$.config.subchart_onbrush.call($$.api, x.orgDomain());\r\n  };\r\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\r\n      var $$ = this, subXAxis;\r\n      if (transitions && transitions.axisSubX) {\r\n          subXAxis = transitions.axisSubX;\r\n      }\r\n      else {\r\n          subXAxis = $$.context.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              subXAxis = subXAxis.transition();\r\n          }\r\n      }\r\n      $$.context.attr('transform', $$.getTranslate('context'));\r\n      subXAxis.attr('transform', $$.getTranslate('subx'));\r\n  };\r\n  ChartInternal.prototype.getDefaultSelection = function () {\r\n      var $$ = this, config = $$.config, selection = isFunction(config.axis_x_selection)\r\n          ? config.axis_x_selection($$.getXDomain($$.data.targets))\r\n          : config.axis_x_selection;\r\n      if ($$.isTimeSeries()) {\r\n          selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\r\n      }\r\n      return selection;\r\n  };\r\n  ChartInternal.prototype.removeSubchart = function () {\r\n      var $$ = this;\r\n      $$.brush = null;\r\n      $$.context.remove();\r\n      $$.context = null;\r\n  };\n\n  ChartInternal.prototype.initText = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartTexts);\r\n      $$.mainText = $$.d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\r\n      var $$ = this, classChartText = $$.classChartText.bind($$), classTexts = $$.classTexts.bind($$), classFocus = $$.classFocus.bind($$);\r\n      var mainText = $$.main\r\n          .select('.' + CLASS.chartTexts)\r\n          .selectAll('.' + CLASS.chartText)\r\n          .data(targets);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartText)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      mainTextEnter.append('g').attr('class', classTexts);\r\n      mainTextEnter.merge(mainText).attr('class', function (d) {\r\n          return classChartText(d) + classFocus(d);\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\r\n      var $$ = this, config = $$.config, barOrLineData = $$.barOrLineData.bind($$), classText = $$.classText.bind($$);\r\n      var mainText = $$.main\r\n          .selectAll('.' + CLASS.texts)\r\n          .selectAll('.' + CLASS.text)\r\n          .data(barOrLineData);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('text')\r\n          .attr('class', classText)\r\n          .attr('text-anchor', function (d) {\r\n          return config.axis_rotated ? (d.value < 0 ? 'end' : 'start') : 'middle';\r\n      })\r\n          .style('stroke', 'none')\r\n          .attr('x', xForText)\r\n          .attr('y', yForText)\r\n          .style('fill', function (d) {\r\n          return $$.color(d);\r\n      })\r\n          .style('fill-opacity', 0);\r\n      $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\r\n          return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\r\n      });\r\n      mainText\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('fill-opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainText.transition(transition) : this.mainText)\r\n              .attr('x', xForText)\r\n              .attr('y', yForText)\r\n              .style('fill', this.color)\r\n              .style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\r\n      var dummy = this.d3\r\n          .select('body')\r\n          .append('div')\r\n          .classed('c3', true), svg = dummy\r\n          .append('svg')\r\n          .style('visibility', 'hidden')\r\n          .style('position', 'fixed')\r\n          .style('top', 0)\r\n          .style('left', 0), font = this.d3.select(element).style('font'), rect;\r\n      svg\r\n          .selectAll('.dummy')\r\n          .data([text])\r\n          .enter()\r\n          .append('text')\r\n          .classed(cls ? cls : '', true)\r\n          .style('font', font)\r\n          .text(text)\r\n          .each(function () {\r\n          rect = getBBox(this);\r\n      });\r\n      dummy.remove();\r\n      return rect;\r\n  };\r\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\r\n      var $$ = this, getAreaPoints = $$.generateGetAreaPoints(areaIndices, false), getBarPoints = $$.generateGetBarPoints(barIndices, false), getLinePoints = $$.generateGetLinePoints(lineIndices, false), getter = forX ? $$.getXForText : $$.getYForText;\r\n      return function (d, i) {\r\n          var getPoints = $$.isAreaType(d)\r\n              ? getAreaPoints\r\n              : $$.isBarType(d)\r\n                  ? getBarPoints\r\n                  : getLinePoints;\r\n          return getter.call($$, getPoints(d, i), d, this);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), xPos, padding;\r\n      if ($$.config.axis_rotated) {\r\n          padding = $$.isBarType(d) ? 4 : 6;\r\n          xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\r\n      }\r\n      else {\r\n          xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null) {\r\n          if (xPos > $$.width) {\r\n              xPos = $$.width - box.width;\r\n          }\r\n          else if (xPos < 0) {\r\n              xPos = 4;\r\n          }\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), yPos;\r\n      if ($$.config.axis_rotated) {\r\n          yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\r\n      }\r\n      else {\r\n          yPos = points[2][1];\r\n          if (d.value < 0 || (d.value === 0 && !$$.hasPositiveValue)) {\r\n              yPos += box.height;\r\n              if ($$.isBarType(d) && $$.isSafari()) {\r\n                  yPos -= 3;\r\n              }\r\n              else if (!$$.isBarType(d) && $$.isChrome()) {\r\n                  yPos += 3;\r\n              }\r\n          }\r\n          else {\r\n              yPos += $$.isBarType(d) ? -3 : -6;\r\n          }\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null && !$$.config.axis_rotated) {\r\n          if (yPos < box.height) {\r\n              yPos = box.height;\r\n          }\r\n          else if (yPos > this.height) {\r\n              yPos = this.height - 4;\r\n          }\r\n      }\r\n      return yPos;\r\n  };\n\n  ChartInternal.prototype.initTitle = function () {\r\n      var $$ = this;\r\n      $$.title = $$.svg\r\n          .append('text')\r\n          .text($$.config.title_text)\r\n          .attr('class', $$.CLASS.title);\r\n  };\r\n  ChartInternal.prototype.redrawTitle = function () {\r\n      var $$ = this;\r\n      $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\r\n  };\r\n  ChartInternal.prototype.xForTitle = function () {\r\n      var $$ = this, config = $$.config, position = config.title_position || 'left', x;\r\n      if (position.indexOf('right') >= 0) {\r\n          x =\r\n              $$.currentWidth -\r\n                  $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width -\r\n                  config.title_padding.right;\r\n      }\r\n      else if (position.indexOf('center') >= 0) {\r\n          x = Math.max(($$.currentWidth -\r\n              $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) /\r\n              2, 0);\r\n      }\r\n      else {\r\n          // left\r\n          x = config.title_padding.left;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.yForTitle = function () {\r\n      var $$ = this;\r\n      return ($$.config.title_padding.top +\r\n          $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node())\r\n              .height);\r\n  };\r\n  ChartInternal.prototype.getTitlePadding = function () {\r\n      var $$ = this;\r\n      return $$.yForTitle() + $$.config.title_padding.bottom;\r\n  };\n\n  function powerOfTen(d) {\r\n      return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\r\n  }\r\n  ChartInternal.prototype.drawColorScale = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], barWidth, barHeight, axis, points, legendAxis, axisScale, inverseScale, height;\r\n      barWidth = !isNaN(config.stanford_scaleWidth)\r\n          ? config.stanford_scaleWidth\r\n          : 20;\r\n      barHeight = 5;\r\n      if (barHeight < 0 || barWidth < 0) {\r\n          throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\r\n      }\r\n      height =\r\n          $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\r\n      points = d3.range(config.stanford_padding.bottom, height, barHeight);\r\n      inverseScale = d3\r\n          .scaleSequential(target.colors)\r\n          .domain([points[points.length - 1], points[0]]);\r\n      if ($$.colorScale) {\r\n          $$.colorScale.remove();\r\n      }\r\n      $$.colorScale = $$.svg\r\n          .append('g')\r\n          .attr('width', 50)\r\n          .attr('height', height)\r\n          .attr('class', CLASS.colorScale);\r\n      $$.colorScale\r\n          .append('g')\r\n          .attr('transform', \"translate(0, \" + config.stanford_padding.top + \")\")\r\n          .selectAll('bars')\r\n          .data(points)\r\n          .enter()\r\n          .append('rect')\r\n          .attr('y', function (d, i) { return i * barHeight; })\r\n          .attr('x', 0)\r\n          .attr('width', barWidth)\r\n          .attr('height', barHeight)\r\n          .attr('fill', function (d) {\r\n          return inverseScale(d);\r\n      });\r\n      // Legend Axis\r\n      axisScale = d3\r\n          .scaleLog()\r\n          .domain([target.minEpochs, target.maxEpochs])\r\n          .range([\r\n          points[0] +\r\n              config.stanford_padding.top +\r\n              points[points.length - 1] +\r\n              barHeight -\r\n              1,\r\n          points[0] + config.stanford_padding.top\r\n      ]);\r\n      legendAxis = d3.axisRight(axisScale);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\r\n      }\r\n      else if (isFunction(config.stanford_scaleFormat)) {\r\n          legendAxis.tickFormat(config.stanford_scaleFormat);\r\n      }\r\n      else {\r\n          legendAxis.tickFormat(d3.format('d'));\r\n      }\r\n      if (isFunction(config.stanford_scaleValues)) {\r\n          legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\r\n      }\r\n      // Draw Axis\r\n      axis = $$.colorScale\r\n          .append('g')\r\n          .attr('class', 'legend axis')\r\n          .attr('transform', \"translate(\" + barWidth + \",0)\")\r\n          .call(legendAxis);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          axis\r\n              .selectAll('.tick text')\r\n              .text(null)\r\n              .filter(powerOfTen)\r\n              .text(10)\r\n              .append('tspan')\r\n              .attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\r\n              .text(function (d) {\r\n              return Math.round(Math.log(d) / Math.LN10);\r\n          });\r\n      }\r\n      $$.colorScale.attr('transform', \"translate(\" + ($$.currentWidth - $$.xForColorScale()) + \", 0)\");\r\n  };\r\n  ChartInternal.prototype.xForColorScale = function () {\r\n      var $$ = this;\r\n      return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\r\n  };\r\n  ChartInternal.prototype.getColorScalePadding = function () {\r\n      var $$ = this;\r\n      return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\r\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\r\n      var $$ = this;\r\n      return $$.config.data_type === 'stanford';\r\n  };\r\n  ChartInternal.prototype.initStanfordData = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], epochs, maxEpochs, minEpochs;\r\n      // Make larger values appear on top\r\n      target.values.sort(compareEpochs);\r\n      // Get array of epochs\r\n      epochs = target.values.map(function (a) { return a.epochs; });\r\n      minEpochs = !isNaN(config.stanford_scaleMin)\r\n          ? config.stanford_scaleMin\r\n          : d3.min(epochs);\r\n      maxEpochs = !isNaN(config.stanford_scaleMax)\r\n          ? config.stanford_scaleMax\r\n          : d3.max(epochs);\r\n      if (minEpochs > maxEpochs) {\r\n          throw Error('Number of minEpochs has to be smaller than maxEpochs');\r\n      }\r\n      target.colors = isFunction(config.stanford_colors)\r\n          ? config.stanford_colors\r\n          : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\r\n      target.colorscale = d3\r\n          .scaleSequentialLog(target.colors)\r\n          .domain([minEpochs, maxEpochs]);\r\n      target.minEpochs = minEpochs;\r\n      target.maxEpochs = maxEpochs;\r\n  };\r\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\r\n      var $$ = this, target = $$.data.targets[0];\r\n      return target.colorscale(d.epochs);\r\n  };\r\n  // http://jsfiddle.net/Xotic750/KtzLq/\r\n  ChartInternal.prototype.getCentroid = function (points) {\r\n      var area = getRegionArea(points);\r\n      var x = 0, y = 0, i, j, f, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          f = point1.x * point2.y - point2.x * point1.y;\r\n          x += (point1.x + point2.x) * f;\r\n          y += (point1.y + point2.y) * f;\r\n      }\r\n      f = area * 6;\r\n      return {\r\n          x: x / f,\r\n          y: y / f\r\n      };\r\n  };\r\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\r\n      var $$ = this, labelX = $$.axis.getLabelText('x'), labelY = $$.axis.getLabelText('y');\r\n      return \"\\n      <tr><th>\" + (labelX ? sanitise(labelX) : 'x') + \"</th><th class='value'>\" + d.x + \"</th></tr>\\n      <tr><th>\" + (labelY ? sanitise(labelY) : 'y') + \"</th><th class='value'>\" + d.value + \"</th></tr>\\n    \";\r\n  };\r\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\r\n      var $$ = this, target = $$.data.targets[0], total, count;\r\n      total = target.values.reduce(function (accumulator, currentValue) { return accumulator + Number(currentValue.epochs); }, 0);\r\n      count = target.values.reduce(function (accumulator, currentValue) {\r\n          if (pointInRegion(currentValue, region)) {\r\n              return accumulator + Number(currentValue.epochs);\r\n          }\r\n          return accumulator;\r\n      }, 0);\r\n      return {\r\n          value: count,\r\n          percentage: count !== 0 ? ((count / total) * 100).toFixed(1) : 0\r\n      };\r\n  };\r\n  var getRegionArea = function (points) {\r\n      // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\r\n      var area = 0, i, j, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          area += point1.x * point2.y;\r\n          area -= point1.y * point2.x;\r\n      }\r\n      area /= 2;\r\n      return area;\r\n  };\r\n  var pointInRegion = function (point, region) {\r\n      // thanks to: http://bl.ocks.org/bycoffe/5575904\r\n      // ray-casting algorithm based on\r\n      // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n      var xi, yi, yj, xj, intersect, x = point.x, y = point.value, inside = false;\r\n      for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\r\n          xi = region[i].x;\r\n          yi = region[i].y;\r\n          xj = region[j].x;\r\n          yj = region[j].y;\r\n          intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n          if (intersect) {\r\n              inside = !inside;\r\n          }\r\n      }\r\n      return inside;\r\n  };\r\n  var compareEpochs = function (a, b) {\r\n      if (a.epochs < b.epochs) {\r\n          return -1;\r\n      }\r\n      if (a.epochs > b.epochs) {\r\n          return 1;\r\n      }\r\n      return 0;\r\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\r\n      var $$ = this;\r\n      // Avoid blocking eventRect\r\n      $$.stanfordElements = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.stanfordElements);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\r\n  };\r\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, stanfordLine, stanfordLineEnter, stanfordRegion, stanfordRegionEnter, stanfordText, stanfordTextEnter, xvCustom = $$.xvCustom.bind($$), yvCustom = $$.yvCustom.bind($$), countPointsInRegion = $$.countEpochsInRegion.bind($$);\r\n      // Stanford-Lines\r\n      stanfordLine = main\r\n          .select('.' + CLASS.stanfordLines)\r\n          .style('shape-rendering', 'geometricprecision')\r\n          .selectAll('.' + CLASS.stanfordLine)\r\n          .data(config.stanford_lines);\r\n      // enter\r\n      stanfordLineEnter = stanfordLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordLineEnter\r\n          .append('line')\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\r\n      $$.stanfordLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Text\r\n      stanfordText = main\r\n          .select('.' + CLASS.stanfordTexts)\r\n          .selectAll('.' + CLASS.stanfordText)\r\n          .data(config.stanford_texts);\r\n      // enter\r\n      stanfordTextEnter = stanfordText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordTextEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\r\n      $$.stanfordTexts\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .text(function (d) {\r\n          return d.content;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordText\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Regions\r\n      stanfordRegion = main\r\n          .select('.' + CLASS.stanfordRegions)\r\n          .selectAll('.' + CLASS.stanfordRegion)\r\n          .data(config.stanford_regions);\r\n      // enter\r\n      stanfordRegionEnter = stanfordRegion\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordRegionEnter\r\n          .append('polygon')\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', 0);\r\n      stanfordRegionEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return $$.getCentroid(d.points).x; })\r\n          .attr('y', function (d) { return $$.getCentroid(d.points).y; })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\r\n      $$.stanfordRegions\r\n          .select('polygon')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', function (d) {\r\n          return d.opacity ? d.opacity : 0.2;\r\n      });\r\n      $$.stanfordRegions\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) {\r\n          return config.axis_rotated\r\n              ? yvCustom($$.getCentroid(d.points), 'y')\r\n              : xvCustom($$.getCentroid(d.points), 'x');\r\n      })\r\n          .attr('y', function (d) {\r\n          return config.axis_rotated\r\n              ? xvCustom($$.getCentroid(d.points), 'x')\r\n              : yvCustom($$.getCentroid(d.points), 'y');\r\n      })\r\n          .text(function (d) {\r\n          if (d.text) {\r\n              var value, percentage, temp;\r\n              if ($$.isStanfordGraphType()) {\r\n                  temp = countPointsInRegion(d.points);\r\n                  value = temp.value;\r\n                  percentage = temp.percentage;\r\n              }\r\n              return d.text(value, percentage);\r\n          }\r\n          return '';\r\n      })\r\n          .attr('text-anchor', 'middle')\r\n          .attr('dominant-baseline', 'middle')\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\r\n      var $$ = this, config = $$.config, i;\r\n      $$.tooltip = $$.selectChart\r\n          .style('position', 'relative')\r\n          .append('div')\r\n          .attr('class', CLASS.tooltipContainer)\r\n          .style('position', 'absolute')\r\n          .style('pointer-events', 'none')\r\n          .style('display', 'none');\r\n      // Show tooltip if needed\r\n      if (config.tooltip_init_show) {\r\n          if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\r\n              config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\r\n              for (i = 0; i < $$.data.targets[0].values.length; i++) {\r\n                  if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\r\n                      break;\r\n                  }\r\n              }\r\n              config.tooltip_init_x = i;\r\n          }\r\n          $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\r\n              return $$.addName(d.values[config.tooltip_init_x]);\r\n          }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\r\n          $$.tooltip\r\n              .style('top', config.tooltip_init_position.top)\r\n              .style('left', config.tooltip_init_position.left)\r\n              .style('display', 'block');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipSortFunction = function () {\r\n      var $$ = this, config = $$.config;\r\n      if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\r\n          // if data are not grouped or if an order is specified\r\n          // for the tooltip values we sort them by their values\r\n          var order = config.tooltip_order;\r\n          if (order === undefined) {\r\n              order = config.data_order;\r\n          }\r\n          var valueOf = function (obj) {\r\n              return obj ? obj.value : null;\r\n          };\r\n          // if data are not grouped, we sort them by their value\r\n          if (isString(order) && order.toLowerCase() === 'asc') {\r\n              return function (a, b) {\r\n                  return valueOf(a) - valueOf(b);\r\n              };\r\n          }\r\n          else if (isString(order) && order.toLowerCase() === 'desc') {\r\n              return function (a, b) {\r\n                  return valueOf(b) - valueOf(a);\r\n              };\r\n          }\r\n          else if (isFunction(order)) {\r\n              // if the function is from data_order we need\r\n              // to wrap the returned function in order to format\r\n              // the sorted value to the expected format\r\n              var sortFunction = order;\r\n              if (config.tooltip_order === undefined) {\r\n                  sortFunction = function (a, b) {\r\n                      return order(a\r\n                          ? {\r\n                              id: a.id,\r\n                              values: [a]\r\n                          }\r\n                          : null, b\r\n                          ? {\r\n                              id: b.id,\r\n                              values: [b]\r\n                          }\r\n                          : null);\r\n                  };\r\n              }\r\n              return sortFunction;\r\n          }\r\n          else if (isArray(order)) {\r\n              return function (a, b) {\r\n                  return order.indexOf(a.id) - order.indexOf(b.id);\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          // if data are grouped, we follow the order of grouped targets\r\n          var ids = $$.orderTargets($$.data.targets).map(function (i) {\r\n              return i.id;\r\n          });\r\n          // if it was either asc or desc we need to invert the order\r\n          // returned by orderTargets\r\n          if ($$.isOrderAsc() || $$.isOrderDesc()) {\r\n              ids = ids.reverse();\r\n          }\r\n          return function (a, b) {\r\n              return ids.indexOf(a.id) - ids.indexOf(b.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n      var $$ = this, config = $$.config, titleFormat = config.tooltip_format_title || defaultTitleFormat, nameFormat = config.tooltip_format_name ||\r\n          function (name) {\r\n              return name;\r\n          }, text, i, title, value, name, bgcolor;\r\n      var valueFormat = config.tooltip_format_value;\r\n      if (!valueFormat) {\r\n          valueFormat = $$.isTargetNormalized(d.id)\r\n              ? function (v, ratio) { return (ratio * 100).toFixed(2) + \"%\"; }\r\n              : defaultValueFormat;\r\n      }\r\n      var tooltipSortFunction = this.getTooltipSortFunction();\r\n      if (tooltipSortFunction) {\r\n          d.sort(tooltipSortFunction);\r\n      }\r\n      for (i = 0; i < d.length; i++) {\r\n          if (!(d[i] && (d[i].value || d[i].value === 0))) {\r\n              continue;\r\n          }\r\n          if ($$.isStanfordGraphType()) {\r\n              // Custom tooltip for stanford plots\r\n              if (!text) {\r\n                  title = $$.getStanfordTooltipTitle(d[i]);\r\n                  text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\r\n              }\r\n              bgcolor = $$.getStanfordPointColor(d[i]);\r\n              name = sanitise(config.data_epochs); // Epochs key name\r\n              value = d[i].epochs;\r\n          }\r\n          else {\r\n              // Regular tooltip\r\n              if (!text) {\r\n                  title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\r\n                  text =\r\n                      \"<table class='\" +\r\n                          $$.CLASS.tooltip +\r\n                          \"'>\" +\r\n                          (title || title === 0\r\n                              ? \"<tr><th colspan='2'>\" + title + '</th></tr>'\r\n                              : '');\r\n              }\r\n              value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\r\n              if (value !== undefined) {\r\n                  // Skip elements when their name is set to null\r\n                  if (d[i].name === null) {\r\n                      continue;\r\n                  }\r\n                  name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\r\n                  bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\r\n              }\r\n          }\r\n          if (value !== undefined) {\r\n              text +=\r\n                  \"<tr class='\" +\r\n                      $$.CLASS.tooltipName +\r\n                      '-' +\r\n                      $$.getTargetSelectorSuffix(d[i].id) +\r\n                      \"'>\";\r\n              text +=\r\n                  \"<td class='name'><span style='background-color:\" +\r\n                      bgcolor +\r\n                      \"'></span>\" +\r\n                      name +\r\n                      '</td>';\r\n              text += \"<td class='value'>\" + value + '</td>';\r\n              text += '</tr>';\r\n          }\r\n      }\r\n      return text + '</table>';\r\n  };\r\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\r\n      var forArc = $$.hasArcType(), mouse = d3.mouse(element);\r\n      // Determin tooltip position\r\n      if (forArc) {\r\n          tooltipLeft =\r\n              ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\r\n          tooltipTop =\r\n              ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\r\n      }\r\n      else {\r\n          svgLeft = $$.getSvgLeft(true);\r\n          if (config.axis_rotated) {\r\n              tooltipLeft = svgLeft + mouse[0] + 100;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = $$.x(dataToShow[0].x) + 20;\r\n          }\r\n          else {\r\n              tooltipLeft =\r\n                  svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = mouse[1] + 15;\r\n          }\r\n          if (tooltipRight > chartRight) {\r\n              // 20 is needed for Firefox to keep tooltip width\r\n              tooltipLeft -= tooltipRight - chartRight + 20;\r\n          }\r\n          if (tooltipTop + tHeight > $$.currentHeight) {\r\n              tooltipTop -= tHeight + 30;\r\n          }\r\n      }\r\n      if (tooltipTop < 0) {\r\n          tooltipTop = 0;\r\n      }\r\n      return {\r\n          top: tooltipTop,\r\n          left: tooltipLeft\r\n      };\r\n  };\r\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\r\n      var $$ = this, config = $$.config;\r\n      var tWidth, tHeight, position;\r\n      var forArc = $$.hasArcType(), dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\r\n      if (dataToShow.length === 0 || !config.tooltip_show) {\r\n          $$.hideTooltip();\r\n          return;\r\n      }\r\n      $$.tooltip\r\n          .html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color))\r\n          .style('display', 'block');\r\n      // Get tooltip dimensions\r\n      tWidth = $$.tooltip.property('offsetWidth');\r\n      tHeight = $$.tooltip.property('offsetHeight');\r\n      position = positionFunction.call(this, dataToShow, tWidth, tHeight, element);\r\n      // Set tooltip\r\n      $$.tooltip\r\n          .style('top', position.top + 'px')\r\n          .style('left', position.left + 'px');\r\n  };\r\n  ChartInternal.prototype.hideTooltip = function () {\r\n      this.tooltip.style('display', 'none');\r\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\r\n      var $$ = this, config = $$.config;\r\n      $$.mapToTargetIds(targetIds).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = type === config.data_types[id];\r\n          config.data_types[id] = type;\r\n      });\r\n      if (!targetIds) {\r\n          config.data_type = type;\r\n      }\r\n  };\r\n  ChartInternal.prototype.hasType = function (type, targets) {\r\n      var $$ = this, types = $$.config.data_types, has = false;\r\n      targets = targets || $$.data.targets;\r\n      if (targets && targets.length) {\r\n          targets.forEach(function (target) {\r\n              var t = types[target.id];\r\n              if ((t && t.indexOf(type) >= 0) || (!t && type === 'line')) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else if (Object.keys(types).length) {\r\n          Object.keys(types).forEach(function (id) {\r\n              if (types[id] === type) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          has = $$.config.data_type === type;\r\n      }\r\n      return has;\r\n  };\r\n  ChartInternal.prototype.hasArcType = function (targets) {\r\n      return (this.hasType('pie', targets) ||\r\n          this.hasType('donut', targets) ||\r\n          this.hasType('gauge', targets));\r\n  };\r\n  ChartInternal.prototype.isLineType = function (d) {\r\n      var config = this.config, id = isString(d) ? d : d.id;\r\n      return (!config.data_types[id] ||\r\n          ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0);\r\n  };\r\n  ChartInternal.prototype.isStepType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isSplineType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isAreaType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return (['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >=\r\n          0);\r\n  };\r\n  ChartInternal.prototype.isBarType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'bar';\r\n  };\r\n  ChartInternal.prototype.isScatterType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'scatter';\r\n  };\r\n  ChartInternal.prototype.isStanfordType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'stanford';\r\n  };\r\n  ChartInternal.prototype.isPieType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'pie';\r\n  };\r\n  ChartInternal.prototype.isGaugeType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'gauge';\r\n  };\r\n  ChartInternal.prototype.isDonutType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'donut';\r\n  };\r\n  ChartInternal.prototype.isArcType = function (d) {\r\n      return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\r\n  };\r\n  ChartInternal.prototype.lineData = function (d) {\r\n      return this.isLineType(d) ? [d] : [];\r\n  };\r\n  ChartInternal.prototype.arcData = function (d) {\r\n      return this.isArcType(d.data) ? [d] : [];\r\n  };\r\n  /* not used\r\n   function scatterData(d) {\r\n   return isScatterType(d) ? d.values : [];\r\n   }\r\n   */\r\n  ChartInternal.prototype.barData = function (d) {\r\n      return this.isBarType(d) ? d.values : [];\r\n  };\r\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\r\n      return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d)\r\n          ? d.values\r\n          : [];\r\n  };\r\n  ChartInternal.prototype.barOrLineData = function (d) {\r\n      return this.isBarType(d) || this.isLineType(d) ? d.values : [];\r\n  };\n\n  ChartInternal.prototype.isSafari = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\r\n  };\r\n  ChartInternal.prototype.isChrome = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Chrome') >= 0;\r\n  };\n\n  ChartInternal.prototype.initZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, startEvent;\r\n      $$.zoom = d3\r\n          .zoom()\r\n          .on('start', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          startEvent = e;\r\n          config.zoom_onzoomstart.call($$.api, e);\r\n      })\r\n          .on('zoom', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          $$.redrawForZoom();\r\n          config.zoom_onzoom.call($$.api, $$.x.orgDomain());\r\n      })\r\n          .on('end', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          // if click, do nothing. otherwise, click interaction will be canceled.\r\n          if (e &&\r\n              startEvent.clientX === e.clientX &&\r\n              startEvent.clientY === e.clientY) {\r\n              return;\r\n          }\r\n          config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\r\n      });\r\n      $$.zoom.updateDomain = function () {\r\n          if (d3.event && d3.event.transform) {\r\n              if (config.axis_rotated && config.zoom_type === 'scroll' && d3.event.sourceEvent.type === 'mousemove') {\r\n                  // we're moving the mouse in a rotated chart with zoom = \"scroll\", so we need rescaleY (i.e. vertical)\r\n                  $$.x.domain(d3.event.transform.rescaleY($$.subX).domain());\r\n              }\r\n              else {\r\n                  $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\r\n              }\r\n          }\r\n          return this;\r\n      };\r\n      $$.zoom.updateExtent = function () {\r\n          this.scaleExtent([1, Infinity])\r\n              .translateExtent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ])\r\n              .extent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ]);\r\n          return this;\r\n      };\r\n      $$.zoom.update = function () {\r\n          return this.updateExtent().updateDomain();\r\n      };\r\n      return $$.zoom.updateExtent();\r\n  };\r\n  ChartInternal.prototype.zoomTransform = function (range) {\r\n      var $$ = this, s = [$$.x(range[0]), $$.x(range[1])];\r\n      return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\r\n  };\r\n  ChartInternal.prototype.initDragZoom = function () {\r\n      var $$ = this;\r\n      var d3 = $$.d3;\r\n      var config = $$.config;\r\n      var context = ($$.context = $$.svg);\r\n      var brushXPos = $$.margin.left + 20.5;\r\n      var brushYPos = $$.margin.top + 0.5;\r\n      if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\r\n          return;\r\n      }\r\n      var getZoomedDomain = function (selection) {\r\n          return selection && selection.map(function (x) { return $$.x.invert(x); });\r\n      };\r\n      var brush = ($$.dragZoomBrush = d3\r\n          .brushX()\r\n          .on('start', function () {\r\n          $$.api.unzoom();\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\r\n          config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\r\n      })\r\n          .on('brush', function () {\r\n          config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\r\n      })\r\n          .on('end', function () {\r\n          if (d3.event.selection == null) {\r\n              return;\r\n          }\r\n          var zoomedDomain = getZoomedDomain(d3.event.selection);\r\n          if (!config.zoom_disableDefaultBehavior) {\r\n              $$.api.zoom(zoomedDomain);\r\n          }\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\r\n          config.zoom_onzoomend.call($$.api, zoomedDomain);\r\n      }));\r\n      context\r\n          .append('g')\r\n          .classed(CLASS.dragZoom, true)\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')')\r\n          .call(brush);\r\n  };\r\n  ChartInternal.prototype.getZoomDomain = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, min = d3.min([$$.orgXDomain[0], config.zoom_x_min]), max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.redrawForZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, zoom = $$.zoom, x = $$.x;\r\n      if (!config.zoom_enabled) {\r\n          return;\r\n      }\r\n      if ($$.filterTargetsToShow($$.data.targets).length === 0) {\r\n          return;\r\n      }\r\n      zoom.update();\r\n      if (config.zoom_disableDefaultBehavior) {\r\n          return;\r\n      }\r\n      if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\r\n          x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\r\n      }\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: config.zoom_rescale,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\r\n          $$.cancelClick = true;\r\n      }\r\n  };\n\n  return c3;\n\n})));\n"]},"metadata":{},"sourceType":"script"}