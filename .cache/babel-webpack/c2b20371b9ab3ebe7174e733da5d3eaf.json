{"ast":null,"code":"import _classCallCheck from \"D:/queen-supermarket/Biz1Market_EXE/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/queen-supermarket/Biz1Market_EXE/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { __decorate, __metadata } from 'tslib';\nimport { Platform, PlatformModule } from '@angular/cdk/platform';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, Inject, ChangeDetectorRef, NgZone, Input, Output, NgModule } from '@angular/core';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { NzScrollService } from 'ng-zorro-antd/core/services';\nimport { InputNumber } from 'ng-zorro-antd/core/util';\nimport { Subject, fromEvent } from 'rxjs';\nimport { throttleTime, takeUntil } from 'rxjs/operators';\n/**\n * @fileoverview added by tsickle\n * Generated from: back-top.component.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ng-zorro-antd/core/config';\nimport * as ɵngcc2 from 'ng-zorro-antd/core/services';\nimport * as ɵngcc3 from '@angular/cdk/platform';\nimport * as ɵngcc4 from '@angular/common';\n\nfunction NzBackTopComponent_div_0_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelement(1, \"div\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NzBackTopComponent_div_0_ng_template_3_Template(rf, ctx) {}\n\nfunction NzBackTopComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function NzBackTopComponent_div_0_Template_div_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      var ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.clickBackTop();\n    });\n    ɵngcc0.ɵɵtemplate(1, NzBackTopComponent_div_0_ng_template_1_Template, 2, 0, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtemplate(3, NzBackTopComponent_div_0_ng_template_3_Template, 0, 0, \"ng-template\", 3);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var _r1 = ɵngcc0.ɵɵreference(2);\n\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"@fadeMotion\", undefined);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.nzTemplate || _r1);\n  }\n}\n\nvar NZ_CONFIG_COMPONENT_NAME = 'backTop';\n\nvar NzBackTopComponent = /*#__PURE__*/function () {\n  /**\n   * @param {?} doc\n   * @param {?} nzConfigService\n   * @param {?} scrollSrv\n   * @param {?} platform\n   * @param {?} cd\n   * @param {?} zone\n   */\n  function NzBackTopComponent(doc, nzConfigService, scrollSrv, platform, cd, zone) {\n    _classCallCheck(this, NzBackTopComponent);\n\n    this.doc = doc;\n    this.nzConfigService = nzConfigService;\n    this.scrollSrv = scrollSrv;\n    this.platform = platform;\n    this.cd = cd;\n    this.zone = zone;\n    this.scrollListenerDestroy$ = new Subject();\n    this.target = null;\n    this.visible = false;\n    this.nzVisibilityHeight = 400;\n    this.nzClick = new EventEmitter();\n  }\n  /**\n   * @return {?}\n   */\n\n\n  _createClass(NzBackTopComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.registerScrollEvent();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"clickBackTop\",\n    value: function clickBackTop() {\n      this.scrollSrv.scrollTo(this.getTarget(), 0);\n      this.nzClick.emit(true);\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"getTarget\",\n    value: function getTarget() {\n      return this.target || window;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      if (this.visible === this.scrollSrv.getScroll(this.getTarget()) > this.nzVisibilityHeight) {\n        return;\n      }\n\n      this.visible = !this.visible;\n      this.cd.detectChanges();\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"registerScrollEvent\",\n    value: function registerScrollEvent() {\n      var _this = this;\n\n      if (!this.platform.isBrowser) {\n        return;\n      }\n\n      this.scrollListenerDestroy$.next();\n      this.handleScroll();\n      this.zone.runOutsideAngular(\n      /**\n      * @return {?}\n      */\n      function () {\n        fromEvent(_this.getTarget(), 'scroll').pipe(throttleTime(50), takeUntil(_this.scrollListenerDestroy$)).subscribe(\n        /**\n        * @return {?}\n        */\n        function () {\n          return _this.handleScroll();\n        });\n      });\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.scrollListenerDestroy$.next();\n      this.scrollListenerDestroy$.complete();\n    }\n    /**\n     * @param {?} changes\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnChanges\",\n    value: function ngOnChanges(changes) {\n      var nzTarget = changes.nzTarget;\n\n      if (nzTarget) {\n        this.target = typeof this.nzTarget === 'string' ? this.doc.querySelector(this.nzTarget) : this.nzTarget;\n        this.registerScrollEvent();\n      }\n    }\n  }]);\n\n  return NzBackTopComponent;\n}();\n\nNzBackTopComponent.ɵfac = function NzBackTopComponent_Factory(t) {\n  return new (t || NzBackTopComponent)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.NzConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NzScrollService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.Platform), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n};\n\nNzBackTopComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n  type: NzBackTopComponent,\n  selectors: [[\"nz-back-top\"]],\n  inputs: {\n    nzVisibilityHeight: \"nzVisibilityHeight\",\n    nzTemplate: \"nzTemplate\",\n    nzTarget: \"nzTarget\"\n  },\n  outputs: {\n    nzClick: \"nzClick\"\n  },\n  exportAs: [\"nzBackTop\"],\n  features: [ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"ant-back-top\", 3, \"click\", 4, \"ngIf\"], [1, \"ant-back-top\", 3, \"click\"], [\"defaultContent\", \"\"], [3, \"ngTemplateOutlet\"], [1, \"ant-back-top-content\"], [1, \"ant-back-top-icon\"]],\n  template: function NzBackTopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵtemplate(0, NzBackTopComponent_div_0_Template, 4, 2, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.visible);\n    }\n  },\n  directives: [ɵngcc4.NgIf, ɵngcc4.NgTemplateOutlet],\n  encapsulation: 2,\n  data: {\n    animation: [fadeMotion]\n  },\n  changeDetection: 0\n});\n/** @nocollapse */\n\nNzBackTopComponent.ctorParameters = function () {\n  return [{\n    type: undefined,\n    decorators: [{\n      type: Inject,\n      args: [DOCUMENT]\n    }]\n  }, {\n    type: NzConfigService\n  }, {\n    type: NzScrollService\n  }, {\n    type: Platform\n  }, {\n    type: ChangeDetectorRef\n  }, {\n    type: NgZone\n  }];\n};\n\nNzBackTopComponent.propDecorators = {\n  nzTemplate: [{\n    type: Input\n  }],\n  nzVisibilityHeight: [{\n    type: Input\n  }],\n  nzTarget: [{\n    type: Input\n  }],\n  nzClick: [{\n    type: Output\n  }]\n};\n\n__decorate([WithConfig(NZ_CONFIG_COMPONENT_NAME), InputNumber(), __metadata(\"design:type\", Number)], NzBackTopComponent.prototype, \"nzVisibilityHeight\", void 0);\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzBackTopComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-back-top',\n      exportAs: 'nzBackTop',\n      animations: [fadeMotion],\n      template: \"\\n    <div class=\\\"ant-back-top\\\" (click)=\\\"clickBackTop()\\\" @fadeMotion *ngIf=\\\"visible\\\">\\n      <ng-template #defaultContent>\\n        <div class=\\\"ant-back-top-content\\\">\\n          <div class=\\\"ant-back-top-icon\\\"></div>\\n        </div>\\n      </ng-template>\\n      <ng-template [ngTemplateOutlet]=\\\"nzTemplate || defaultContent\\\"></ng-template>\\n    </div>\\n  \",\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      preserveWhitespaces: false\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: ɵngcc1.NzConfigService\n    }, {\n      type: ɵngcc2.NzScrollService\n    }, {\n      type: ɵngcc3.Platform\n    }, {\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: ɵngcc0.NgZone\n    }];\n  }, {\n    nzVisibilityHeight: [{\n      type: Input\n    }],\n    nzClick: [{\n      type: Output\n    }],\n    nzTemplate: [{\n      type: Input\n    }],\n    nzTarget: [{\n      type: Input\n    }]\n  });\n})();\n\nif (false) {\n  /** @type {?} */\n  NzBackTopComponent.ngAcceptInputType_nzVisibilityHeight;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.scrollListenerDestroy$;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.target;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.visible;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.nzTemplate;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.nzVisibilityHeight;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.nzTarget;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.nzClick;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.doc;\n  /** @type {?} */\n\n  NzBackTopComponent.prototype.nzConfigService;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.scrollSrv;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.platform;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.cd;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NzBackTopComponent.prototype.zone;\n}\n/**\n * @fileoverview added by tsickle\n * Generated from: back-top.module.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar NzBackTopModule = /*#__PURE__*/_createClass(function NzBackTopModule() {\n  _classCallCheck(this, NzBackTopModule);\n});\n\nNzBackTopModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n  type: NzBackTopModule\n});\nNzBackTopModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n  factory: function NzBackTopModule_Factory(t) {\n    return new (t || NzBackTopModule)();\n  },\n  imports: [[CommonModule, PlatformModule]]\n});\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzBackTopModule, {\n    declarations: function declarations() {\n      return [NzBackTopComponent];\n    },\n    imports: function imports() {\n      return [CommonModule, PlatformModule];\n    },\n    exports: function exports() {\n      return [NzBackTopComponent];\n    }\n  });\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzBackTopModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [NzBackTopComponent],\n      exports: [NzBackTopComponent],\n      imports: [CommonModule, PlatformModule]\n    }]\n  }], null, null);\n})();\n/**\n * @fileoverview added by tsickle\n * Generated from: public-api.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * Generated from: ng-zorro-antd-back-top.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { NzBackTopComponent, NzBackTopModule };","map":{"version":3,"sources":["ng-zorro-antd/back-top/back-top.component.ts","ng-zorro-antd/back-top/back-top.module.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { NzScrollService } from 'ng-zorro-antd/core/services';\nimport { NumberInput, NzSafeAny } from 'ng-zorro-antd/core/types';\nimport { InputNumber } from 'ng-zorro-antd/core/util';\n\nimport { fromEvent, Subject } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\n\nconst NZ_CONFIG_COMPONENT_NAME = 'backTop';\n\n@Component({\n  selector: 'nz-back-top',\n  exportAs: 'nzBackTop',\n  animations: [fadeMotion],\n  template: `\n    <div class=\"ant-back-top\" (click)=\"clickBackTop()\" @fadeMotion *ngIf=\"visible\">\n      <ng-template #defaultContent>\n        <div class=\"ant-back-top-content\">\n          <div class=\"ant-back-top-icon\"></div>\n        </div>\n      </ng-template>\n      <ng-template [ngTemplateOutlet]=\"nzTemplate || defaultContent\"></ng-template>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  preserveWhitespaces: false\n})\nexport class NzBackTopComponent implements OnInit, OnDestroy, OnChanges {\n  static ngAcceptInputType_nzVisibilityHeight: NumberInput;\n\n  private scrollListenerDestroy$ = new Subject();\n  private target: HTMLElement | null = null;\n\n  visible: boolean = false;\n\n  @Input() nzTemplate?: TemplateRef<void>;\n  @Input() @WithConfig(NZ_CONFIG_COMPONENT_NAME) @InputNumber() nzVisibilityHeight: number = 400;\n  @Input() nzTarget?: string | HTMLElement;\n  @Output() readonly nzClick: EventEmitter<boolean> = new EventEmitter();\n\n  constructor(\n    @Inject(DOCUMENT) private doc: NzSafeAny,\n    public nzConfigService: NzConfigService,\n    private scrollSrv: NzScrollService,\n    private platform: Platform,\n    private cd: ChangeDetectorRef,\n    private zone: NgZone\n  ) {}\n\n  ngOnInit(): void {\n    this.registerScrollEvent();\n  }\n\n  clickBackTop(): void {\n    this.scrollSrv.scrollTo(this.getTarget(), 0);\n    this.nzClick.emit(true);\n  }\n\n  private getTarget(): HTMLElement | Window {\n    return this.target || window;\n  }\n\n  private handleScroll(): void {\n    if (this.visible === this.scrollSrv.getScroll(this.getTarget()) > this.nzVisibilityHeight) {\n      return;\n    }\n    this.visible = !this.visible;\n    this.cd.detectChanges();\n  }\n\n  private registerScrollEvent(): void {\n    if (!this.platform.isBrowser) {\n      return;\n    }\n    this.scrollListenerDestroy$.next();\n    this.handleScroll();\n    this.zone.runOutsideAngular(() => {\n      fromEvent(this.getTarget(), 'scroll')\n        .pipe(throttleTime(50), takeUntil(this.scrollListenerDestroy$))\n        .subscribe(() => this.handleScroll());\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.scrollListenerDestroy$.next();\n    this.scrollListenerDestroy$.complete();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { nzTarget } = changes;\n    if (nzTarget) {\n      this.target = typeof this.nzTarget === 'string' ? this.doc.querySelector(this.nzTarget) : this.nzTarget;\n      this.registerScrollEvent();\n    }\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NzBackTopComponent } from './back-top.component';\n\n@NgModule({\n  declarations: [NzBackTopComponent],\n  exports: [NzBackTopComponent],\n  imports: [CommonModule, PlatformModule]\n})\nexport class NzBackTopModule {}\n"]},"metadata":{},"sourceType":"module"}