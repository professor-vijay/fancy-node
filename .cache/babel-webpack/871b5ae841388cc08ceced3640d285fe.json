{"ast":null,"code":"import _classCallCheck from \"D:/queen-supermarket/Biz1Market_EXE/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/queen-supermarket/Biz1Market_EXE/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { EventEmitter, Component, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, Renderer2, ElementRef, NgZone, Output, Input, Directive, HostListener, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction NestableComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction NestableComponent_ng_template_1_li_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction NestableComponent_ng_template_1_li_1_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nvar _c0 = function _c0(a0, a1) {\n  return {\n    nestable: a0,\n    depth: a1\n  };\n};\n\nfunction NestableComponent_ng_template_1_li_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NestableComponent_ng_template_1_li_1_ng_container_2_ng_container_1_Template, 1, 0, \"ng-container\", 0);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var item_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    var depth_r6 = ɵngcc0.ɵɵnextContext().depth;\n    ɵngcc0.ɵɵnextContext();\n\n    var _r1 = ɵngcc0.ɵɵreference(2);\n\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction2(2, _c0, item_r8.children, depth_r6 + 1));\n  }\n}\n\nvar _c1 = function _c1(a0, a1, a2) {\n  return {\n    nestable: a0,\n    item: a1,\n    depth: a2\n  };\n};\n\nfunction NestableComponent_ng_template_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 4);\n    ɵngcc0.ɵɵtemplate(1, NestableComponent_ng_template_1_li_1_ng_container_1_Template, 1, 0, \"ng-container\", 0);\n    ɵngcc0.ɵɵtemplate(2, NestableComponent_ng_template_1_li_1_ng_container_2_Template, 2, 5, \"ng-container\", 5);\n    ɵngcc0.ɵɵelement(3, \"ul\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var item_r8 = ctx.$implicit;\n    var ctx_r14 = ɵngcc0.ɵɵnextContext();\n    var nestable_r5 = ctx_r14.nestable;\n    var depth_r6 = ctx_r14.depth;\n    var ctx_r7 = ɵngcc0.ɵɵnextContext();\n\n    var _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵclassMap(ctx_r7.options.itemClass);\n    ɵngcc0.ɵɵproperty(\"id\", item_r8.$$id);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction3(10, _c1, nestable_r5, item_r8, depth_r6));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r8.children && item_r8.$$expanded);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassMap(ctx_r7.options.listClass);\n    ɵngcc0.ɵɵstyleProp(\"padding-left\", ctx_r7.options.threshold, \"px\");\n  }\n}\n\nfunction NestableComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"ul\");\n    ɵngcc0.ɵɵtemplate(1, NestableComponent_ng_template_1_li_1_Template, 4, 14, \"li\", 3);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var nestable_r5 = ctx.nestable;\n    var depth_r6 = ctx.depth;\n    var ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassMap(ctx_r2.options.listClass);\n    ɵngcc0.ɵɵstyleProp(\"padding-left\", depth_r6 ? ctx_r2.options.threshold : 0, \"px\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", nestable_r5);\n  }\n}\n\nfunction NestableComponent_ng_template_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nvar _c2 = function _c2(a0, a1) {\n  return {\n    item: a0,\n    parentList: a1\n  };\n};\n\nvar _c3 = function _c3(a0, a1) {\n  return {\n    $implicit: a0,\n    depth: a1\n  };\n};\n\nfunction NestableComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r20 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵlistener(\"mousedown\", function NestableComponent_ng_template_3_Template_div_mousedown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r20);\n      var item_r16 = ctx.item;\n      var parentList_r15 = ctx.nestable;\n      var ctx_r19 = ɵngcc0.ɵɵnextContext();\n      return ctx_r19.dragStartFromItem($event, item_r16, parentList_r15);\n    });\n    ɵngcc0.ɵɵtemplate(1, NestableComponent_ng_template_3_ng_container_1_Template, 1, 0, \"ng-container\", 0);\n    ɵngcc0.ɵɵelement(2, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var parentList_r15 = ctx.nestable;\n    var item_r16 = ctx.item;\n    var depth_r17 = ctx.depth;\n    var ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r4.template)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction2(5, _c3, ɵngcc0.ɵɵpureFunction2(2, _c2, item_r16, parentList_r15), depth_r17));\n  }\n}\n\nvar _c4 = function _c4(a0) {\n  return {\n    nestable: a0,\n    depth: 0\n  };\n};\n\nvar _traverseChildren =\n/**\n* @param {?} tree\n* @param {?} callback\n* @param {?=} parent\n* @return {?}\n*/\nfunction _traverseChildren(tree, callback) {\n  var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  for (var i = 0; i < tree.length; i++) {\n    /** @type {?} */\n    var item = tree[i];\n\n    if (typeof item === 'undefined') {\n      continue;\n    }\n    /** @type {?} */\n\n\n    var callbackResult = callback(item, parent);\n\n    if (callbackResult) {\n      break;\n    }\n\n    if (item.children) {\n      _traverseChildren(item.children, callback, item);\n    }\n  }\n};\n/** @type {?} */\n\n\nvar _insertAfter =\n/**\n* @param {?} newNode\n* @param {?} referenceNode\n* @return {?}\n*/\nfunction _insertAfter(newNode, referenceNode) {\n  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n};\n/** @type {?} */\n\n\nvar _replace =\n/**\n* @param {?} newNode\n* @param {?} referenceNode\n* @return {?}\n*/\nfunction _replace(newNode, referenceNode) {\n  referenceNode.parentNode.replaceChild(newNode, referenceNode);\n};\n/** @type {?} */\n\n\nvar _replaceTargetWithElements =\n/**\n* @param {?} target\n* @param {?} elements\n* @return {?}\n*/\nfunction _replaceTargetWithElements(target, elements) {\n  /** @type {?} */\n  var i = elements.length;\n\n  if (target.parentNode) {\n    while (i--) {\n      target.parentNode.insertBefore(elements[i], target);\n    } /// remove the target.\n\n\n    target.parentNode.removeChild(target);\n  }\n};\n/** @type {?} */\n\n\nvar _getParents =\n/**\n* @param {?} el\n* @param {?=} parentSelector\n* @return {?}\n*/\nfunction _getParents(el) {\n  var parentSelector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.body;\n\n  /** @type {?} */\n  var parents = [];\n  /** @type {?} */\n\n  var parentNode = el.parentNode;\n\n  while (parentNode !== parentSelector) {\n    /** @type {?} */\n    var o = parentNode;\n\n    if (!parentNode) {\n      break;\n    }\n\n    if (parentNode.tagName === parentSelector.tagName) {\n      parents.push(o);\n    }\n\n    parentNode = o.parentNode;\n  }\n\n  parents.push(parentSelector); // Push that parentSelector you wanted to stop at\n\n  return parents;\n};\n/** @type {?} */\n\n\nvar _closest =\n/**\n* @param {?} el\n* @param {?} selector\n* @return {?}\n*/\nfunction _closest(el, selector) {\n  /** @type {?} */\n  var matchesFn; // find vendor prefix\n\n  ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(\n  /**\n  * @param {?} fn\n  * @return {?}\n  */\n  function (fn) {\n    if (typeof document.body[fn] === 'function') {\n      matchesFn = fn;\n      return true;\n    }\n\n    return false;\n  });\n  /** @type {?} */\n\n  var parent; // traverse parents\n\n  while (el) {\n    parent = el.parentElement;\n\n    if (parent === null) {\n      break;\n    }\n    /** @type {?} */\n\n\n    var matches = parent[matchesFn](selector);\n\n    if (parent && matches) {\n      return parent;\n    }\n\n    el = parent;\n  }\n\n  return null;\n};\n/** @type {?} */\n\n\nvar _offset =\n/**\n* @param {?} elem\n* @return {?}\n*/\nfunction _offset(elem) {\n  /** @type {?} */\n  var box = {\n    top: 0,\n    left: 0\n  }; // BlackBerry 5, iOS 3 (original iPhone)\n\n  if (typeof elem.getBoundingClientRect !== undefined) {\n    box = elem.getBoundingClientRect();\n  }\n\n  return {\n    top: box.top + (window.pageYOffset || elem.scrollTop) - (elem.clientTop || 0),\n    left: box.left + (window.pageXOffset || elem.scrollLeft) - (elem.clientLeft || 0)\n  };\n};\n/** @type {?} */\n\n\nvar _findObjectInTree =\n/**\n* @param {?} array\n* @param {?} id\n* @return {?}\n*/\nfunction _findObjectInTree(array, id) {\n  /** @type {?} */\n  var result = null;\n\n  _traverseChildren(array,\n  /**\n  * @param {?} item\n  * @return {?}\n  */\n  function (item) {\n    if (item['$$id'] === Number.parseInt(id)) {\n      result = item;\n      return true;\n    }\n  });\n\n  return result;\n};\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\n\nvar REGISTER_HANDLE = 'NESTABLE_DRAG_HANDLE_REGISTER';\n/** @type {?} */\n\nvar DRAG_START = 'NESTABLE_DRAG_HANDLE_START';\n/** @type {?} */\n\nvar EXPAND_COLLAPSE = 'NESTABLE_EXPAND_COLLAPSE_EVENT';\n/** @type {?} */\n\nvar defaultSettings =\n/** @type {?} */\n{\n  listNodeName: 'ul',\n  itemNodeName: 'li',\n  rootClass: 'dd',\n  listClass: 'dd-list',\n  itemClass: 'dd-item',\n  dragClass: 'dd-dragel',\n  handleClass: 'dd-handle',\n  collapsedClass: 'dd-collapsed',\n  placeClass: 'dd-placeholder',\n  group: 0,\n  // TODO\n  maxDepth: 5,\n  threshold: 20,\n  fixedDepth: false,\n  // fixed item's depth\n  exportCollapsed: true,\n  // TODO\n  disableDrag: false\n};\n/** @type {?} */\n\nvar mouse = {\n  moving: 0,\n  offsetX: 0,\n  offsetY: 0,\n  startX: 0,\n  startY: 0,\n  lastX: 0,\n  lastY: 0,\n  nowX: 0,\n  nowY: 0,\n  distX: 0,\n  distY: 0,\n  dirAx: 0,\n  dirX: 0,\n  dirY: 0,\n  lastDirX: 0,\n  lastDirY: 0,\n  distAxX: 0,\n  distAxY: 0\n};\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\nvar PX = 'px';\n\nvar ɵ0 =\n/**\n* @return {?}\n*/\nfunction ɵ0() {\n  /** @type {?} */\n  var el = document.createElement('div');\n  /** @type {?} */\n\n  var docEl = document.documentElement;\n\n  if (!('pointerEvents' in el.style)) {\n    return false;\n  }\n\n  el.style.pointerEvents = 'auto';\n  el.style.pointerEvents = 'x';\n  docEl.appendChild(el);\n  /** @type {?} */\n\n  var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';\n  docEl.removeChild(el);\n  return !!supports;\n};\n/** @type {?} */\n\n\nvar hasPointerEvents = ɵ0();\n\nvar NestableComponent = /*#__PURE__*/function () {\n  /**\n   * @param {?} ref\n   * @param {?} renderer\n   * @param {?} el\n   * @param {?} zone\n   */\n  function NestableComponent(ref, renderer, el, zone) {\n    _classCallCheck(this, NestableComponent);\n\n    this.ref = ref;\n    this.renderer = renderer;\n    this.el = el;\n    this.zone = zone;\n    this.listChange = new EventEmitter();\n    this.drop = new EventEmitter();\n    this.drag = new EventEmitter();\n    this.disclosure = new EventEmitter();\n    this.options = defaultSettings;\n    this.disableDrag = false;\n    this.dragRootEl = null;\n    this.dragEl = null;\n    this.dragModel = null;\n    this.moving = false;\n    /**\n     * Dragged element contains children, and those children contain other children and so on...\n     * This property gives you the number of generations contained within the dragging item.\n     */\n\n    this.dragDepth = 0;\n    /**\n     * The depth of dragging item relative to element root (ngx-nestable)\n     */\n\n    this.relativeDepth = 0;\n    this.hasNewRoot = false;\n    this.pointEl = null;\n    this.items = [];\n    this._componentActive = false;\n    this._mouse = Object.assign({}, mouse);\n    this._list = [];\n    this._itemId = 0;\n    this._registerHandleDirective = false;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  _createClass(NestableComponent, [{\n    key: \"list\",\n    get: function get() {\n      return this._list;\n    }\n    /**\n     * @param {?} list\n     * @return {?}\n     */\n    ,\n    set: function set(list) {\n      this._list = list;\n\n      this._generateItemIds();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      // set/extend default options\n      this._componentActive = true;\n      /** @type {?} */\n\n      var optionKeys = Object.keys(defaultSettings);\n\n      for (var _i = 0, _optionKeys = optionKeys; _i < _optionKeys.length; _i++) {\n        var key = _optionKeys[_i];\n\n        if (typeof this.options[key] === 'undefined') {\n          this.options[key] = defaultSettings[key];\n        }\n      }\n\n      this._generateItemIds();\n\n      this._generateItemExpanded();\n\n      this._createHandleListener();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {}\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_generateItemIds\",\n    value: function _generateItemIds() {\n      var _this = this;\n\n      _traverseChildren(this._list,\n      /**\n      * @param {?} item\n      * @return {?}\n      */\n      function (item) {\n        item['$$id'] = _this._itemId++;\n      });\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_generateItemExpanded\",\n    value: function _generateItemExpanded() {\n      _traverseChildren(this._list,\n      /**\n      * @param {?} item\n      * @return {?}\n      */\n      function (item) {\n        if (typeof item.expanded === 'undefined') {\n          item['$$expanded'] = true;\n        } else {\n          item['$$expanded'] = item.expanded;\n        }\n      });\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_createHandleListener\",\n    value: function _createHandleListener() {\n      var _this2 = this;\n\n      this.renderer.listen(this.el.nativeElement, REGISTER_HANDLE,\n      /**\n      * @return {?}\n      */\n      function () {\n        _this2._registerHandleDirective = true;\n      });\n      this.renderer.listen(this.el.nativeElement, DRAG_START,\n      /**\n      * @param {?} data\n      * @return {?}\n      */\n      function (data) {\n        _this2.dragStart(data.detail.event, data.detail.param.item, data.detail.param.parentList);\n      });\n      this.renderer.listen(this.el.nativeElement, EXPAND_COLLAPSE,\n      /**\n      * @param {?} data\n      * @return {?}\n      */\n      function (data) {\n        _this2.disclosure.emit({\n          item: data.detail.item,\n          expanded: data.detail.item['$$expanded']\n        });\n      });\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @param {?} dragItem\n     * @return {?}\n     */\n\n  }, {\n    key: \"_createDragClone\",\n    value: function _createDragClone(event, dragItem) {\n      this._mouseStart(event, dragItem);\n\n      if (!this._registerHandleDirective) {\n        this._mouse.offsetY = dragItem.nextElementSibling ? dragItem.nextElementSibling.clientHeight / 2 : dragItem.clientHeight / 2;\n      } // create drag clone\n\n\n      this.dragEl = document.createElement(this.options.listNodeName);\n      document.body.appendChild(this.dragEl);\n      this.renderer.addClass(this.dragEl, this.options.dragClass); // add drag clone to body and set css\n\n      this.renderer.setStyle(this.dragEl, 'left', event.pageX - this._mouse.offsetX + PX);\n      this.renderer.setStyle(this.dragEl, 'top', event.pageY - this._mouse.offsetY + PX);\n      this.renderer.setStyle(this.dragEl, 'position', 'absolute');\n      this.renderer.setStyle(this.dragEl, 'z-index', 9999);\n      this.renderer.setStyle(this.dragEl, 'pointer-events', 'none');\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @param {?} dragItem\n     * @return {?}\n     */\n\n  }, {\n    key: \"_createPlaceholder\",\n    value: function _createPlaceholder(event, dragItem) {\n      this._placeholder = document.createElement('div');\n\n      this._placeholder.classList.add(this.options.placeClass);\n\n      _insertAfter(this._placeholder, dragItem);\n\n      dragItem.parentNode.removeChild(dragItem);\n      this.dragEl.appendChild(dragItem);\n      this.dragRootEl = dragItem;\n    }\n    /**\n     * Sets depth proerties (relative and drag)\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_calculateDepth\",\n    value: function _calculateDepth() {\n      // total depth of dragging item\n\n      /** @type {?} */\n      var depth;\n      /** @type {?} */\n\n      var items = this.dragEl.querySelectorAll(this.options.itemNodeName);\n\n      for (var i = 0; i < items.length; i++) {\n        depth = _getParents(items[i], this.dragEl).length;\n\n        if (depth > this.dragDepth) {\n          this.dragDepth = depth;\n        }\n      } // depth relative to root\n\n\n      this.relativeDepth = _getParents(this._placeholder, this.el.nativeElement.querySelector(this.options.listNodeName)).length;\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @param {?} dragItem\n     * @return {?}\n     */\n\n  }, {\n    key: \"_mouseStart\",\n    value: function _mouseStart(event, dragItem) {\n      this._mouse.offsetX = event.pageX - _offset(dragItem).left;\n      this._mouse.offsetY = event.pageY - _offset(dragItem).top;\n      this._mouse.startX = this._mouse.lastX = event.pageX;\n      this._mouse.startY = this._mouse.lastY = event.pageY;\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"_mouseUpdate\",\n    value: function _mouseUpdate(event) {\n      // mouse position last events\n      this._mouse.lastX = this._mouse.nowX;\n      this._mouse.lastY = this._mouse.nowY; // mouse position this events\n\n      this._mouse.nowX = event.pageX;\n      this._mouse.nowY = event.pageY; // distance mouse moved between events\n\n      this._mouse.distX = this._mouse.nowX - this._mouse.lastX;\n      this._mouse.distY = this._mouse.nowY - this._mouse.lastY; // direction mouse was moving\n\n      this._mouse.lastDirX = this._mouse.dirX;\n      this._mouse.lastDirY = this._mouse.dirY; // direction mouse is now moving (on both axis)\n\n      this._mouse.dirX = this._mouse.distX === 0 ? 0 : this._mouse.distX > 0 ? 1 : -1;\n      this._mouse.dirY = this._mouse.distY === 0 ? 0 : this._mouse.distY > 0 ? 1 : -1;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_showMasks\",\n    value: function _showMasks() {\n      /** @type {?} */\n      var masks = this.el.nativeElement.getElementsByClassName('nestable-item-mask');\n\n      for (var i = 0; i < masks.length; i++) {\n        masks[i].style.display = 'block';\n      }\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"_hideMasks\",\n    value: function _hideMasks() {\n      /** @type {?} */\n      var masks = this.el.nativeElement.getElementsByClassName('nestable-item-mask');\n\n      for (var i = 0; i < masks.length; i++) {\n        masks[i].style.display = 'none';\n      }\n    }\n    /**\n     * calc mouse traverse distance on axis\n     * @private\n     * @param {?} m - mouse\n     * @return {?}\n     */\n\n  }, {\n    key: \"_calcMouseDistance\",\n    value: function _calcMouseDistance(m) {\n      m.distAxX += Math.abs(m.distX);\n\n      if (m.dirX !== 0 && m.dirX !== m.lastDirX) {\n        m.distAxX = 0;\n      }\n\n      m.distAxY += Math.abs(m.distY);\n\n      if (m.dirY !== 0 && m.dirY !== m.lastDirY) {\n        m.distAxY = 0;\n      }\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"_move\",\n    value: function _move(event) {\n      /** @type {?} */\n      var depth;\n      /** @type {?} */\n\n      var list;\n      /** @type {?} */\n\n      var dragRect = this.dragEl.getBoundingClientRect();\n      this.renderer.setStyle(this.dragEl, 'left', event.pageX - this._mouse.offsetX + PX);\n      this.renderer.setStyle(this.dragEl, 'top', event.pageY - this._mouse.offsetY + PX);\n\n      this._mouseUpdate(event); // axis mouse is now moving on\n\n      /** @type {?} */\n\n\n      var newAx = Math.abs(this._mouse.distX) > Math.abs(this._mouse.distY) ? 1 : 0; // do nothing on first move\n\n      if (!this._mouse.moving) {\n        this._mouse.dirAx = newAx;\n        this._mouse.moving = 1;\n        return;\n      } // calc distance moved on this axis (and direction)\n\n\n      if (this._mouse.dirAx !== newAx) {\n        this._mouse.distAxX = 0;\n        this._mouse.distAxY = 0;\n      } else {\n        this._calcMouseDistance(this._mouse);\n      }\n\n      this._mouse.dirAx = newAx; // find list item under cursor\n\n      if (!hasPointerEvents) {\n        this.dragEl.style.visibility = 'hidden';\n      }\n      /** @type {?} */\n\n\n      var pointEl = document.elementFromPoint(event.pageX - document.body.scrollLeft, event.pageY - (window.pageYOffset || document.documentElement.scrollTop));\n\n      if (!hasPointerEvents) {\n        this.dragEl.style.visibility = 'visible';\n      }\n\n      if (pointEl && (pointEl.classList.contains('nestable-item-mask') || pointEl.classList.contains(this.options.placeClass))) {\n        this.pointEl = pointEl.parentElement.parentElement;\n      } else {\n        return;\n      }\n      /**\n       * move horizontal\n       */\n\n\n      if (!this.options.fixedDepth && this._mouse.dirAx && this._mouse.distAxX >= this.options.threshold) {\n        // reset move distance on x-axis for new phase\n        this._mouse.distAxX = 0;\n        /** @type {?} */\n\n        var previous = this._placeholder.previousElementSibling; // increase horizontal level if previous sibling exists, is not collapsed, and can have children\n\n        if (this._mouse.distX > 0 && previous) {\n          list = previous.querySelectorAll(this.options.listNodeName);\n          list = list[list.length - 1]; // check if depth limit has reached\n\n          depth = _getParents(this._placeholder, this.el.nativeElement.querySelector(this.options.listNodeName)).length;\n\n          if (depth + this.dragDepth <= this.options.maxDepth) {\n            // create new sub-level if one doesn't exist\n            if (!list) {\n              list = document.createElement(this.options.listNodeName);\n              list.style.paddingLeft = this.options.threshold + PX;\n              list.appendChild(this._placeholder);\n              previous.appendChild(list); // this.setParent(previous);\n            } else {\n              // else append to next level up\n              list = previous.querySelector(\":scope > \".concat(this.options.listNodeName));\n              list.appendChild(this._placeholder);\n            }\n          }\n        } // decrease horizontal level\n\n\n        if (this._mouse.distX < 0) {\n          // we can't decrease a level if an item preceeds the current one\n\n          /** @type {?} */\n          var next = document.querySelector(\".\".concat(this.options.placeClass, \" + \").concat(this.options.itemNodeName));\n          /** @type {?} */\n\n          var parentElement = this._placeholder.parentElement;\n\n          if (!next && parentElement) {\n            /** @type {?} */\n            var closestItem = _closest(this._placeholder, this.options.itemNodeName);\n\n            if (closestItem) {\n              parentElement.removeChild(this._placeholder);\n\n              _insertAfter(this._placeholder, closestItem);\n            }\n          }\n        }\n      }\n\n      if (!pointEl.classList.contains('nestable-item-mask')) {\n        return;\n      } // find root list of item under cursor\n\n      /** @type {?} */\n\n\n      var pointElRoot = _closest(this.pointEl, \".\".concat(this.options.rootClass));\n      /** @type {?} */\n\n\n      var isNewRoot = pointElRoot ? this.dragRootEl.dataset['nestable-id'] !== pointElRoot.dataset['nestable-id'] : false;\n      /**\n       * move vertical\n       */\n\n      if (!this._mouse.dirAx || isNewRoot) {\n        // check if groups match if dragging over new root\n        if (isNewRoot && this.options.group !== pointElRoot.dataset['nestable-group']) {\n          return;\n        } // check depth limit\n\n\n        depth = this.dragDepth - 1 + _getParents(this.pointEl, this.el.nativeElement.querySelector(this.options.listNodeName)).length;\n\n        if (depth > this.options.maxDepth) {\n          return;\n        }\n        /** @type {?} */\n\n\n        var before = event.pageY < _offset(this.pointEl).top + this.pointEl.clientHeight / 2;\n        /** @type {?} */\n\n        var placeholderParent = this._placeholder.parentNode; // get point element depth\n\n        /** @type {?} */\n\n        var pointRelativeDepth;\n        pointRelativeDepth = _getParents(this.pointEl, this.el.nativeElement.querySelector(this.options.listNodeName)).length;\n\n        if (this.options.fixedDepth) {\n          if (pointRelativeDepth === this.relativeDepth - 1) {\n            /** @type {?} */\n            var childList = this.pointEl.querySelector(this.options.listNodeName);\n\n            if (!childList.children.length) {\n              childList.appendChild(this._placeholder);\n            }\n          } else if (pointRelativeDepth === this.relativeDepth) {\n            if (before) {\n              this.pointEl.parentElement.insertBefore(this._placeholder, this.pointEl);\n            } else {\n              _insertAfter(this._placeholder, this.pointEl);\n            }\n\n            if (Array.prototype.indexOf.call(this.pointEl.parentElement.children, this.pointEl) === this.pointEl.parentElement.children.length - 1) {\n              _insertAfter(this._placeholder, this.pointEl);\n            }\n          }\n        } else if (before) {\n          this.pointEl.parentElement.insertBefore(this._placeholder, this.pointEl);\n        } else {\n          _insertAfter(this._placeholder, this.pointEl);\n        }\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      /** @type {?} */\n      var keys = Object.keys(this._mouse);\n\n      for (var _i2 = 0, _keys = keys; _i2 < _keys.length; _i2++) {\n        var key = _keys[_i2];\n        this._mouse[key] = 0;\n      }\n\n      this._itemId = 0;\n      this.moving = false;\n      this.dragEl = null;\n      this.dragRootEl = null;\n      this.dragDepth = 0;\n      this.relativeDepth = 0;\n      this.hasNewRoot = false;\n      this.pointEl = null;\n    }\n    /**\n     * @param {?} event\n     * @param {?} item\n     * @param {?} parentList\n     * @return {?}\n     */\n\n  }, {\n    key: \"dragStartFromItem\",\n    value: function dragStartFromItem(event, item, parentList) {\n      if (!this._registerHandleDirective) {\n        this.dragStart(event, item, parentList);\n      }\n    }\n    /**\n     * @private\n     * @param {?} event\n     * @param {?} item\n     * @param {?} parentList\n     * @return {?}\n     */\n\n  }, {\n    key: \"dragStart\",\n    value: function dragStart(event, item, parentList) {\n      this._oldListLength = this.list.length;\n\n      if (!this.options.disableDrag) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (event.originalEvent) {\n          event = event.originalEvent;\n        } // allow only first mouse button\n\n\n        if (event.type.indexOf('mouse') === 0) {\n          if (event.button !== 0) {\n            return;\n          }\n        } else {\n          if (event.touches.length !== 1) {\n            return;\n          }\n        }\n\n        this.ref.detach();\n        this._dragIndex = parentList.indexOf(item);\n        this.dragModel = parentList.splice(parentList.indexOf(item), 1)[0];\n        /** @type {?} */\n\n        var dragItem = _closest(event.target, this.options.itemNodeName);\n\n        if (dragItem === null) {\n          return;\n        }\n\n        this._parentDragId = Number.parseInt(dragItem.parentElement.parentElement.id);\n        /** @type {?} */\n\n        var dragRect = dragItem.getBoundingClientRect();\n\n        this._showMasks();\n\n        this._createDragClone(event, dragItem);\n\n        this.renderer.setStyle(this.dragEl, 'width', dragRect.width + PX);\n\n        this._createPlaceholder(event, dragItem);\n\n        this.renderer.setStyle(this._placeholder, 'height', dragRect.height + PX);\n\n        this._calculateDepth();\n\n        this.drag.emit({\n          originalEvent: event,\n          item: item\n        });\n        this._cancelMouseup = this.renderer.listen(document, 'mouseup', this.dragStop.bind(this));\n        this._cancelMousemove = this.renderer.listen(document, 'mousemove', this.dragMove.bind(this));\n      }\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"dragStop\",\n    value: function dragStop(event) {\n      this._cancelMouseup();\n\n      this._cancelMousemove();\n\n      this._hideMasks();\n\n      if (this.dragEl) {\n        /** @type {?} */\n        var draggedId = Number.parseInt(this.dragEl.firstElementChild.id);\n        /** @type {?} */\n\n        var placeholderContainer = _closest(this._placeholder, this.options.itemNodeName);\n        /** @type {?} */\n\n\n        var changedElementPosition = this._dragIndex !== Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder);\n        /** @type {?} */\n\n        var index = Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder);\n\n        if (this._dragIndex === index && this._oldListLength === this.list.length) {\n          changedElementPosition = true;\n        } // placeholder in root\n\n\n        if (placeholderContainer === null) {\n          this.list.splice(Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder), 0, Object.assign({}, this.dragModel));\n        } else {\n          // palceholder nested\n          placeholderContainer = _findObjectInTree(this.list, Number.parseInt(placeholderContainer.id));\n\n          if (!placeholderContainer.children) {\n            placeholderContainer.children = [];\n            placeholderContainer.children.push(Object.assign({}, this.dragModel));\n          } else {\n            placeholderContainer.children.splice(Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder), 0, Object.assign({}, this.dragModel));\n          }\n\n          if (index === this._dragIndex) {\n            changedElementPosition = false;\n          }\n\n          if (!changedElementPosition) {\n            changedElementPosition = placeholderContainer['$$id'] !== this._parentDragId;\n          }\n        }\n\n        this._placeholder.parentElement.removeChild(this._placeholder);\n\n        this.dragEl.parentNode.removeChild(this.dragEl);\n        this.dragEl.remove();\n        this.reset();\n        this.listChange.emit(this.list);\n        this.drop.emit({\n          originalEvent: event,\n          destination: placeholderContainer,\n          item: this.dragModel,\n          changedElementPosition: changedElementPosition\n        });\n        this.ref.reattach();\n      }\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"dragMove\",\n    value: function dragMove(event) {\n      if (this.dragEl) {\n        event.preventDefault();\n\n        if (event.originalEvent) {\n          event = event.originalEvent;\n        }\n\n        this._move(event.type.indexOf('mouse') === 0 ? event : event.touches[0]);\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"expandAll\",\n    value: function expandAll() {\n      _traverseChildren(this._list,\n      /**\n      * @param {?} item\n      * @return {?}\n      */\n      function (item) {\n        item['$$expanded'] = true;\n      });\n\n      this.ref.markForCheck();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"collapseAll\",\n    value: function collapseAll() {\n      _traverseChildren(this._list,\n      /**\n      * @param {?} item\n      * @return {?}\n      */\n      function (item) {\n        item['$$expanded'] = false;\n      });\n\n      this.ref.markForCheck();\n    }\n  }]);\n\n  return NestableComponent;\n}();\n\nNestableComponent.ɵfac = function NestableComponent_Factory(t) {\n  return new (t || NestableComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n};\n\nNestableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n  type: NestableComponent,\n  selectors: [[\"ngx-nestable\"]],\n  inputs: {\n    options: \"options\",\n    disableDrag: \"disableDrag\",\n    list: \"list\",\n    template: \"template\"\n  },\n  outputs: {\n    listChange: \"listChange\",\n    drop: \"drop\",\n    drag: \"drag\",\n    disclosure: \"disclosure\"\n  },\n  decls: 5,\n  vars: 4,\n  consts: [[4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"nestableList\", \"\"], [\"nestableItem\", \"\"], [3, \"class\", \"id\", 4, \"ngFor\", \"ngForOf\"], [3, \"id\"], [4, \"ngIf\"], [1, \"nestable-item-container\", \"mat-list-item\", 3, \"mousedown\"], [1, \"nestable-item-mask\"]],\n  template: function NestableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵtemplate(0, NestableComponent_ng_container_0_Template, 1, 0, \"ng-container\", 0);\n      ɵngcc0.ɵɵtemplate(1, NestableComponent_ng_template_1_Template, 2, 5, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n      ɵngcc0.ɵɵtemplate(3, NestableComponent_ng_template_3_Template, 3, 8, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      var _r1 = ɵngcc0.ɵɵreference(2);\n\n      ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(2, _c4, ctx.list));\n    }\n  },\n  directives: [ɵngcc1.NgTemplateOutlet, ɵngcc1.NgForOf, ɵngcc1.NgIf],\n  styles: [\"@import url(https://fonts.googleapis.com/css?family=Roboto);ul .dd-placeholder{margin:5px 0;padding:0;min-height:30px;background:#f2fbff;border:1px dashed #b6bcbf;box-sizing:border-box}ul li .nestable-item-mask{display:none;position:absolute;top:0;bottom:0;right:0;left:0;z-index:9998}ul li .nestable-expand-button{display:block;position:relative;cursor:pointer;float:left;width:25px;height:14px;padding:0;white-space:nowrap;overflow:hidden;border:0;background:0 0;font-size:18px;line-height:1;text-align:center;font-weight:700;outline:0}ul li .nestable-item-container{position:relative;display:flex;flex-direction:row;align-items:center;color:rgba(0,0,0,.87);min-height:32px;font-size:16px;font-family:Roboto,sans-serif;cursor:pointer;outline:0;margin-bottom:2px;padding-left:8px}ul li .nestable-item-container:hover{background:rgba(0,0,0,.04)}ol,ul{list-style:none}\"],\n  encapsulation: 2,\n  changeDetection: 0\n});\n/** @nocollapse */\n\nNestableComponent.ctorParameters = function () {\n  return [{\n    type: ChangeDetectorRef\n  }, {\n    type: Renderer2\n  }, {\n    type: ElementRef\n  }, {\n    type: NgZone\n  }];\n};\n\nNestableComponent.propDecorators = {\n  listChange: [{\n    type: Output\n  }],\n  drop: [{\n    type: Output\n  }],\n  drag: [{\n    type: Output\n  }],\n  disclosure: [{\n    type: Output\n  }],\n  template: [{\n    type: Input\n  }],\n  options: [{\n    type: Input\n  }],\n  disableDrag: [{\n    type: Input\n  }],\n  list: [{\n    type: Input\n  }]\n};\n/*@__PURE__*/\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NestableComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-nestable',\n      template: \"<ng-container *ngTemplateOutlet=\\\"nestableList; context:{nestable: list, depth: 0}\\\">\\n</ng-container>\\n\\n<ng-template #nestableList let-nestable=\\\"nestable\\\" let-depth=\\\"depth\\\">\\n    <ul [style.padding-left.px]=\\\"depth ? options.threshold : 0\\\"\\n        [class]=\\\"options.listClass\\\">\\n        <li [class]=\\\"options.itemClass\\\" [id]=\\\"item.$$id\\\" *ngFor=\\\"let item of nestable\\\">\\n\\n            <ng-container *ngTemplateOutlet=\\\"nestableItem; context:{nestable: nestable, item: item, depth: depth}\\\">\\n            </ng-container>\\n\\n            <ng-container *ngIf=\\\"item.children && item.$$expanded\\\">\\n                <ng-container *ngTemplateOutlet=\\\"nestableList; context:{nestable: item.children, depth: depth + 1}\\\">\\n                </ng-container>\\n            </ng-container>\\n\\n            <ul [class]=\\\"options.listClass\\\" [style.padding-left.px]=\\\"options.threshold\\\"></ul>\\n        </li>\\n    </ul>\\n</ng-template>\\n\\n<ng-template #nestableItem let-parentList=\\\"nestable\\\" let-item=\\\"item\\\" let-depth=\\\"depth\\\">\\n    <div class=\\\"nestable-item-container mat-list-item\\\" (mousedown)=\\\"dragStartFromItem($event, item, parentList)\\\">\\n        <ng-container\\n            *ngTemplateOutlet=\\\"template; context:{$implicit: {item: item, parentList: parentList}, depth: depth}\\\">\\n        </ng-container>\\n\\n        <div class=\\\"nestable-item-mask\\\"></div>\\n    </div>\\n</ng-template>\\n\",\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      styles: [\"@import url(https://fonts.googleapis.com/css?family=Roboto);ul .dd-placeholder{margin:5px 0;padding:0;min-height:30px;background:#f2fbff;border:1px dashed #b6bcbf;box-sizing:border-box}ul li .nestable-item-mask{display:none;position:absolute;top:0;bottom:0;right:0;left:0;z-index:9998}ul li .nestable-expand-button{display:block;position:relative;cursor:pointer;float:left;width:25px;height:14px;padding:0;white-space:nowrap;overflow:hidden;border:0;background:0 0;font-size:18px;line-height:1;text-align:center;font-weight:700;outline:0}ul li .nestable-item-container{position:relative;display:flex;flex-direction:row;align-items:center;color:rgba(0,0,0,.87);min-height:32px;font-size:16px;font-family:Roboto,sans-serif;cursor:pointer;outline:0;margin-bottom:2px;padding-left:8px}ul li .nestable-item-container:hover{background:rgba(0,0,0,.04)}ol,ul{list-style:none}\"]\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: ɵngcc0.Renderer2\n    }, {\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.NgZone\n    }];\n  }, {\n    listChange: [{\n      type: Output\n    }],\n    drop: [{\n      type: Output\n    }],\n    drag: [{\n      type: Output\n    }],\n    disclosure: [{\n      type: Output\n    }],\n    options: [{\n      type: Input\n    }],\n    disableDrag: [{\n      type: Input\n    }],\n    list: [{\n      type: Input\n    }],\n    template: [{\n      type: Input\n    }]\n  });\n})();\n\nif (false) {\n  /** @type {?} */\n  NestableComponent.prototype.listChange;\n  /** @type {?} */\n\n  NestableComponent.prototype.drop;\n  /** @type {?} */\n\n  NestableComponent.prototype.drag;\n  /** @type {?} */\n\n  NestableComponent.prototype.disclosure;\n  /** @type {?} */\n\n  NestableComponent.prototype.template;\n  /** @type {?} */\n\n  NestableComponent.prototype.options;\n  /** @type {?} */\n\n  NestableComponent.prototype.disableDrag;\n  /** @type {?} */\n\n  NestableComponent.prototype.dragRootEl;\n  /** @type {?} */\n\n  NestableComponent.prototype.dragEl;\n  /** @type {?} */\n\n  NestableComponent.prototype.dragModel;\n  /** @type {?} */\n\n  NestableComponent.prototype.moving;\n  /**\n   * Dragged element contains children, and those children contain other children and so on...\n   * This property gives you the number of generations contained within the dragging item.\n   * @type {?}\n   */\n\n  NestableComponent.prototype.dragDepth;\n  /**\n   * The depth of dragging item relative to element root (ngx-nestable)\n   * @type {?}\n   */\n\n  NestableComponent.prototype.relativeDepth;\n  /** @type {?} */\n\n  NestableComponent.prototype.hasNewRoot;\n  /** @type {?} */\n\n  NestableComponent.prototype.pointEl;\n  /** @type {?} */\n\n  NestableComponent.prototype.items;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._componentActive;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._mouse;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._list;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._cancelMousemove;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._cancelMouseup;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._placeholder;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._itemId;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._registerHandleDirective;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._dragIndex;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._parentDragId;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype._oldListLength;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype.ref;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype.renderer;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype.el;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableComponent.prototype.zone;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar NestableDragHandleDirective = /*#__PURE__*/function () {\n  /**\n   * @param {?} _el\n   */\n  function NestableDragHandleDirective(_el) {\n    _classCallCheck(this, NestableDragHandleDirective);\n\n    this._el = _el;\n  }\n  /**\n   * @param {?} event\n   * @return {?}\n   */\n\n\n  _createClass(NestableDragHandleDirective, [{\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      /** @type {?} */\n      var detail = {\n        param: this.ngxNestableDragHandle,\n        event: event\n      };\n\n      this._el.nativeElement.dispatchEvent(new CustomEvent(DRAG_START, {\n        bubbles: true,\n        detail: detail\n      }));\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this._el.nativeElement.dispatchEvent(new CustomEvent(REGISTER_HANDLE, {\n        bubbles: true,\n        detail: this.ngxNestableDragHandle\n      }));\n    }\n  }]);\n\n  return NestableDragHandleDirective;\n}();\n\nNestableDragHandleDirective.ɵfac = function NestableDragHandleDirective_Factory(t) {\n  return new (t || NestableDragHandleDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nNestableDragHandleDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n  type: NestableDragHandleDirective,\n  selectors: [[\"\", \"ngxNestableDragHandle\", \"\"]],\n  hostBindings: function NestableDragHandleDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"mousedown\", function NestableDragHandleDirective_mousedown_HostBindingHandler($event) {\n        return ctx.onMouseDown($event);\n      });\n    }\n  },\n  inputs: {\n    ngxNestableDragHandle: \"ngxNestableDragHandle\"\n  }\n});\n/** @nocollapse */\n\nNestableDragHandleDirective.ctorParameters = function () {\n  return [{\n    type: ElementRef\n  }];\n};\n\nNestableDragHandleDirective.propDecorators = {\n  ngxNestableDragHandle: [{\n    type: Input\n  }],\n  onMouseDown: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }]\n};\n/*@__PURE__*/\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NestableDragHandleDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ngxNestableDragHandle]'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }];\n  }, {\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n    onMouseDown: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    ngxNestableDragHandle: [{\n      type: Input\n    }]\n  });\n})();\n\nif (false) {\n  /** @type {?} */\n  NestableDragHandleDirective.prototype.ngxNestableDragHandle;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableDragHandleDirective.prototype._el;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar NestableExpandCollapseDirective = /*#__PURE__*/function () {\n  /**\n   * @param {?} _el\n   */\n  function NestableExpandCollapseDirective(_el) {\n    _classCallCheck(this, NestableExpandCollapseDirective);\n\n    this._el = _el;\n  }\n  /**\n   * @param {?} event\n   * @return {?}\n   */\n\n\n  _createClass(NestableExpandCollapseDirective, [{\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      event.stopPropagation();\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      this.ngxNestableExpandCollapse.item['$$expanded'] = !this.ngxNestableExpandCollapse.item['$$expanded'];\n\n      this._el.nativeElement.dispatchEvent(new CustomEvent(EXPAND_COLLAPSE, {\n        bubbles: true,\n        detail: this.ngxNestableExpandCollapse\n      }));\n    }\n  }]);\n\n  return NestableExpandCollapseDirective;\n}();\n\nNestableExpandCollapseDirective.ɵfac = function NestableExpandCollapseDirective_Factory(t) {\n  return new (t || NestableExpandCollapseDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\n\nNestableExpandCollapseDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n  type: NestableExpandCollapseDirective,\n  selectors: [[\"\", \"ngxNestableExpandCollapse\", \"\"]],\n  hostBindings: function NestableExpandCollapseDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"mousedown\", function NestableExpandCollapseDirective_mousedown_HostBindingHandler($event) {\n        return ctx.onMouseDown($event);\n      })(\"click\", function NestableExpandCollapseDirective_click_HostBindingHandler($event) {\n        return ctx.onClick($event);\n      });\n    }\n  },\n  inputs: {\n    ngxNestableExpandCollapse: \"ngxNestableExpandCollapse\"\n  }\n});\n/** @nocollapse */\n\nNestableExpandCollapseDirective.ctorParameters = function () {\n  return [{\n    type: ElementRef\n  }];\n};\n\nNestableExpandCollapseDirective.propDecorators = {\n  ngxNestableExpandCollapse: [{\n    type: Input\n  }],\n  onMouseDown: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }],\n  onClick: [{\n    type: HostListener,\n    args: ['click', ['$event']]\n  }]\n};\n/*@__PURE__*/\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NestableExpandCollapseDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ngxNestableExpandCollapse]'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }];\n  }, {\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n    onMouseDown: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n    onClick: [{\n      type: HostListener,\n      args: ['click', ['$event']]\n    }],\n    ngxNestableExpandCollapse: [{\n      type: Input\n    }]\n  });\n})();\n\nif (false) {\n  /** @type {?} */\n  NestableExpandCollapseDirective.prototype.ngxNestableExpandCollapse;\n  /**\n   * @type {?}\n   * @private\n   */\n\n  NestableExpandCollapseDirective.prototype._el;\n}\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar NestableModule = /*#__PURE__*/_createClass(function NestableModule() {\n  _classCallCheck(this, NestableModule);\n});\n\nNestableModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n  type: NestableModule\n});\nNestableModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n  factory: function NestableModule_Factory(t) {\n    return new (t || NestableModule)();\n  },\n  imports: [[CommonModule]]\n});\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NestableModule, {\n    declarations: function declarations() {\n      return [NestableComponent, NestableDragHandleDirective, NestableExpandCollapseDirective];\n    },\n    imports: function imports() {\n      return [CommonModule];\n    },\n    exports: function exports() {\n      return [NestableComponent, NestableDragHandleDirective, NestableExpandCollapseDirective];\n    }\n  });\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NestableModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule],\n      declarations: [NestableComponent, NestableDragHandleDirective, NestableExpandCollapseDirective],\n      exports: [NestableComponent, NestableDragHandleDirective, NestableExpandCollapseDirective]\n    }]\n  }], null, null);\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { NestableComponent, NestableModule, NestableDragHandleDirective as ɵa, NestableExpandCollapseDirective as ɵb };","map":{"version":3,"sources":["ngx-nestable/lib/nestable.helper.ts","ngx-nestable/lib/nestable.constant.ts","ngx-nestable/lib/nestable.component.ts","ngx-nestable/lib/nestable-drag-handle/nestable-drag-handle.directive.ts","ngx-nestable/lib/nestable-expand-collapse-handle/nestable-expand-collapse.directive.ts","ngx-nestable/lib/nestable.module.ts"],"names":["helper._traverseChildren","helper._insertAfter","helper._getParents","helper._offset","helper._closest","helper._findObjectInTree"],"mappings":"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","sourcesContent":["export const _traverseChildren = (tree, callback, parent = null) => {\n    for (let i = 0; i < tree.length; i++) {\n        const item = tree[i];\n        if (typeof item === 'undefined') {\n            continue;\n        }\n        const callbackResult = callback(item, parent);\n\n        if (callbackResult) {\n            break;\n        }\n\n        if (item.children) {\n            _traverseChildren(item.children, callback, item);\n        }\n    }\n};\n\nexport const _insertAfter = (newNode, referenceNode) => {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n};\n\nexport const _replace = (newNode, referenceNode) => {\n    referenceNode.parentNode.replaceChild(newNode, referenceNode);\n};\n\nexport const _replaceTargetWithElements = (target, elements) => {\n    let i = elements.length;\n\n    if (target.parentNode) {\n        while (i--) {\n            target.parentNode.insertBefore(elements[i], target);\n        }\n\n        /// remove the target.\n        target.parentNode.removeChild(target);\n    }\n};\n\nexport const _getParents = (el, parentSelector = document.body) => {\n\n    const parents = [];\n    let parentNode = el.parentNode;\n\n    while (parentNode !== parentSelector) {\n        const o = parentNode;\n        if (!parentNode) {\n            break;\n        }\n        if (parentNode.tagName === parentSelector.tagName) {\n            parents.push(o);\n        }\n        parentNode = o.parentNode;\n    }\n    parents.push(parentSelector); // Push that parentSelector you wanted to stop at\n\n    return parents;\n};\n\nexport const _closest = (el, selector) => {\n    let matchesFn;\n\n    // find vendor prefix\n    ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\n        if (typeof document.body[fn] === 'function') {\n            matchesFn = fn;\n            return true;\n        }\n        return false;\n    });\n\n    let parent;\n\n    // traverse parents\n    while (el) {\n        parent = el.parentElement;\n        if (parent === null) {\n            break;\n        }\n        const matches = parent[matchesFn](selector);\n        if (parent && matches) {\n            return parent;\n        }\n        el = parent;\n    }\n\n    return null;\n};\n\nexport const _offset = (elem) => {\n    let box = { top: 0, left: 0 };\n\n    // BlackBerry 5, iOS 3 (original iPhone)\n    if (typeof elem.getBoundingClientRect !== undefined) {\n        box = elem.getBoundingClientRect();\n    }\n\n    return {\n        top: box.top + (window.pageYOffset || elem.scrollTop) - (elem.clientTop || 0),\n        left: box.left + (window.pageXOffset || elem.scrollLeft) - (elem.clientLeft || 0)\n    };\n};\n\nexport const _findObjectInTree = (array, id) => {\n    let result = null;\n\n    _traverseChildren(array, item => {\n        if (item['$$id'] === Number.parseInt(id)) {\n            result = item;\n            return true;\n        }\n    });\n\n    return result;\n};\n","import { NestableSettings } from './nestable.models';\n\nexport const REGISTER_HANDLE = 'NESTABLE_DRAG_HANDLE_REGISTER';\nexport const DRAG_START = 'NESTABLE_DRAG_HANDLE_START';\nexport const EXPAND_COLLAPSE = 'NESTABLE_EXPAND_COLLAPSE_EVENT';\n\nexport const defaultSettings = {\n    listNodeName: 'ul',\n    itemNodeName: 'li',\n    rootClass: 'dd',\n    listClass: 'dd-list',\n    itemClass: 'dd-item',\n    dragClass: 'dd-dragel',\n    handleClass: 'dd-handle',\n    collapsedClass: 'dd-collapsed',\n    placeClass: 'dd-placeholder',\n    group: 0, // TODO\n    maxDepth: 5,\n    threshold: 20,\n    fixedDepth: false, // fixed item's depth\n    exportCollapsed: true, // TODO\n    disableDrag: false,\n} as NestableSettings;\n\nexport const mouse = {\n    moving: 0,\n    offsetX: 0,\n    offsetY: 0,\n    startX: 0,\n    startY: 0,\n    lastX: 0,\n    lastY: 0,\n    nowX: 0,\n    nowY: 0,\n    distX: 0,\n    distY: 0,\n    dirAx: 0,\n    dirX: 0,\n    dirY: 0,\n    lastDirX: 0,\n    lastDirY: 0,\n    distAxX: 0,\n    distAxY: 0\n};\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2,\n    ViewContainerRef,\n    ViewEncapsulation\n} from '@angular/core';\n\nimport * as helper from './nestable.helper';\n\nimport { defaultSettings, DRAG_START, EXPAND_COLLAPSE, mouse, REGISTER_HANDLE } from './nestable.constant';\n\nconst PX = 'px';\nconst hasPointerEvents = (function () {\n    const el = document.createElement('div'),\n        docEl = document.documentElement;\n\n    if (!('pointerEvents' in el.style)) {\n        return false;\n    }\n\n    el.style.pointerEvents = 'auto';\n    el.style.pointerEvents = 'x';\n    docEl.appendChild(el);\n    const supports =\n        window.getComputedStyle &&\n        window.getComputedStyle(el, '').pointerEvents === 'auto';\n    docEl.removeChild(el);\n    return !!supports;\n})();\n\n@Component({\n    selector: 'ngx-nestable',\n    templateUrl: './nestable.component.html',\n    styleUrls: ['./nestable.component.scss'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NestableComponent implements OnInit, OnDestroy {\n    @Output() public listChange = new EventEmitter();\n    @Output() public drop = new EventEmitter();\n    @Output() public drag = new EventEmitter();\n    @Output() public disclosure = new EventEmitter();\n\n    @Input() public template: ViewContainerRef;\n    @Input() public options = defaultSettings;\n    @Input() public disableDrag = false;\n\n    @Input()\n    public get list() {\n        return this._list;\n    }\n\n    public set list(list) {\n        this._list = list;\n        this._generateItemIds();\n    }\n\n    public dragRootEl = null;\n    public dragEl = null;\n    public dragModel = null;\n    public moving = false;\n\n    /**\n     * Dragged element contains children, and those children contain other children and so on...\n     * This property gives you the number of generations contained within the dragging item.\n     */\n    public dragDepth = 0;\n\n    /**\n     * The depth of dragging item relative to element root (ngx-nestable)\n     */\n    public relativeDepth = 0;\n\n    public hasNewRoot = false;\n    public pointEl = null;\n    public items = [];\n\n    private _componentActive = false;\n    private _mouse = Object.assign({}, mouse);\n    private _list = [];\n    // private _options = Object.assign({}, defaultSettings) as NestableSettings;\n    private _cancelMousemove: Function;\n    private _cancelMouseup: Function;\n    private _placeholder;\n    private _itemId = 0;\n    private _registerHandleDirective = false;\n    private _dragIndex;\n    private _parentDragId;\n    private _oldListLength: any;\n\n    constructor(\n        private ref: ChangeDetectorRef,\n        private renderer: Renderer2,\n        private el: ElementRef,\n        private zone: NgZone\n    ) {}\n\n    ngOnInit(): void {\n        // set/extend default options\n        this._componentActive = true;\n        const optionKeys = Object.keys(defaultSettings);\n        for (const key of optionKeys) {\n            if (typeof this.options[key] === 'undefined') {\n                this.options[key] = defaultSettings[key];\n            }\n        }\n\n        this._generateItemIds();\n        this._generateItemExpanded();\n        this._createHandleListener();\n    }\n\n    ngOnDestroy(): void {}\n\n    private _generateItemIds() {\n        helper._traverseChildren(this._list, item => {\n            item['$$id'] = this._itemId++;\n        });\n    }\n\n    private _generateItemExpanded() {\n        helper._traverseChildren(this._list, item => {\n            if (typeof item.expanded === 'undefined') {\n                item['$$expanded'] = true;\n            } else {\n                item['$$expanded'] = item.expanded;\n            }\n        });\n    }\n\n    private _createHandleListener() {\n        this.renderer.listen(this.el.nativeElement, REGISTER_HANDLE, () => {\n            this._registerHandleDirective = true;\n        });\n\n        this.renderer.listen(this.el.nativeElement, DRAG_START, data => {\n            this.dragStart(\n                data.detail.event,\n                data.detail.param.item,\n                data.detail.param.parentList\n            );\n        });\n\n        this.renderer.listen(this.el.nativeElement, EXPAND_COLLAPSE, data => {\n            this.disclosure.emit({\n                item: data.detail.item,\n                expanded: data.detail.item['$$expanded']\n            });\n        });\n    }\n\n    private _createDragClone(event, dragItem) {\n        this._mouseStart(event, dragItem);\n\n        if (!this._registerHandleDirective) {\n            this._mouse.offsetY = dragItem.nextElementSibling\n                ? dragItem.nextElementSibling.clientHeight / 2\n                : dragItem.clientHeight / 2;\n        }\n\n        // create drag clone\n        this.dragEl = document.createElement(this.options.listNodeName);\n        document.body.appendChild(this.dragEl);\n\n        this.renderer.addClass(this.dragEl, this.options.dragClass);\n\n        // add drag clone to body and set css\n        this.renderer.setStyle(\n            this.dragEl,\n            'left',\n            event.pageX - this._mouse.offsetX + PX\n        );\n        this.renderer.setStyle(\n            this.dragEl,\n            'top',\n            event.pageY - this._mouse.offsetY + PX\n        );\n        this.renderer.setStyle(this.dragEl, 'position', 'absolute');\n        this.renderer.setStyle(this.dragEl, 'z-index', 9999);\n        this.renderer.setStyle(this.dragEl, 'pointer-events', 'none');\n    }\n\n    private _createPlaceholder(event, dragItem) {\n        this._placeholder = document.createElement('div');\n        this._placeholder.classList.add(this.options.placeClass);\n        helper._insertAfter(this._placeholder, dragItem);\n        dragItem.parentNode.removeChild(dragItem);\n        this.dragEl.appendChild(dragItem);\n        this.dragRootEl = dragItem;\n    }\n\n    /**\n     * Sets depth proerties (relative and drag)\n     */\n    private _calculateDepth() {\n        // total depth of dragging item\n        let depth;\n        const items = this.dragEl.querySelectorAll(this.options.itemNodeName);\n        for (let i = 0; i < items.length; i++) {\n            depth = helper._getParents(items[i], this.dragEl).length;\n            if (depth > this.dragDepth) {\n                this.dragDepth = depth;\n            }\n        }\n\n        // depth relative to root\n        this.relativeDepth = helper._getParents(\n            this._placeholder,\n            this.el.nativeElement.querySelector(this.options.listNodeName)\n        ).length;\n    }\n\n    private _mouseStart(event, dragItem) {\n        this._mouse.offsetX = event.pageX - helper._offset(dragItem).left;\n        this._mouse.offsetY = event.pageY - helper._offset(dragItem).top;\n        this._mouse.startX = this._mouse.lastX = event.pageX;\n        this._mouse.startY = this._mouse.lastY = event.pageY;\n    }\n\n    private _mouseUpdate(event) {\n        // mouse position last events\n        this._mouse.lastX = this._mouse.nowX;\n        this._mouse.lastY = this._mouse.nowY;\n        // mouse position this events\n        this._mouse.nowX = event.pageX;\n        this._mouse.nowY = event.pageY;\n        // distance mouse moved between events\n        this._mouse.distX = this._mouse.nowX - this._mouse.lastX;\n        this._mouse.distY = this._mouse.nowY - this._mouse.lastY;\n        // direction mouse was moving\n        this._mouse.lastDirX = this._mouse.dirX;\n        this._mouse.lastDirY = this._mouse.dirY;\n        // direction mouse is now moving (on both axis)\n        this._mouse.dirX =\n            this._mouse.distX === 0 ? 0 : this._mouse.distX > 0 ? 1 : -1;\n        this._mouse.dirY =\n            this._mouse.distY === 0 ? 0 : this._mouse.distY > 0 ? 1 : -1;\n    }\n\n    private _showMasks() {\n        const masks = this.el.nativeElement.getElementsByClassName(\n            'nestable-item-mask'\n        );\n        for (let i = 0; i < masks.length; i++) {\n            masks[i].style.display = 'block';\n        }\n    }\n\n    private _hideMasks() {\n        const masks = this.el.nativeElement.getElementsByClassName(\n            'nestable-item-mask'\n        );\n        for (let i = 0; i < masks.length; i++) {\n            masks[i].style.display = 'none';\n        }\n    }\n\n    /**\n     * calc mouse traverse distance on axis\n     * @param m - mouse\n     */\n    private _calcMouseDistance(m) {\n        m.distAxX += Math.abs(m.distX);\n        if (m.dirX !== 0 && m.dirX !== m.lastDirX) {\n            m.distAxX = 0;\n        }\n\n        m.distAxY += Math.abs(m.distY);\n        if (m.dirY !== 0 && m.dirY !== m.lastDirY) {\n            m.distAxY = 0;\n        }\n    }\n\n    private _move(event) {\n        let depth, list;\n\n        const dragRect = this.dragEl.getBoundingClientRect();\n        this.renderer.setStyle(\n            this.dragEl,\n            'left',\n            event.pageX - this._mouse.offsetX + PX\n        );\n        this.renderer.setStyle(\n            this.dragEl,\n            'top',\n            event.pageY - this._mouse.offsetY + PX\n        );\n\n        this._mouseUpdate(event);\n\n        // axis mouse is now moving on\n        const newAx =\n            Math.abs(this._mouse.distX) > Math.abs(this._mouse.distY) ? 1 : 0;\n\n        // do nothing on first move\n        if (!this._mouse.moving) {\n            this._mouse.dirAx = newAx;\n            this._mouse.moving = 1;\n            return;\n        }\n\n        // calc distance moved on this axis (and direction)\n        if (this._mouse.dirAx !== newAx) {\n            this._mouse.distAxX = 0;\n            this._mouse.distAxY = 0;\n        } else {\n            this._calcMouseDistance(this._mouse);\n        }\n        this._mouse.dirAx = newAx;\n\n        // find list item under cursor\n        if (!hasPointerEvents) {\n            this.dragEl.style.visibility = 'hidden';\n        }\n\n        const pointEl = document.elementFromPoint(\n            event.pageX - document.body.scrollLeft,\n            event.pageY - (window.pageYOffset || document.documentElement.scrollTop)\n        );\n\n        if (!hasPointerEvents) {\n            this.dragEl.style.visibility = 'visible';\n        }\n\n        if (\n            pointEl &&\n            (pointEl.classList.contains('nestable-item-mask') ||\n                pointEl.classList.contains(this.options.placeClass))\n        ) {\n            this.pointEl = pointEl.parentElement.parentElement;\n        } else {\n            return;\n        }\n\n        /**\n         * move horizontal\n         */\n        if (\n            !this.options.fixedDepth &&\n            this._mouse.dirAx &&\n            this._mouse.distAxX >= this.options.threshold\n        ) {\n            // reset move distance on x-axis for new phase\n            this._mouse.distAxX = 0;\n            const previous = this._placeholder.previousElementSibling;\n\n            // increase horizontal level if previous sibling exists, is not collapsed, and can have children\n            if (this._mouse.distX > 0 && previous) {\n                list = previous.querySelectorAll(this.options.listNodeName);\n                list = list[list.length - 1];\n\n                // check if depth limit has reached\n                depth = helper._getParents(\n                    this._placeholder,\n                    this.el.nativeElement.querySelector(this.options.listNodeName)\n                ).length;\n\n                if (depth + this.dragDepth <= this.options.maxDepth) {\n                    // create new sub-level if one doesn't exist\n                    if (!list) {\n                        list = document.createElement(this.options.listNodeName);\n                        list.style.paddingLeft = this.options.threshold + PX;\n                        list.appendChild(this._placeholder);\n                        previous.appendChild(list);\n                        // this.setParent(previous);\n                    } else {\n                        // else append to next level up\n                        list = previous.querySelector(\n                            `:scope > ${ this.options.listNodeName }`\n                        );\n                        list.appendChild(this._placeholder);\n                    }\n                }\n            }\n            // decrease horizontal level\n            if (this._mouse.distX < 0) {\n                // we can't decrease a level if an item preceeds the current one\n                const next = document.querySelector(\n                    `.${ this.options.placeClass } + ${ this.options.itemNodeName }`\n                );\n                const parentElement = this._placeholder.parentElement;\n                if (!next && parentElement) {\n                    const closestItem = helper._closest(\n                        this._placeholder,\n                        this.options.itemNodeName\n                    );\n\n                    if (closestItem) {\n                        parentElement.removeChild(this._placeholder);\n                        helper._insertAfter(this._placeholder, closestItem);\n                    }\n                }\n            }\n        }\n\n        if (!pointEl.classList.contains('nestable-item-mask')) {\n            return;\n        }\n\n        // find root list of item under cursor\n        const pointElRoot = helper._closest(\n            this.pointEl,\n            `.${ this.options.rootClass }`\n            ),\n            isNewRoot = pointElRoot\n                ? this.dragRootEl.dataset['nestable-id'] !==\n                pointElRoot.dataset['nestable-id']\n                : false;\n\n        /**\n         * move vertical\n         */\n        if (!this._mouse.dirAx || isNewRoot) {\n            // check if groups match if dragging over new root\n            if (\n                isNewRoot &&\n                this.options.group !== pointElRoot.dataset['nestable-group']\n            ) {\n                return;\n            }\n\n            // check depth limit\n            depth =\n                this.dragDepth -\n                1 +\n                helper._getParents(\n                    this.pointEl,\n                    this.el.nativeElement.querySelector(this.options.listNodeName)\n                ).length;\n\n            if (depth > this.options.maxDepth) {\n                return;\n            }\n\n            const before =\n                event.pageY <\n                helper._offset(this.pointEl).top + this.pointEl.clientHeight / 2;\n            const placeholderParent = this._placeholder.parentNode;\n\n            // get point element depth\n            let pointRelativeDepth;\n            pointRelativeDepth = helper._getParents(\n                this.pointEl,\n                this.el.nativeElement.querySelector(this.options.listNodeName)\n            ).length;\n\n            if (this.options.fixedDepth) {\n                if (pointRelativeDepth === this.relativeDepth - 1) {\n                    const childList = this.pointEl.querySelector(\n                        this.options.listNodeName\n                    );\n                    if (!childList.children.length) {\n                        childList.appendChild(this._placeholder);\n                    }\n                } else if (pointRelativeDepth === this.relativeDepth) {\n                    if (before) {\n                        this.pointEl.parentElement.insertBefore(\n                            this._placeholder,\n                            this.pointEl\n                        );\n                    } else {\n                        helper._insertAfter(this._placeholder, this.pointEl);\n                    }\n\n                    if (\n                        Array.prototype.indexOf.call(\n                            this.pointEl.parentElement.children,\n                            this.pointEl\n                        ) ===\n                        this.pointEl.parentElement.children.length - 1\n                    ) {\n                        helper._insertAfter(this._placeholder, this.pointEl);\n                    }\n                }\n            } else if (before) {\n                this.pointEl.parentElement.insertBefore(\n                    this._placeholder,\n                    this.pointEl\n                );\n            } else {\n                helper._insertAfter(this._placeholder, this.pointEl);\n            }\n        }\n    }\n\n    public reset() {\n        const keys = Object.keys(this._mouse);\n        for (const key of keys) {\n            this._mouse[key] = 0;\n        }\n\n        this._itemId = 0;\n        this.moving = false;\n        this.dragEl = null;\n        this.dragRootEl = null;\n        this.dragDepth = 0;\n        this.relativeDepth = 0;\n        this.hasNewRoot = false;\n        this.pointEl = null;\n    }\n\n    public dragStartFromItem(event, item, parentList) {\n        if (!this._registerHandleDirective) {\n            this.dragStart(event, item, parentList);\n        }\n    }\n\n    private dragStart(event, item, parentList) {\n\n        this._oldListLength = this.list.length;\n\n        if (!this.options.disableDrag) {\n            event.stopPropagation();\n            event.preventDefault();\n\n            if (event.originalEvent) {\n                event = event.originalEvent;\n            }\n\n            // allow only first mouse button\n            if (event.type.indexOf('mouse') === 0) {\n                if (event.button !== 0) {\n                    return;\n                }\n            } else {\n                if (event.touches.length !== 1) {\n                    return;\n                }\n            }\n\n            this.ref.detach();\n            this._dragIndex = parentList.indexOf(item);\n            this.dragModel = parentList.splice(parentList.indexOf(item), 1)[0];\n\n            const dragItem = helper._closest(event.target, this.options.itemNodeName);\n            if (dragItem === null) {\n                return;\n            }\n            this._parentDragId = Number.parseInt(\n                dragItem.parentElement.parentElement.id\n            );\n\n            const dragRect = dragItem.getBoundingClientRect();\n\n            this._showMasks();\n            this._createDragClone(event, dragItem);\n            this.renderer.setStyle(this.dragEl, 'width', dragRect.width + PX);\n\n            this._createPlaceholder(event, dragItem);\n            this.renderer.setStyle(this._placeholder, 'height', dragRect.height + PX);\n\n            this._calculateDepth();\n            this.drag.emit({\n                originalEvent: event,\n                item\n            });\n\n            this._cancelMouseup = this.renderer.listen(\n                document,\n                'mouseup',\n                this.dragStop.bind(this)\n            );\n            this._cancelMousemove = this.renderer.listen(\n                document,\n                'mousemove',\n                this.dragMove.bind(this)\n            );\n        }\n    }\n\n    public dragStop(event) {\n        this._cancelMouseup();\n        this._cancelMousemove();\n        this._hideMasks();\n\n        if (this.dragEl) {\n            const draggedId = Number.parseInt(this.dragEl.firstElementChild.id);\n            let placeholderContainer = helper._closest(\n                this._placeholder,\n                this.options.itemNodeName\n            );\n\n            let changedElementPosition =\n                this._dragIndex !==\n                Array.prototype.indexOf.call(\n                    this._placeholder.parentElement.children,\n                    this._placeholder\n                );\n\n            const index = Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder);\n\n            if ((this._dragIndex === index) && (this._oldListLength === this.list.length)) {\n                changedElementPosition = true;\n            }\n\n            // placeholder in root\n            if (placeholderContainer === null) {\n                this.list.splice(\n                    Array.prototype.indexOf.call(\n                        this._placeholder.parentElement.children,\n                        this._placeholder\n                    ),\n                    0,\n                    { ...this.dragModel }\n                );\n            } else {\n                // palceholder nested\n                placeholderContainer = helper._findObjectInTree(\n                    this.list,\n                    Number.parseInt(placeholderContainer.id)\n                );\n                if (!placeholderContainer.children) {\n                    placeholderContainer.children = [];\n                    placeholderContainer.children.push({ ...this.dragModel });\n                } else {\n                    placeholderContainer.children.splice(\n                        Array.prototype.indexOf.call(\n                            this._placeholder.parentElement.children,\n                            this._placeholder\n                        ),\n                        0,\n                        { ...this.dragModel }\n                    );\n                }\n                if (index === this._dragIndex) {\n                    changedElementPosition = false;\n                }\n                if (!changedElementPosition) {\n                    changedElementPosition =\n                        placeholderContainer['$$id'] !== this._parentDragId;\n                }\n            }\n\n            this._placeholder.parentElement.removeChild(this._placeholder);\n            this.dragEl.parentNode.removeChild(this.dragEl);\n            this.dragEl.remove();\n            this.reset();\n\n            this.listChange.emit(this.list);\n            this.drop.emit({\n                originalEvent: event,\n                destination: placeholderContainer,\n                item: this.dragModel,\n                changedElementPosition\n            });\n            this.ref.reattach();\n        }\n    }\n\n    public dragMove(event) {\n        if (this.dragEl) {\n            event.preventDefault();\n\n            if (event.originalEvent) {\n                event = event.originalEvent;\n            }\n            this._move(event.type.indexOf('mouse') === 0 ? event : event.touches[0]);\n        }\n    }\n\n    public expandAll() {\n        helper._traverseChildren(this._list, item => {\n            item['$$expanded'] = true;\n        });\n        this.ref.markForCheck();\n    }\n\n    public collapseAll() {\n        helper._traverseChildren(this._list, item => {\n            item['$$expanded'] = false;\n        });\n        this.ref.markForCheck();\n    }\n}\n","import { Directive, ElementRef, HostListener, Input, OnInit } from '@angular/core';\n\nimport { DRAG_START, REGISTER_HANDLE } from '../nestable.constant';\n\n@Directive({\n    selector: '[ngxNestableDragHandle]'\n})\nexport class NestableDragHandleDirective implements OnInit {\n    @Input() public ngxNestableDragHandle;\n\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event) {\n        const detail = {\n            param: this.ngxNestableDragHandle,\n            event: event\n        };\n        this._el.nativeElement.dispatchEvent(\n            new CustomEvent(DRAG_START, { bubbles: true, detail: detail })\n        );\n    }\n\n    constructor(private _el: ElementRef) {}\n\n    ngOnInit(): void {\n        this._el.nativeElement.dispatchEvent(\n            new CustomEvent(REGISTER_HANDLE, { bubbles: true, detail: this.ngxNestableDragHandle })\n        );\n    }\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { EXPAND_COLLAPSE } from '../nestable.constant';\n\n@Directive({\n    selector: '[ngxNestableExpandCollapse]'\n})\nexport class NestableExpandCollapseDirective {\n    @Input() public ngxNestableExpandCollapse;\n\n    constructor(private _el: ElementRef) {}\n\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event) {\n        event.stopPropagation();\n    }\n\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        this.ngxNestableExpandCollapse.item['$$expanded'] = !this.ngxNestableExpandCollapse.item['$$expanded'];\n        this._el.nativeElement.dispatchEvent(\n            new CustomEvent(EXPAND_COLLAPSE, {\n                bubbles: true,\n                detail: this.ngxNestableExpandCollapse\n            })\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NestableComponent } from './nestable.component';\nimport { NestableDragHandleDirective } from './nestable-drag-handle/nestable-drag-handle.directive';\n\nimport { NestableExpandCollapseDirective } from './nestable-expand-collapse-handle/nestable-expand-collapse.directive';\n\n@NgModule({\n    imports: [CommonModule],\n    declarations: [\n        NestableComponent,\n        NestableDragHandleDirective,\n        NestableExpandCollapseDirective\n    ],\n    exports: [\n        NestableComponent,\n        NestableDragHandleDirective,\n        NestableExpandCollapseDirective\n    ]\n})\nexport class NestableModule {\n}\n"]},"metadata":{},"sourceType":"module"}